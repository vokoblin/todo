(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const l of i)if(l.type==="childList")for(const a of l.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function t(i){const l={};return i.integrity&&(l.integrity=i.integrity),i.referrerpolicy&&(l.referrerPolicy=i.referrerpolicy),i.crossorigin==="use-credentials"?l.credentials="include":i.crossorigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function r(i){if(i.ep)return;i.ep=!0;const l=t(i);fetch(i.href,l)}})();function ee(){}function yt(n){return n()}function Je(){return Object.create(null)}function ie(n){n.forEach(yt)}function vt(n){return typeof n=="function"}function ge(n,e){return n!=n?e==e:n!==e||n&&typeof n=="object"||typeof n=="function"}function Mt(n){return Object.keys(n).length===0}function Ot(n,...e){if(n==null)return ee;const t=n.subscribe(...e);return t.unsubscribe?()=>t.unsubscribe():t}function wt(n,e,t){n.$$.on_destroy.push(Ot(e,t))}function d(n,e){n.appendChild(e)}function I(n,e,t){n.insertBefore(e,t||null)}function D(n){n.parentNode&&n.parentNode.removeChild(n)}function g(n){return document.createElement(n)}function ne(n){return document.createElementNS("http://www.w3.org/2000/svg",n)}function F(n){return document.createTextNode(n)}function x(){return F(" ")}function je(){return F("")}function R(n,e,t,r){return n.addEventListener(e,t,r),()=>n.removeEventListener(e,t,r)}function c(n,e,t){t==null?n.removeAttribute(e):n.getAttribute(e)!==t&&n.setAttribute(e,t)}function Et(n){let e;return{p(...t){e=t,e.forEach(r=>n.push(r))},r(){e.forEach(t=>n.splice(n.indexOf(t),1))}}}function $t(n){return Array.from(n.childNodes)}function te(n,e){e=""+e,n.data!==e&&(n.data=e)}function ae(n,e){n.value=e==null?"":e}function Te(n,e,t,r){t==null?n.style.removeProperty(e):n.style.setProperty(e,t,r?"important":"")}function $e(n,e,t){for(let r=0;r<n.options.length;r+=1){const i=n.options[r];if(i.__value===e){i.selected=!0;return}}(!t||e!==void 0)&&(n.selectedIndex=-1)}function Fe(n){const e=n.querySelector(":checked");return e&&e.__value}function J(n,e,t){n.classList[t?"add":"remove"](e)}function Pt(n,e,{bubbles:t=!1,cancelable:r=!1}={}){const i=document.createEvent("CustomEvent");return i.initCustomEvent(n,t,r,e),i}let De;function Ce(n){De=n}function Le(){if(!De)throw new Error("Function called outside component initialization");return De}function Ae(n){Le().$$.on_mount.push(n)}function Nt(n){Le().$$.on_destroy.push(n)}function Ht(){const n=Le();return(e,t,{cancelable:r=!1}={})=>{const i=n.$$.callbacks[e];if(i){const l=Pt(e,t,{cancelable:r});return i.slice().forEach(a=>{a.call(n,l)}),!l.defaultPrevented}return!0}}const xe=[],qe=[];let Se=[];const Ve=[],Lt=Promise.resolve();let He=!1;function At(){He||(He=!0,Lt.then(xt))}function Ie(n){Se.push(n)}const Ne=new Set;let ve=0;function xt(){if(ve!==0)return;const n=De;do{try{for(;ve<xe.length;){const e=xe[ve];ve++,Ce(e),Bt(e.$$)}}catch(e){throw xe.length=0,ve=0,e}for(Ce(null),xe.length=0,ve=0;qe.length;)qe.pop()();for(let e=0;e<Se.length;e+=1){const t=Se[e];Ne.has(t)||(Ne.add(t),t())}Se.length=0}while(xe.length);for(;Ve.length;)Ve.pop()();He=!1,Ne.clear(),Ce(n)}function Bt(n){if(n.fragment!==null){n.update(),ie(n.before_update);const e=n.dirty;n.dirty=[-1],n.fragment&&n.fragment.p(n.ctx,e),n.after_update.forEach(Ie)}}function Rt(n){const e=[],t=[];Se.forEach(r=>n.indexOf(r)===-1?e.push(r):t.push(r)),t.forEach(r=>r()),Se=e}const Ee=new Set;let pe;function me(){pe={r:0,c:[],p:pe}}function he(){pe.r||ie(pe.c),pe=pe.p}function q(n,e){n&&n.i&&(Ee.delete(n),n.i(e))}function Q(n,e,t,r){if(n&&n.o){if(Ee.has(n))return;Ee.add(n),pe.c.push(()=>{Ee.delete(n),r&&(t&&n.d(1),r())}),n.o(e)}else r&&r()}function St(n,e){n.d(1),e.delete(n.key)}function Be(n,e){Q(n,1,1,()=>{e.delete(n.key)})}function Me(n,e,t,r,i,l,a,o,u,s,f,k){let p=n.length,S=l.length,m=p;const b={};for(;m--;)b[n[m].key]=m;const h=[],_=new Map,w=new Map,j=[];for(m=S;m--;){const E=k(i,l,m),T=t(E);let $=a.get(T);$?r&&j.push(()=>$.p(E,e)):($=s(T,E),$.c()),_.set(T,h[m]=$),T in b&&w.set(T,Math.abs(m-b[T]))}const y=new Set,v=new Set;function C(E){q(E,1),E.m(o,f),a.set(E.key,E),f=E.first,S--}for(;p&&S;){const E=h[S-1],T=n[p-1],$=E.key,W=T.key;E===T?(f=E.first,p--,S--):_.has(W)?!a.has($)||y.has($)?C(E):v.has(W)?p--:w.get($)>w.get(W)?(v.add($),C(E)):(y.add(W),p--):(u(T,a),p--)}for(;p--;){const E=n[p];_.has(E.key)||u(E,a)}for(;S;)C(h[S-1]);return ie(j),h}function _e(n){n&&n.c()}function ce(n,e,t,r){const{fragment:i,after_update:l}=n.$$;i&&i.m(e,t),r||Ie(()=>{const a=n.$$.on_mount.map(yt).filter(vt);n.$$.on_destroy?n.$$.on_destroy.push(...a):ie(a),n.$$.on_mount=[]}),l.forEach(Ie)}function fe(n,e){const t=n.$$;t.fragment!==null&&(Rt(t.after_update),ie(t.on_destroy),t.fragment&&t.fragment.d(e),t.on_destroy=t.fragment=null,t.ctx=[])}function zt(n,e){n.$$.dirty[0]===-1&&(xe.push(n),At(),n.$$.dirty.fill(0)),n.$$.dirty[e/31|0]|=1<<e%31}function be(n,e,t,r,i,l,a,o=[-1]){const u=De;Ce(n);const s=n.$$={fragment:null,ctx:[],props:l,update:ee,not_equal:i,bound:Je(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(u?u.$$.context:[])),callbacks:Je(),dirty:o,skip_bound:!1,root:e.target||u.$$.root};a&&a(s.root);let f=!1;if(s.ctx=t?t(n,e.props||{},(k,p,...S)=>{const m=S.length?S[0]:p;return s.ctx&&i(s.ctx[k],s.ctx[k]=m)&&(!s.skip_bound&&s.bound[k]&&s.bound[k](m),f&&zt(n,k)),p}):[],s.update(),f=!0,ie(s.before_update),s.fragment=r?r(s.ctx):!1,e.target){if(e.hydrate){const k=$t(e.target);s.fragment&&s.fragment.l(k),k.forEach(D)}else s.fragment&&s.fragment.c();e.intro&&q(n.$$.fragment),ce(n,e.target,e.anchor,e.customElement),xt()}Ce(u)}class ke{$destroy(){fe(this,1),this.$destroy=ee}$on(e,t){if(!vt(t))return ee;const r=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return r.push(t),()=>{const i=r.indexOf(t);i!==-1&&r.splice(i,1)}}$set(e){this.$$set&&!Mt(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}class Jt extends ke{constructor(e){super(),be(this,e,null,null,ge,{})}}const we=[];function Ft(n,e=ee){let t;const r=new Set;function i(o){if(ge(n,o)&&(n=o,t)){const u=!we.length;for(const s of r)s[1](),we.push(s,n);if(u){for(let s=0;s<we.length;s+=2)we[s][0](we[s+1]);we.length=0}}}function l(o){i(o(n))}function a(o,u=ee){const s=[o,u];return r.add(s),r.size===1&&(t=e(i)||ee),o(n),()=>{r.delete(s),r.size===0&&t&&(t(),t=null)}}return{set:i,update:l,subscribe:a}}const le="game-todo-data",qt={projects:[],settings:{theme:"light"},uiState:{expandedProjects:{},expandedSections:{}}};function Vt(){const{subscribe:n,set:e,update:t}=Ft(qt);return{subscribe:n,init:()=>{if(typeof window<"u"){const r=localStorage.getItem(le);if(r)try{const i=JSON.parse(r);i.uiState||(i.uiState={expandedProjects:{},expandedSections:{}}),e(i)}catch(i){console.error("Failed to parse stored todo data:",i)}}},save:r=>{typeof window<"u"&&localStorage.setItem(le,JSON.stringify(r)),e(r)},addProject:r=>{t(i=>{const l={...i,projects:[...i.projects,r]};return typeof window<"u"&&localStorage.setItem(le,JSON.stringify(l)),l})},updateProject:(r,i)=>{t(l=>{const a={...l,projects:l.projects.map(o=>o.id===r?{...o,...i}:o)};return typeof window<"u"&&localStorage.setItem(le,JSON.stringify(a)),a})},deleteProject:r=>{t(i=>{const l={...i,projects:i.projects.filter(a=>a.id!==r)};return typeof window<"u"&&localStorage.setItem(le,JSON.stringify(l)),l})},updateTodoStatus:(r,i,l)=>{t(a=>{const o={...a,projects:a.projects.map(u=>u.id===r?{...u,items:u.items.map(s=>s.id===i?{...s,status:l}:s)}:u)};return typeof window<"u"&&localStorage.setItem(le,JSON.stringify(o)),o})},addTodoItem:(r,i)=>{t(l=>{const a={...l,projects:l.projects.map(o=>o.id===r?{...o,items:[...o.items,i]}:o)};return typeof window<"u"&&localStorage.setItem(le,JSON.stringify(a)),a})},updateSettings:r=>{t(i=>{const l={...i,settings:{...i.settings,...r}};return typeof window<"u"&&localStorage.setItem(le,JSON.stringify(l)),l})},checkResets:()=>{t(r=>{const i=Date.now();let l=!1;const a={...r,projects:r.projects.map(o=>({...o,items:o.items.map(u=>Wt(u.resetTime,u.lastReset,i)?(l=!0,{...u,status:"pending",lastReset:i}):u)}))};return l&&typeof window<"u"&&localStorage.setItem(le,JSON.stringify(a)),a})},toggleProjectExpanded:r=>{t(i=>{const l={...i,uiState:{...i.uiState,expandedProjects:{...i.uiState.expandedProjects,[r]:!i.uiState.expandedProjects[r]}}};return typeof window<"u"&&localStorage.setItem(le,JSON.stringify(l)),l})},toggleSectionExpanded:r=>{t(i=>{const l={...i,uiState:{...i.uiState,expandedSections:{...i.uiState.expandedSections,[r]:!i.uiState.expandedSections[r]}}};return typeof window<"u"&&localStorage.setItem(le,JSON.stringify(l)),l})}}}function Wt(n,e,t){const r=new Date(t);if(n.type==="daily"){const[i,l]=n.time.split(":").map(Number),a=new Date(r);return a.setHours(i,l,0,0),r<a&&a.setDate(a.getDate()-1),e<a.getTime()}else if(n.type==="weekly"){const[i,l]=n.time.split(":").map(Number),a=n.weekday||0,o=new Date(r),u=o.getDay()-a;return o.setDate(o.getDate()-(u>=0?u:u+7)),o.setHours(i,l,0,0),r<o&&o.setDate(o.getDate()-7),e<o.getTime()}return!1}const re=Vt();function We(n,e,t){const r=n.slice();return r[11]=e[t],r}function Gt(n){let e,t,r,i,l,a=n[0].name+"",o,u,s,f,k=Xe(n[0].resetTime)+"",p,S,m,b,h,_,w,j=n[0].status==="completed"&&Ge(),y=n[0].description&&Ke(n);return{c(){e=g("button"),j&&j.c(),t=x(),r=g("div"),i=g("div"),l=g("h4"),o=F(a),u=x(),s=g("div"),f=g("div"),p=F(k),S=x(),m=g("div"),b=F(n[4]),h=x(),y&&y.c(),c(e,"class","flex-shrink-0 w-5 h-5 rounded border-2 border-gray-300 dark:border-gray-600 flex items-center justify-center transition-all duration-200"),J(e,"bg-indigo-600",n[0].status==="completed"),J(e,"border-indigo-600",n[0].status==="completed"),J(e,"dark:border-indigo-500",n[0].status==="completed"),J(e,"dark:bg-indigo-500",n[0].status==="completed"),c(l,"class","font-medium transition-colors"),J(l,"text-gray-900",n[0].status==="pending"),J(l,"dark:text-white",n[0].status==="pending"),J(l,"text-gray-500",n[0].status==="completed"),J(l,"dark:text-gray-400",n[0].status==="completed"),J(l,"line-through",n[0].status==="completed"),c(f,"class","text-xs text-gray-500 dark:text-gray-400"),c(m,"class","text-xs text-indigo-600 dark:text-indigo-400 font-medium"),c(s,"class","text-right ml-2"),c(i,"class","flex items-start justify-between"),c(r,"class","flex-1")},m(v,C){I(v,e,C),j&&j.m(e,null),I(v,t,C),I(v,r,C),d(r,i),d(i,l),d(l,o),d(i,u),d(i,s),d(s,f),d(f,p),d(s,S),d(s,m),d(m,b),d(r,h),y&&y.m(r,null),_||(w=R(e,"click",n[8]),_=!0)},p(v,C){v[0].status==="completed"?j||(j=Ge(),j.c(),j.m(e,null)):j&&(j.d(1),j=null),C&1&&J(e,"bg-indigo-600",v[0].status==="completed"),C&1&&J(e,"border-indigo-600",v[0].status==="completed"),C&1&&J(e,"dark:border-indigo-500",v[0].status==="completed"),C&1&&J(e,"dark:bg-indigo-500",v[0].status==="completed"),C&1&&a!==(a=v[0].name+"")&&te(o,a),C&1&&J(l,"text-gray-900",v[0].status==="pending"),C&1&&J(l,"dark:text-white",v[0].status==="pending"),C&1&&J(l,"text-gray-500",v[0].status==="completed"),C&1&&J(l,"dark:text-gray-400",v[0].status==="completed"),C&1&&J(l,"line-through",v[0].status==="completed"),C&1&&k!==(k=Xe(v[0].resetTime)+"")&&te(p,k),C&16&&te(b,v[4]),v[0].description?y?y.p(v,C):(y=Ke(v),y.c(),y.m(r,null)):y&&(y.d(1),y=null)},d(v){v&&D(e),j&&j.d(),v&&D(t),v&&D(r),y&&y.d(),_=!1,w()}}}function Kt(n){let e,t,r,i,l,a,o,u,s,f,k=n[0].name+"",p,S,m,b,h=n[0].description&&Ue(n);return{c(){e=g("button"),t=ne("svg"),r=ne("path"),l=x(),a=ne("svg"),o=ne("path"),u=x(),s=g("div"),f=g("h4"),p=F(k),S=x(),h&&h.c(),c(r,"stroke-linecap","round"),c(r,"stroke-linejoin","round"),c(r,"stroke-width","2"),c(r,"d","M9 5l7 7-7 7"),c(t,"class",i="w-4 h-4 text-gray-500 dark:text-gray-400 transform transition-transform "+(n[6]?"rotate-90":"")),c(t,"fill","none"),c(t,"stroke","currentColor"),c(t,"viewBox","0 0 24 24"),c(o,"stroke-linecap","round"),c(o,"stroke-linejoin","round"),c(o,"stroke-width","2"),c(o,"d","M3 7v10a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2H5a2 2 0 00-2-2z"),c(a,"class","w-5 h-5 text-indigo-600 dark:text-indigo-400"),c(a,"fill","none"),c(a,"stroke","currentColor"),c(a,"viewBox","0 0 24 24"),c(f,"class","font-medium text-gray-900 dark:text-white"),c(s,"class","flex-1"),c(e,"class","flex items-center gap-2 flex-1 text-left hover:bg-gray-200 dark:hover:bg-gray-600 rounded p-1 -m-1 transition-colors")},m(_,w){I(_,e,w),d(e,t),d(t,r),d(e,l),d(e,a),d(a,o),d(e,u),d(e,s),d(s,f),d(f,p),d(s,S),h&&h.m(s,null),m||(b=R(e,"click",n[7]),m=!0)},p(_,w){w&64&&i!==(i="w-4 h-4 text-gray-500 dark:text-gray-400 transform transition-transform "+(_[6]?"rotate-90":""))&&c(t,"class",i),w&1&&k!==(k=_[0].name+"")&&te(p,k),_[0].description?h?h.p(_,w):(h=Ue(_),h.c(),h.m(s,null)):h&&(h.d(1),h=null)},d(_){_&&D(e),h&&h.d(),m=!1,b()}}}function Ge(n){let e,t;return{c(){e=ne("svg"),t=ne("path"),c(t,"stroke-linecap","round"),c(t,"stroke-linejoin","round"),c(t,"stroke-width","3"),c(t,"d","M5 13l4 4L19 7"),c(e,"class","w-3 h-3 text-white"),c(e,"fill","none"),c(e,"stroke","currentColor"),c(e,"viewBox","0 0 24 24")},m(r,i){I(r,e,i),d(e,t)},d(r){r&&D(e)}}}function Ke(n){let e,t=n[0].description+"",r;return{c(){e=g("p"),r=F(t),c(e,"class","text-sm mt-1 transition-colors"),J(e,"text-gray-600",n[0].status==="pending"),J(e,"dark:text-gray-300",n[0].status==="pending"),J(e,"text-gray-400",n[0].status==="completed"),J(e,"dark:text-gray-500",n[0].status==="completed")},m(i,l){I(i,e,l),d(e,r)},p(i,l){l&1&&t!==(t=i[0].description+"")&&te(r,t),l&1&&J(e,"text-gray-600",i[0].status==="pending"),l&1&&J(e,"dark:text-gray-300",i[0].status==="pending"),l&1&&J(e,"text-gray-400",i[0].status==="completed"),l&1&&J(e,"dark:text-gray-500",i[0].status==="completed")},d(i){i&&D(e)}}}function Ue(n){let e,t=n[0].description+"",r;return{c(){e=g("p"),r=F(t),c(e,"class","text-sm text-gray-600 dark:text-gray-300 mt-1")},m(i,l){I(i,e,l),d(e,r)},p(i,l){l&1&&t!==(t=i[0].description+"")&&te(r,t)},d(i){i&&D(e)}}}function Ye(n){let e=[],t=new Map,r,i,l=n[5];const a=o=>o[11].id;for(let o=0;o<l.length;o+=1){let u=We(n,l,o),s=a(u);t.set(s,e[o]=Qe(s,u))}return{c(){for(let o=0;o<e.length;o+=1)e[o].c();r=je()},m(o,u){for(let s=0;s<e.length;s+=1)e[s]&&e[s].m(o,u);I(o,r,u),i=!0},p(o,u){u&46&&(l=o[5],me(),e=Me(e,u,a,1,o,l,t,r.parentNode,Be,Qe,r,We),he())},i(o){if(!i){for(let u=0;u<l.length;u+=1)q(e[u]);i=!0}},o(o){for(let u=0;u<e.length;u+=1)Q(e[u]);i=!1},d(o){for(let u=0;u<e.length;u+=1)e[u].d(o);o&&D(r)}}}function Qe(n,e){let t,r,i;return r=new jt({props:{item:e[11],projectId:e[1],allItems:e[2],depth:e[3]+1}}),{key:n,first:null,c(){t=je(),_e(r.$$.fragment),this.first=t},m(l,a){I(l,t,a),ce(r,l,a),i=!0},p(l,a){e=l;const o={};a&32&&(o.item=e[11]),a&2&&(o.projectId=e[1]),a&4&&(o.allItems=e[2]),a&8&&(o.depth=e[3]+1),r.$set(o)},i(l){i||(q(r.$$.fragment,l),i=!0)},o(l){Q(r.$$.fragment,l),i=!1},d(l){l&&D(t),fe(r,l)}}}function Ut(n){let e,t,r,i;function l(s,f){return s[0].isSection?Kt:Gt}let a=l(n),o=a(n),u=(!n[0].isSection||n[6])&&Ye(n);return{c(){e=g("div"),t=g("div"),o.c(),r=x(),u&&u.c(),c(t,"class","flex items-center gap-3 p-3 rounded-lg border border-gray-200 dark:border-gray-600 bg-gray-50 dark:bg-gray-700/50 hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors"),J(t,"opacity-60",n[0].status==="completed"&&!n[0].isSection),c(e,"class","space-y-1"),Te(e,"margin-left",n[3]*1.5+"rem")},m(s,f){I(s,e,f),d(e,t),o.m(t,null),d(e,r),u&&u.m(e,null),i=!0},p(s,[f]){a===(a=l(s))&&o?o.p(s,f):(o.d(1),o=a(s),o&&(o.c(),o.m(t,null))),(!i||f&1)&&J(t,"opacity-60",s[0].status==="completed"&&!s[0].isSection),!s[0].isSection||s[6]?u?(u.p(s,f),f&65&&q(u,1)):(u=Ye(s),u.c(),q(u,1),u.m(e,null)):u&&(me(),Q(u,1,1,()=>{u=null}),he()),(!i||f&8)&&Te(e,"margin-left",s[3]*1.5+"rem")},i(s){i||(q(u),i=!0)},o(s){Q(u),i=!1},d(s){s&&D(e),o.d(),u&&u.d()}}}function Xe(n){return n.type==="daily"?`Daily at ${n.time}`:`Weekly ${["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"][n.weekday||0]} at ${n.time}`}function Ze(n){const e=new Date;let t;if(n.type==="daily"){const[a,o]=n.time.split(":").map(Number);t=new Date(e),t.setHours(a,o,0,0),e>=t&&t.setDate(t.getDate()+1)}else{const[a,o]=n.time.split(":").map(Number),u=n.weekday||0;t=new Date(e);const s=e.getDay(),f=(u-s+7)%7;t.setDate(t.getDate()+f),t.setHours(a,o,0,0),f===0&&e>=t&&t.setDate(t.getDate()+7)}const r=t.getTime()-e.getTime();if(r<=0)return"Reset now";const i=Math.floor(r/(1e3*60*60)),l=Math.floor(r%(1e3*60*60)/(1e3*60));if(i>24){const a=Math.floor(i/24),o=i%24;return`${a}d ${o}h remaining`}else return i>0?`${i}h ${l}m remaining`:`${l}m remaining`}function Yt(n,e,t){let r,i,l;wt(n,re,m=>t(9,l=m));let{item:a}=e,{projectId:o}=e,{allItems:u}=e,{depth:s=0}=e,f="",k;Ae(()=>{a.isSection||(t(4,f=Ze(a.resetTime)),k=setInterval(()=>{t(4,f=Ze(a.resetTime))},6e4))}),Nt(()=>{k&&clearInterval(k)});function p(){a.isSection&&re.toggleSectionExpanded(a.id)}function S(){if(!a.isSection){const m=a.status==="completed"?"pending":"completed";re.updateTodoStatus(o,a.id,m)}}return n.$$set=m=>{"item"in m&&t(0,a=m.item),"projectId"in m&&t(1,o=m.projectId),"allItems"in m&&t(2,u=m.allItems),"depth"in m&&t(3,s=m.depth)},n.$$.update=()=>{var m,b,h;n.$$.dirty&513&&t(6,r=a.isSection&&(h=(b=(m=l.uiState)==null?void 0:m.expandedSections)==null?void 0:b[a.id])!=null?h:!0),n.$$.dirty&5&&t(5,i=u.filter(_=>_.parentId===a.id))},[a,o,u,s,f,i,r,p,S,l]}class jt extends ke{constructor(e){super(),be(this,e,Yt,Ut,ge,{item:0,projectId:1,allItems:2,depth:3})}}function et(n,e,t){const r=n.slice();return r[9]=e[t],r}function tt(n){let e,t=n[0].description+"",r;return{c(){e=g("p"),r=F(t),c(e,"class","text-sm text-gray-600 dark:text-gray-300 mb-3")},m(i,l){I(i,e,l),d(e,r)},p(i,l){l&1&&t!==(t=i[0].description+"")&&te(r,t)},d(i){i&&D(e)}}}function nt(n){let e,t=[],r=new Map,i,l=n[3];const a=o=>o[9].id;for(let o=0;o<l.length;o+=1){let u=et(n,l,o),s=a(u);r.set(s,t[o]=rt(s,u))}return{c(){e=g("div");for(let o=0;o<t.length;o+=1)t[o].c();c(e,"class","border-t border-gray-200 dark:border-gray-700 pt-4 space-y-2")},m(o,u){I(o,e,u);for(let s=0;s<t.length;s+=1)t[s]&&t[s].m(e,null);i=!0},p(o,u){u&9&&(l=o[3],me(),t=Me(t,u,a,1,o,l,r,e,Be,rt,null,et),he())},i(o){if(!i){for(let u=0;u<l.length;u+=1)q(t[u]);i=!0}},o(o){for(let u=0;u<t.length;u+=1)Q(t[u]);i=!1},d(o){o&&D(e);for(let u=0;u<t.length;u+=1)t[u].d()}}}function rt(n,e){let t,r,i;return r=new jt({props:{item:e[9],projectId:e[0].id,allItems:e[0].items,depth:0}}),{key:n,first:null,c(){t=je(),_e(r.$$.fragment),this.first=t},m(l,a){I(l,t,a),ce(r,l,a),i=!0},p(l,a){e=l;const o={};a&8&&(o.item=e[9]),a&1&&(o.projectId=e[0].id),a&1&&(o.allItems=e[0].items),r.$set(o)},i(l){i||(q(r.$$.fragment,l),i=!0)},o(l){Q(r.$$.fragment,l),i=!1},d(l){l&&D(t),fe(r,l)}}}function Qt(n){let e,t,r,i,l,a=n[0].name+"",o,u,s,f,k,p,S,m,b,h,_,w,j,y,v,C,E,T,$,W,V,K,Z,N,A=n[0].description&&tt(n),H=n[5]&&nt(n);return{c(){e=g("div"),t=g("div"),r=g("div"),i=g("div"),l=g("h3"),o=F(a),u=x(),A&&A.c(),s=x(),f=g("div"),k=g("div"),p=g("div"),S=x(),m=g("span"),b=F(n[2]),h=F("/"),_=F(n[1]),w=x(),j=g("div"),y=g("button"),v=ne("svg"),C=ne("path"),$=x(),W=g("button"),W.innerHTML='<svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"></path></svg>',V=x(),H&&H.c(),c(l,"class","text-lg font-semibold text-gray-900 dark:text-white mb-2"),c(p,"class","bg-indigo-600 dark:bg-indigo-500 h-2 rounded-full transition-all duration-300"),Te(p,"width",n[4]+"%"),c(k,"class","flex-1 bg-gray-200 dark:bg-gray-700 rounded-full h-2"),c(m,"class","text-sm font-medium text-gray-900 dark:text-white"),c(f,"class","flex items-center gap-3 mb-3"),c(i,"class","flex-1"),c(C,"stroke-linecap","round"),c(C,"stroke-linejoin","round"),c(C,"stroke-width","2"),c(C,"d","M19 9l-7 7-7-7"),c(v,"class",E="w-5 h-5 transform transition-transform "+(n[5]?"rotate-180":"")),c(v,"fill","none"),c(v,"stroke","currentColor"),c(v,"viewBox","0 0 24 24"),c(y,"class","p-2 rounded-lg text-gray-600 dark:text-gray-300 hover:text-gray-900 dark:hover:text-white hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors"),c(y,"title",T=n[5]?"Collapse":"Expand"),c(W,"class","p-2 rounded-lg text-gray-400 hover:text-red-600 hover:bg-red-50 dark:hover:bg-red-900/20 transition-colors"),c(W,"title","Delete project"),c(j,"class","flex items-center gap-2 ml-4"),c(r,"class","flex items-start justify-between mb-4"),c(t,"class","p-6"),c(e,"class","bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700 overflow-hidden")},m(B,G){I(B,e,G),d(e,t),d(t,r),d(r,i),d(i,l),d(l,o),d(i,u),A&&A.m(i,null),d(i,s),d(i,f),d(f,k),d(k,p),d(f,S),d(f,m),d(m,b),d(m,h),d(m,_),d(r,w),d(r,j),d(j,y),d(y,v),d(v,C),d(j,$),d(j,W),d(t,V),H&&H.m(t,null),K=!0,Z||(N=[R(y,"click",n[6]),R(W,"click",n[7])],Z=!0)},p(B,[G]){(!K||G&1)&&a!==(a=B[0].name+"")&&te(o,a),B[0].description?A?A.p(B,G):(A=tt(B),A.c(),A.m(i,s)):A&&(A.d(1),A=null),(!K||G&16)&&Te(p,"width",B[4]+"%"),(!K||G&4)&&te(b,B[2]),(!K||G&2)&&te(_,B[1]),(!K||G&32&&E!==(E="w-5 h-5 transform transition-transform "+(B[5]?"rotate-180":"")))&&c(v,"class",E),(!K||G&32&&T!==(T=B[5]?"Collapse":"Expand"))&&c(y,"title",T),B[5]?H?(H.p(B,G),G&32&&q(H,1)):(H=nt(B),H.c(),q(H,1),H.m(t,null)):H&&(me(),Q(H,1,1,()=>{H=null}),he())},i(B){K||(q(H),K=!0)},o(B){Q(H),K=!1},d(B){B&&D(e),A&&A.d(),H&&H.d(),Z=!1,ie(N)}}}function Xt(n,e,t){let r,i,l,a,o,u;wt(n,re,p=>t(8,u=p));let{project:s}=e;function f(){re.toggleProjectExpanded(s.id)}function k(){confirm(`Are you sure you want to delete "${s.name}"?`)&&re.deleteProject(s.id)}return n.$$set=p=>{"project"in p&&t(0,s=p.project)},n.$$.update=()=>{var p,S,m;n.$$.dirty&257&&t(5,r=(m=(S=(p=u.uiState)==null?void 0:p.expandedProjects)==null?void 0:S[s.id])!=null?m:!1),n.$$.dirty&1&&t(2,i=s.items.filter(b=>!b.isSection&&b.status==="completed").length),n.$$.dirty&1&&t(1,l=s.items.filter(b=>!b.isSection).length),n.$$.dirty&6&&t(4,a=l>0?i/l*100:0),n.$$.dirty&1&&t(3,o=s.items.filter(b=>!b.parentId))},[s,l,i,o,a,r,f,k,u]}class Zt extends ke{constructor(e){super(),be(this,e,Xt,Qt,ge,{project:0})}}function it(n,e,t){const r=n.slice();return r[47]=e[t],r}function lt(n,e,t){const r=n.slice();return r[44]=e[t],r}function en(n){let e,t,r,i,l,a,o,u,s,f,k,p,S,m,b,h,_,w,j,y,v,C,E,T,$=[],W=new Map,V,K,Z,N,A,H,B,G,oe,de,U=n[4].length>0&&ot(),se=n[19]();const ue=O=>O[47].id;for(let O=0;O<se.length;O+=1){let L=it(n,se,O),Y=ue(L);W.set(Y,$[O]=at(Y,L))}let X=n[4].length===0&&dt();return{c(){e=g("div"),t=g("div"),r=g("button"),r.textContent="\u2190 Back to Presets",i=x(),l=g("div"),a=g("div"),o=g("label"),o.textContent="TODO Name *",u=x(),s=g("input"),f=x(),k=g("div"),p=g("label"),p.textContent="Description (Optional)",S=x(),m=g("textarea"),b=x(),h=g("div"),_=g("div"),w=g("div"),j=g("h3"),j.textContent="Tasks & Sections",y=x(),v=g("button"),v.innerHTML=`<svg class="w-4 h-4 mr-1" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6v6m0 0v6m0-6h6m-6 0H6"></path></svg>
                  Add Item`,C=x(),U&&U.c(),E=x(),T=g("div");for(let O=0;O<$.length;O+=1)$[O].c();V=x(),X&&X.c(),K=x(),Z=g("div"),N=g("button"),N.textContent="Cancel",A=x(),H=g("button"),B=F("Create TODO"),c(r,"class","text-sm text-indigo-600 dark:text-indigo-400 hover:text-indigo-700 dark:hover:text-indigo-300 mb-4"),c(o,"class","block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"),c(s,"type","text"),c(s,"class","w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 dark:bg-gray-700 dark:text-white"),c(s,"placeholder","Enter TODO name"),c(p,"class","block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"),c(m,"class","w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 dark:bg-gray-700 dark:text-white"),c(m,"placeholder","Describe your TODO"),c(m,"rows","2"),c(l,"class","space-y-4"),c(j,"class","text-lg font-medium text-gray-900 dark:text-white"),c(v,"class","inline-flex items-center px-3 py-1 text-sm font-medium text-indigo-600 dark:text-indigo-400 hover:text-indigo-700 dark:hover:text-indigo-300"),c(w,"class","flex items-center justify-between mb-2"),c(_,"class","mb-4"),c(T,"class","space-y-2 max-h-40 overflow-y-auto"),c(N,"class","flex-1 px-4 py-2 text-gray-700 dark:text-gray-300 border border-gray-300 dark:border-gray-600 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors"),H.disabled=G=!n[2].trim(),c(H,"class","flex-1 px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors"),c(Z,"class","flex gap-3 pt-6 border-t border-gray-200 dark:border-gray-600"),c(e,"class","space-y-6")},m(O,L){I(O,e,L),d(e,t),d(t,r),d(t,i),d(t,l),d(l,a),d(a,o),d(a,u),d(a,s),ae(s,n[2]),d(l,f),d(l,k),d(k,p),d(k,S),d(k,m),ae(m,n[3]),d(e,b),d(e,h),d(h,_),d(_,w),d(w,j),d(w,y),d(w,v),d(_,C),U&&U.m(_,null),d(h,E),d(h,T);for(let Y=0;Y<$.length;Y+=1)$[Y]&&$[Y].m(T,null);d(T,V),X&&X.m(T,null),d(e,K),d(e,Z),d(Z,N),d(Z,A),d(Z,H),d(H,B),oe||(de=[R(r,"click",n[24]),R(s,"input",n[25]),R(m,"input",n[26]),R(v,"click",n[11]),R(N,"click",n[20]),R(H,"click",n[10])],oe=!0)},p(O,L){L[0]&4&&s.value!==O[2]&&ae(s,O[2]),L[0]&8&&ae(m,O[3]),O[4].length>0?U||(U=ot(),U.c(),U.m(_,null)):U&&(U.d(1),U=null),L[0]&1032336&&(se=O[19](),$=Me($,L,ue,1,O,se,W,T,St,at,V,it)),O[4].length===0?X||(X=dt(),X.c(),X.m(T,null)):X&&(X.d(1),X=null),L[0]&4&&G!==(G=!O[2].trim())&&(H.disabled=G)},d(O){O&&D(e),U&&U.d();for(let L=0;L<$.length;L+=1)$[L].d();X&&X.d(),oe=!1,ie(de)}}}function tn(n){let e,t,r,i,l=[],a=new Map,o,u,s,f,k,p=n[1];const S=m=>m[44].name;for(let m=0;m<p.length;m+=1){let b=lt(n,p,m),h=S(b);a.set(h,l[m]=ct(h,b))}return{c(){e=g("div"),t=g("div"),t.innerHTML=`<h3 class="text-lg font-medium text-gray-900 dark:text-white mb-2">Choose a Preset</h3> 
            <p class="text-gray-600 dark:text-gray-300">Start with a pre-configured template or create a custom TODO</p>`,r=x(),i=g("div");for(let m=0;m<l.length;m+=1)l[m].c();o=x(),u=g("div"),s=g("button"),s.innerHTML=`<svg class="w-8 h-8 mx-auto text-gray-400 dark:text-gray-500 mb-2" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="1" d="M12 6v6m0 0v6m0-6h6m-6 0H6"></path></svg> 
              <span class="text-sm font-medium text-gray-900 dark:text-white">Create Custom TODO</span>`,c(t,"class","text-center"),c(i,"class","grid gap-4"),c(s,"class","w-full p-4 border-2 border-dashed border-gray-300 dark:border-gray-600 rounded-lg text-center hover:border-indigo-500 hover:bg-indigo-50 dark:hover:bg-indigo-900/20 transition-colors"),c(u,"class","border-t border-gray-200 dark:border-gray-600 pt-6"),c(e,"class","space-y-6")},m(m,b){I(m,e,b),d(e,t),d(e,r),d(e,i);for(let h=0;h<l.length;h+=1)l[h]&&l[h].m(i,null);d(e,o),d(e,u),d(u,s),f||(k=R(s,"click",n[9]),f=!0)},p(m,b){b[0]&258&&(p=m[1],l=Me(l,b,S,1,m,p,a,i,St,ct,null,lt))},d(m){m&&D(e);for(let b=0;b<l.length;b+=1)l[b].d();f=!1,k()}}}function ot(n){let e;return{c(){e=g("p"),e.textContent="\u{1F4A1} Drag tasks onto sections to organize them, or drag them to other positions to reorder",c(e,"class","text-xs text-gray-500 dark:text-gray-400")},m(t,r){I(t,e,r)},d(t){t&&D(e)}}}function nn(n){let e;return{c(){e=g("span"),e.textContent="\u2514\u2500",c(e,"class","text-gray-400 dark:text-gray-500")},m(t,r){I(t,e,r)},d(t){t&&D(e)}}}function st(n){let e,t=n[4].filter(l).length+"",r,i;function l(...a){return n[27](n[47],...a)}return{c(){e=g("span"),r=F(t),i=F(" items"),c(e,"class","text-xs text-blue-600 dark:text-blue-400 bg-blue-100 dark:bg-blue-900 px-2 py-1 rounded")},m(a,o){I(a,e,o),d(e,r),d(e,i)},p(a,o){n=a,o[0]&16&&t!==(t=n[4].filter(l).length+"")&&te(r,t)},d(a){a&&D(e)}}}function rn(n){let e,t=n[47].description+"",r;return{c(){e=g("p"),r=F(t),c(e,"class","text-sm text-gray-600 dark:text-gray-300 flex-1")},m(i,l){I(i,e,l),d(e,r)},p:ee,d(i){i&&D(e)}}}function at(n,e){let t,r,i,l,a=e[47].isSection?"\u{1F4C1}":"\u{1F4CB}",o,u,s=e[47].name+"",f,k,p=e[47].isSection&&e[4].filter(C).length>0,S,m,b,h,_,w,j,y,v;function C(...N){return e[22](e[47],...N)}let E=e[47].level>0&&nn(),T=p&&st(e),$=e[47].description&&rn(e);function W(){return e[28](e[47])}function V(...N){return e[29](e[47],...N)}function K(...N){return e[30](e[47],...N)}function Z(...N){return e[31](e[47],...N)}return{key:n,first:null,c(){var N;t=g("div"),r=g("div"),E&&E.c(),i=x(),l=g("span"),o=F(a),u=x(),f=F(s),k=x(),T&&T.c(),S=x(),$&&$.c(),m=x(),b=g("div"),h=g("span"),h.textContent="\u22EE\u22EE",_=x(),w=g("button"),w.innerHTML='<svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"></path></svg>',c(l,"class","font-medium text-gray-900 dark:text-white"),c(r,"class","flex items-center gap-2 flex-1"),c(h,"class","text-xs text-gray-400 cursor-grab"),c(w,"class","text-gray-400 hover:text-red-600"),c(b,"class","flex items-center gap-2"),c(t,"class",j="flex items-center gap-3 p-3 border border-gray-200 dark:border-gray-600 rounded-lg cursor-move transition-all duration-200 "+(((N=e[7])==null?void 0:N.id)===e[47].id?"opacity-50 scale-95":"")+" "+(e[47].isSection?"bg-blue-50 dark:bg-blue-900/20 border-blue-200 dark:border-blue-700":"")+" "+(e[7]&&e[7].id!==e[47].id&&e[47].isSection&&!e[7].isSection?"ring-2 ring-blue-300 dark:ring-blue-600":"")),Te(t,"margin-left",e[47].level*20+"px"),c(t,"draggable","true"),this.first=t},m(N,A){I(N,t,A),d(t,r),E&&E.m(r,null),d(r,i),d(r,l),d(l,o),d(l,u),d(l,f),d(r,k),T&&T.m(r,null),d(t,S),$&&$.m(t,null),d(t,m),d(t,b),d(b,h),d(b,_),d(b,w),y||(v=[R(w,"click",W),R(t,"dragstart",V),R(t,"dragover",K),R(t,"drop",Z),R(t,"dragend",e[18])],y=!0)},p(N,A){var H;e=N,A[0]&16&&(p=e[47].isSection&&e[4].filter(C).length>0),p?T?T.p(e,A):(T=st(e),T.c(),T.m(r,null)):T&&(T.d(1),T=null),e[47].description&&$.p(e,A),A[0]&128&&j!==(j="flex items-center gap-3 p-3 border border-gray-200 dark:border-gray-600 rounded-lg cursor-move transition-all duration-200 "+(((H=e[7])==null?void 0:H.id)===e[47].id?"opacity-50 scale-95":"")+" "+(e[47].isSection?"bg-blue-50 dark:bg-blue-900/20 border-blue-200 dark:border-blue-700":"")+" "+(e[7]&&e[7].id!==e[47].id&&e[47].isSection&&!e[7].isSection?"ring-2 ring-blue-300 dark:ring-blue-600":""))&&c(t,"class",j)},d(N){N&&D(t),E&&E.d(),T&&T.d(),$&&$.d(),y=!1,ie(v)}}}function dt(n){let e;return{c(){e=g("div"),e.innerHTML=`<svg class="w-12 h-12 mx-auto mb-3 opacity-50" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="1" d="M9 5H7a2 2 0 00-2 2v10a2 2 0 002 2h8a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"></path></svg> 
                  <p class="text-sm">No tasks or sections yet</p> 
                  <p class="text-xs">Click &quot;Add Item&quot; to get started</p>`,c(e,"class","text-center py-8 text-gray-500 dark:text-gray-400")},m(t,r){I(t,e,r)},d(t){t&&D(e)}}}function ut(n){let e,t=n[44].description+"",r;return{c(){e=g("p"),r=F(t),c(e,"class","text-sm text-gray-600 dark:text-gray-300 mb-2")},m(i,l){I(i,e,l),d(e,r)},p(i,l){l[0]&2&&t!==(t=i[44].description+"")&&te(r,t)},d(i){i&&D(e)}}}function ct(n,e){let t,r,i=e[44].name+"",l,a,o,u,s=e[44].items.filter(mt).length+"",f,k,p=e[44].items.filter(ht).length+"",S,m,b,h,_,w=e[44].description&&ut(e);function j(){return e[23](e[44])}return{key:n,first:null,c(){t=g("button"),r=g("h4"),l=F(i),a=x(),w&&w.c(),o=x(),u=g("p"),f=F(s),k=F(` tasks, 
                  `),S=F(p),m=F(" sections"),b=x(),c(r,"class","font-medium text-gray-900 dark:text-white mb-1"),c(u,"class","text-xs text-gray-500 dark:text-gray-400"),c(t,"class","p-4 border border-gray-200 dark:border-gray-600 rounded-lg text-left hover:border-indigo-500 hover:bg-indigo-50 dark:hover:bg-indigo-900/20 transition-colors"),this.first=t},m(y,v){I(y,t,v),d(t,r),d(r,l),d(t,a),w&&w.m(t,null),d(t,o),d(t,u),d(u,f),d(u,k),d(u,S),d(u,m),d(t,b),h||(_=R(t,"click",j),h=!0)},p(y,v){e=y,v[0]&2&&i!==(i=e[44].name+"")&&te(l,i),e[44].description?w?w.p(e,v):(w=ut(e),w.c(),w.m(t,o)):w&&(w.d(1),w=null),v[0]&2&&s!==(s=e[44].items.filter(mt).length+"")&&te(f,s),v[0]&2&&p!==(p=e[44].items.filter(ht).length+"")&&te(S,p)},d(y){y&&D(t),w&&w.d(),h=!1,_()}}}function ft(n){let e,t,r,i=n[5].isSection?"Add Section":"Add Task",l,a,o,u,s,f,k,p,S,m,b,h,_,w,j,y,v,C,E,T,$,W,V,K,Z,N,A,H,B,G,oe=n[5].isSection?"Section":"Task",de,U,se,ue,X,O=!n[5].isSection&&gt(n);return se=Et(n[33][0]),{c(){e=g("div"),t=g("div"),r=g("h3"),l=F(i),a=x(),o=g("div"),u=g("div"),s=g("label"),f=g("input"),k=x(),p=g("span"),p.textContent="Task",S=x(),m=g("label"),b=g("input"),h=x(),_=g("span"),_.textContent="Section",w=x(),j=g("div"),y=g("label"),y.textContent="Name *",v=x(),C=g("input"),E=x(),T=g("div"),$=g("label"),$.textContent="Description",W=x(),V=g("input"),K=x(),O&&O.c(),Z=x(),N=g("div"),A=g("button"),A.textContent="Cancel",H=x(),B=g("button"),G=F("Add "),de=F(oe),c(r,"class","text-lg font-medium text-gray-900 dark:text-white mb-4"),c(f,"type","radio"),f.__value=!1,f.value=f.__value,c(f,"class","mr-2"),c(p,"class","text-sm text-gray-700 dark:text-gray-300"),c(s,"class","flex items-center"),c(b,"type","radio"),b.__value=!0,b.value=b.__value,c(b,"class","mr-2"),c(_,"class","text-sm text-gray-700 dark:text-gray-300"),c(m,"class","flex items-center"),c(u,"class","flex gap-4 mb-4"),c(y,"class","block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"),c(C,"type","text"),c(C,"class","w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 dark:bg-gray-700 dark:text-white"),c($,"class","block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"),c(V,"type","text"),c(V,"class","w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 dark:bg-gray-700 dark:text-white"),c(o,"class","space-y-4"),c(A,"class","flex-1 px-4 py-2 text-gray-700 dark:text-gray-300 border border-gray-300 dark:border-gray-600 rounded hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors"),B.disabled=U=!n[5].name.trim(),c(B,"class","flex-1 px-4 py-2 bg-indigo-600 text-white rounded hover:bg-indigo-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors"),c(N,"class","flex gap-2 mt-6"),c(t,"class","bg-white dark:bg-gray-800 rounded-lg shadow-xl max-w-md w-full p-6"),c(e,"class","fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center p-4 z-[70]"),se.p(f,b)},m(L,Y){I(L,e,Y),d(e,t),d(t,r),d(r,l),d(t,a),d(t,o),d(o,u),d(u,s),d(s,f),f.checked=f.__value===n[5].isSection,d(s,k),d(s,p),d(u,S),d(u,m),d(m,b),b.checked=b.__value===n[5].isSection,d(m,h),d(m,_),d(o,w),d(o,j),d(j,y),d(j,v),d(j,C),ae(C,n[5].name),d(o,E),d(o,T),d(T,$),d(T,W),d(T,V),ae(V,n[5].description),d(o,K),O&&O.m(o,null),d(t,Z),d(t,N),d(N,A),d(N,H),d(N,B),d(B,G),d(B,de),ue||(X=[R(f,"change",n[32]),R(b,"change",n[34]),R(C,"input",n[35]),R(V,"input",n[36]),R(A,"click",n[13]),R(B,"click",n[12])],ue=!0)},p(L,Y){Y[0]&32&&i!==(i=L[5].isSection?"Add Section":"Add Task")&&te(l,i),Y[0]&32&&(f.checked=f.__value===L[5].isSection),Y[0]&32&&(b.checked=b.__value===L[5].isSection),Y[0]&32&&C.value!==L[5].name&&ae(C,L[5].name),Y[0]&32&&V.value!==L[5].description&&ae(V,L[5].description),L[5].isSection?O&&(O.d(1),O=null):O?O.p(L,Y):(O=gt(L),O.c(),O.m(o,null)),Y[0]&32&&oe!==(oe=L[5].isSection?"Section":"Task")&&te(de,oe),Y[0]&32&&U!==(U=!L[5].name.trim())&&(B.disabled=U)},d(L){L&&D(e),O&&O.d(),se.r(),ue=!1,ie(X)}}}function gt(n){let e,t,r,i,l,a,o,u,s,f,k,p,S,m,b,h=n[5].resetTime.type==="weekly"&&pt(n);return{c(){e=g("div"),t=g("label"),t.textContent="Reset Schedule",r=x(),i=g("select"),l=g("option"),l.textContent="Daily",a=g("option"),a.textContent="Weekly",o=x(),u=g("div"),s=g("div"),f=g("label"),f.textContent="Time",k=x(),p=g("input"),S=x(),h&&h.c(),c(t,"class","block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"),l.__value="daily",l.value=l.__value,a.__value="weekly",a.value=a.__value,c(i,"class","w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 dark:bg-gray-700 dark:text-white"),n[5].resetTime.type===void 0&&Ie(()=>n[37].call(i)),c(f,"class","block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"),c(p,"type","time"),c(p,"class","w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 dark:bg-gray-700 dark:text-white"),c(s,"class","flex-1"),c(u,"class","flex gap-2")},m(_,w){I(_,e,w),d(e,t),d(e,r),d(e,i),d(i,l),d(i,a),$e(i,n[5].resetTime.type,!0),I(_,o,w),I(_,u,w),d(u,s),d(s,f),d(s,k),d(s,p),ae(p,n[5].resetTime.time),d(u,S),h&&h.m(u,null),m||(b=[R(i,"change",n[37]),R(p,"input",n[38])],m=!0)},p(_,w){w[0]&32&&$e(i,_[5].resetTime.type),w[0]&32&&ae(p,_[5].resetTime.time),_[5].resetTime.type==="weekly"?h?h.p(_,w):(h=pt(_),h.c(),h.m(u,null)):h&&(h.d(1),h=null)},d(_){_&&D(e),_&&D(o),_&&D(u),h&&h.d(),m=!1,ie(b)}}}function pt(n){let e,t,r,i,l,a,o,u,s,f,k,p,S;return{c(){e=g("div"),t=g("label"),t.textContent="Day",r=x(),i=g("select"),l=g("option"),l.textContent="Sunday",a=g("option"),a.textContent="Monday",o=g("option"),o.textContent="Tuesday",u=g("option"),u.textContent="Wednesday",s=g("option"),s.textContent="Thursday",f=g("option"),f.textContent="Friday",k=g("option"),k.textContent="Saturday",c(t,"class","block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"),l.__value=0,l.value=l.__value,a.__value=1,a.value=a.__value,o.__value=2,o.value=o.__value,u.__value=3,u.value=u.__value,s.__value=4,s.value=s.__value,f.__value=5,f.value=f.__value,k.__value=6,k.value=k.__value,c(i,"class","w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 dark:bg-gray-700 dark:text-white"),n[5].resetTime.weekday===void 0&&Ie(()=>n[39].call(i)),c(e,"class","flex-1")},m(m,b){I(m,e,b),d(e,t),d(e,r),d(e,i),d(i,l),d(i,a),d(i,o),d(i,u),d(i,s),d(i,f),d(i,k),$e(i,n[5].resetTime.weekday,!0),p||(S=R(i,"change",n[39]),p=!0)},p(m,b){b[0]&32&&$e(i,m[5].resetTime.weekday)},d(m){m&&D(e),p=!1,S()}}}function ln(n){let e,t,r,i,l,a,o,u,s,f,k,p;function S(_,w){return _[0]?tn:en}let m=S(n),b=m(n),h=n[6]&&n[5]&&ft(n);return{c(){e=g("div"),t=g("div"),r=g("div"),i=g("div"),l=g("h2"),l.textContent="Create New TODO",a=x(),o=g("button"),o.innerHTML='<svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg>',u=x(),b.c(),s=x(),h&&h.c(),f=je(),c(l,"class","text-2xl font-bold text-gray-900 dark:text-white"),c(o,"class","text-gray-400 hover:text-gray-600 dark:hover:text-gray-200"),c(i,"class","flex items-center justify-between mb-6"),c(r,"class","p-6"),c(t,"class","bg-white dark:bg-gray-800 rounded-xl shadow-xl max-w-2xl w-full max-h-[90vh] overflow-y-auto"),c(e,"class","fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50")},m(_,w){I(_,e,w),d(e,t),d(t,r),d(r,i),d(i,l),d(i,a),d(i,o),d(r,u),b.m(r,null),I(_,s,w),h&&h.m(_,w),I(_,f,w),k||(p=[R(o,"click",n[20]),R(e,"click",n[21])],k=!0)},p(_,w){m===(m=S(_))&&b?b.p(_,w):(b.d(1),b=m(_),b&&(b.c(),b.m(r,null))),_[6]&&_[5]?h?h.p(_,w):(h=ft(_),h.c(),h.m(f.parentNode,f)):h&&(h.d(1),h=null)},i:ee,o:ee,d(_){_&&D(e),b.d(),_&&D(s),h&&h.d(_),_&&D(f),k=!1,ie(p)}}}function Oe(){return Math.random().toString(36).substr(2,9)}const mt=n=>!n.isSection,ht=n=>n.isSection;function on(n,e,t){const r=Ht();let i=!0,l=[],a=null,o="",u="",s=[],f=null,k=!1,p=null;Ae(async()=>{await S()});async function S(){try{const M=["mmo-dailies","gacha-game"],P=await Promise.all(M.map(async z=>{const ye=await fetch(`/todo/presets/${z}.json`);return ye.ok?await ye.json():null}));t(1,l=P.filter(z=>z!==null))}catch(M){console.error("Failed to load presets:",M)}}function m(M){a=M,b()}function b(){if(!a)return;const M={id:Oe(),name:a.name,description:a.description,items:a.items.map(P=>({...P,id:Oe(),status:"pending",lastReset:0,parentId:null})),createdAt:Date.now(),isPreset:!0};re.addProject(M),V()}function h(){t(0,i=!1),a=null}function _(){if(!o.trim())return;const M={id:Oe(),name:o.trim(),description:u.trim()||void 0,items:s,createdAt:Date.now()};re.addProject(M),V()}function w(){t(6,k=!0),t(5,f={id:Oe(),name:"",description:"",status:"pending",resetTime:{type:"daily",time:"20:00"},lastReset:0,parentId:void 0,isSection:!1})}function j(){if(!(f!=null&&f.name.trim()))return;const M=s.findIndex(P=>P.id===f.id);M>=0?t(4,s[M]={...f},s):t(4,s=[...s,{...f}]),y()}function y(){t(5,f=null),t(6,k=!1)}function v(M){const P=s.find(z=>z.id===M);P!=null&&P.isSection?t(4,s=s.map(z=>z.parentId===M?{...z,parentId:void 0}:z).filter(z=>z.id!==M)):t(4,s=s.filter(z=>z.id!==M))}function C(M,P){t(7,p=P),M.dataTransfer.effectAllowed="move"}function E(M,P){M.preventDefault(),p&&p.id!==P.id&&(M.dataTransfer.dropEffect="move")}function T(M,P){M.preventDefault(),p&&p.id!==P.id&&(P.isSection&&!p.isSection?t(4,s=s.map(z=>z.id===p.id?{...z,parentId:P.id}:z)):!P.isSection&&!p.isSection&&P.parentId?t(4,s=s.map(z=>z.id===p.id?{...z,parentId:P.parentId}:z)):!P.parentId&&!P.isSection&&t(4,s=s.map(z=>z.id===p.id?{...z,parentId:void 0}:z))),t(7,p=null)}function $(){t(7,p=null)}function W(){const M=s.filter(ye=>!ye.parentId),P=[];function z(ye,Re){ye.forEach(Pe=>{if(P.push({...Pe,level:Re}),Pe.isSection){const ze=s.filter(It=>It.parentId===Pe.id);ze.length>0&&z(ze,Re+1)}})}return z(M,0),P}function V(){r("close")}function K(M){M.target===M.currentTarget&&V()}const Z=[[]],N=(M,P)=>P.parentId===M.id,A=M=>m(M),H=()=>t(0,i=!0);function B(){o=this.value,t(2,o)}function G(){u=this.value,t(3,u)}const oe=(M,P)=>P.parentId===M.id,de=M=>v(M.id),U=(M,P)=>C(P,M),se=(M,P)=>E(P,M),ue=(M,P)=>T(P,M);function X(){f.isSection=this.__value,t(5,f)}function O(){f.isSection=this.__value,t(5,f)}function L(){f.name=this.value,t(5,f)}function Y(){f.description=this.value,t(5,f)}function Ct(){f.resetTime.type=Fe(this),t(5,f)}function Tt(){f.resetTime.time=this.value,t(5,f)}function Dt(){f.resetTime.weekday=Fe(this),t(5,f)}return[i,l,o,u,s,f,k,p,m,h,_,w,j,y,v,C,E,T,$,W,V,K,N,A,H,B,G,oe,de,U,se,ue,X,Z,O,L,Y,Ct,Tt,Dt]}class sn extends ke{constructor(e){super(),be(this,e,on,ln,ge,{},null,[-1,-1])}}function an(n){let e,t;return{c(){e=ne("svg"),t=ne("path"),c(t,"stroke-linecap","round"),c(t,"stroke-linejoin","round"),c(t,"stroke-width","2"),c(t,"d","M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z"),c(e,"class","w-5 h-5"),c(e,"fill","none"),c(e,"stroke","currentColor"),c(e,"viewBox","0 0 24 24")},m(r,i){I(r,e,i),d(e,t)},d(r){r&&D(e)}}}function dn(n){let e,t;return{c(){e=ne("svg"),t=ne("path"),c(t,"stroke-linecap","round"),c(t,"stroke-linejoin","round"),c(t,"stroke-width","2"),c(t,"d","M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z"),c(e,"class","w-5 h-5"),c(e,"fill","none"),c(e,"stroke","currentColor"),c(e,"viewBox","0 0 24 24")},m(r,i){I(r,e,i),d(e,t)},d(r){r&&D(e)}}}function un(n){let e,t,r,i,l,a,o,u;function s(p,S){return p[0]==="light"?dn:an}let f=s(n),k=f(n);return{c(){e=g("header"),t=g("div"),r=g("div"),i=g("div"),i.innerHTML=`<svg class="w-8 h-8 text-indigo-600 dark:text-indigo-400 mr-3" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg> 
        <span class="text-xl font-semibold text-gray-900 dark:text-white">Game TODO</span>`,l=x(),a=g("button"),k.c(),c(i,"class","flex items-center"),c(a,"class","p-2 rounded-lg text-gray-600 dark:text-gray-300 hover:text-gray-900 dark:hover:text-white hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors"),c(a,"title","Toggle theme"),c(r,"class","flex justify-between items-center py-4"),c(t,"class","max-w-7xl mx-auto px-4 sm:px-6 lg:px-8"),c(e,"class","bg-white dark:bg-gray-800 shadow-sm border-b border-gray-200 dark:border-gray-700")},m(p,S){I(p,e,S),d(e,t),d(t,r),d(r,i),d(r,l),d(r,a),k.m(a,null),o||(u=R(a,"click",n[1]),o=!0)},p(p,[S]){f!==(f=s(p))&&(k.d(1),k=f(p),k&&(k.c(),k.m(a,null)))},i:ee,o:ee,d(p){p&&D(e),k.d(),o=!1,u()}}}function cn(n,e,t){let r="light";re.subscribe(l=>{t(0,r=l.settings.theme),typeof document<"u"&&document.documentElement.classList.toggle("dark",r==="dark")});function i(){const l=r==="light"?"dark":"light";re.updateSettings({theme:l})}return[r,i]}class fn extends ke{constructor(e){super(),be(this,e,cn,un,ge,{})}}function _t(n,e,t){const r=n.slice();return r[4]=e[t],r}function gn(n){let e,t=[],r=new Map,i,l=n[1];const a=o=>o[4].id;for(let o=0;o<l.length;o+=1){let u=_t(n,l,o),s=a(u);r.set(s,t[o]=bt(s,u))}return{c(){e=g("div");for(let o=0;o<t.length;o+=1)t[o].c();c(e,"class","grid gap-6 md:grid-cols-2 lg:grid-cols-3")},m(o,u){I(o,e,u);for(let s=0;s<t.length;s+=1)t[s]&&t[s].m(e,null);i=!0},p(o,u){u&2&&(l=o[1],me(),t=Me(t,u,a,1,o,l,r,e,Be,bt,null,_t),he())},i(o){if(!i){for(let u=0;u<l.length;u+=1)q(t[u]);i=!0}},o(o){for(let u=0;u<t.length;u+=1)Q(t[u]);i=!1},d(o){o&&D(e);for(let u=0;u<t.length;u+=1)t[u].d()}}}function pn(n){let e,t,r,i,l,a,o,u,s,f,k;return{c(){e=g("div"),t=ne("svg"),r=ne("path"),i=x(),l=g("h2"),l.textContent="No TODOs yet",a=x(),o=g("p"),o.textContent="Create your first TODO to start tracking game activities",u=x(),s=g("button"),s.innerHTML=`<svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6v6m0 0v6m0-6h6m-6 0H6"></path></svg>
        Create Your First TODO`,c(r,"stroke-linecap","round"),c(r,"stroke-linejoin","round"),c(r,"stroke-width","1"),c(r,"d","M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"),c(t,"class","w-24 h-24 mx-auto text-gray-300 dark:text-gray-600 mb-4"),c(t,"fill","none"),c(t,"stroke","currentColor"),c(t,"viewBox","0 0 24 24"),c(l,"class","text-xl font-semibold text-gray-900 dark:text-white mb-2"),c(o,"class","text-gray-600 dark:text-gray-300 mb-6"),c(s,"class","inline-flex items-center px-6 py-3 border border-transparent rounded-lg shadow-sm text-base font-medium text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 dark:focus:ring-offset-gray-900 transition-colors"),c(e,"class","text-center py-12")},m(p,S){I(p,e,S),d(e,t),d(t,r),d(e,i),d(e,l),d(e,a),d(e,o),d(e,u),d(e,s),f||(k=R(s,"click",n[2]),f=!0)},p:ee,i:ee,o:ee,d(p){p&&D(e),f=!1,k()}}}function bt(n,e){let t,r,i;return r=new Zt({props:{project:e[4]}}),{key:n,first:null,c(){t=je(),_e(r.$$.fragment),this.first=t},m(l,a){I(l,t,a),ce(r,l,a),i=!0},p(l,a){e=l;const o={};a&2&&(o.project=e[4]),r.$set(o)},i(l){i||(q(r.$$.fragment,l),i=!0)},o(l){Q(r.$$.fragment,l),i=!1},d(l){l&&D(t),fe(r,l)}}}function kt(n){let e,t;return e=new sn({}),e.$on("close",n[3]),{c(){_e(e.$$.fragment)},m(r,i){ce(e,r,i),t=!0},p:ee,i(r){t||(q(e.$$.fragment,r),t=!0)},o(r){Q(e.$$.fragment,r),t=!1},d(r){fe(e,r)}}}function mn(n){let e,t,r,i,l,a,o,u,s,f,k,p,S,m,b;e=new fn({});const h=[pn,gn],_=[];function w(y,v){return y[1].length===0?0:1}s=w(n),f=_[s]=h[s](n);let j=n[0]&&kt(n);return{c(){_e(e.$$.fragment),t=x(),r=g("main"),i=g("div"),l=g("div"),l.innerHTML=`<h1 class="text-3xl font-bold text-gray-900 dark:text-white">Game TODO Tracker</h1> 
      <p class="mt-2 text-gray-600 dark:text-gray-300">Track your daily and weekly game activities</p>`,a=x(),o=g("button"),o.innerHTML=`<svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6v6m0 0v6m0-6h6m-6 0H6"></path></svg>
      Add TODO`,u=x(),f.c(),k=x(),j&&j.c(),p=je(),c(o,"class","inline-flex items-center px-4 py-2 border border-transparent rounded-lg shadow-sm text-sm font-medium text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 dark:focus:ring-offset-gray-900 transition-colors"),c(i,"class","flex justify-between items-center mb-8"),c(r,"class","max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8")},m(y,v){ce(e,y,v),I(y,t,v),I(y,r,v),d(r,i),d(i,l),d(i,a),d(i,o),d(r,u),_[s].m(r,null),I(y,k,v),j&&j.m(y,v),I(y,p,v),S=!0,m||(b=R(o,"click",n[2]),m=!0)},p(y,[v]){let C=s;s=w(y),s===C?_[s].p(y,v):(me(),Q(_[C],1,1,()=>{_[C]=null}),he(),f=_[s],f?f.p(y,v):(f=_[s]=h[s](y),f.c()),q(f,1),f.m(r,null)),y[0]?j?(j.p(y,v),v&1&&q(j,1)):(j=kt(y),j.c(),q(j,1),j.m(p.parentNode,p)):j&&(me(),Q(j,1,1,()=>{j=null}),he())},i(y){S||(q(e.$$.fragment,y),q(f),q(j),S=!0)},o(y){Q(e.$$.fragment,y),Q(f),Q(j),S=!1},d(y){fe(e,y),y&&D(t),y&&D(r),_[s].d(),y&&D(k),j&&j.d(y),y&&D(p),m=!1,b()}}}function hn(n,e,t){let r=!1,i=[];re.subscribe(o=>{t(1,i=o.projects)});function l(){t(0,r=!0)}function a(){t(0,r=!1)}return[r,i,l,a]}class _n extends ke{constructor(e){super(),be(this,e,hn,mn,ge,{})}}function bn(n){let e,t,r,i,l;return e=new Jt({}),i=new _n({}),{c(){_e(e.$$.fragment),t=x(),r=g("div"),_e(i.$$.fragment),c(r,"class","min-h-screen bg-gray-50 dark:bg-gray-900 transition-colors")},m(a,o){ce(e,a,o),I(a,t,o),I(a,r,o),ce(i,r,null),l=!0},p:ee,i(a){l||(q(e.$$.fragment,a),q(i.$$.fragment,a),l=!0)},o(a){Q(e.$$.fragment,a),Q(i.$$.fragment,a),l=!1},d(a){fe(e,a),a&&D(t),a&&D(r),fe(i)}}}function kn(n){return Ae(()=>{re.init();const e=setInterval(()=>{re.checkResets()},6e4);return()=>clearInterval(e)}),[]}class yn extends ke{constructor(e){super(),be(this,e,kn,bn,ge,{})}}new yn({target:document.getElementById("app")});
