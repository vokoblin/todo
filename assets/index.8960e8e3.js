(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const l of i)if(l.type==="childList")for(const a of l.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function n(i){const l={};return i.integrity&&(l.integrity=i.integrity),i.referrerpolicy&&(l.referrerPolicy=i.referrerpolicy),i.crossorigin==="use-credentials"?l.credentials="include":i.crossorigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function r(i){if(i.ep)return;i.ep=!0;const l=n(i);fetch(i.href,l)}})();function U(){}function ct(t){return t()}function Ne(){return Object.create(null)}function ne(t){t.forEach(ct)}function ft(t){return typeof t=="function"}function ae(t,e){return t!=t?e==e:t!==e||t&&typeof t=="object"||typeof t=="function"}function _t(t){return Object.keys(t).length===0}function bt(t,...e){if(t==null)return U;const n=t.subscribe(...e);return n.unsubscribe?()=>n.unsubscribe():n}function mt(t,e,n){t.$$.on_destroy.push(bt(e,n))}function u(t,e){t.appendChild(e)}function M(t,e,n){t.insertBefore(e,n||null)}function D(t){t.parentNode&&t.parentNode.removeChild(t)}function m(t){return document.createElement(t)}function Z(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}function A(t){return document.createTextNode(t)}function j(){return A(" ")}function ye(){return A("")}function H(t,e,n,r){return t.addEventListener(e,n,r),()=>t.removeEventListener(e,n,r)}function c(t,e,n){n==null?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function kt(t){let e;return{p(...n){e=n,e.forEach(r=>t.push(r))},r(){e.forEach(n=>t.splice(t.indexOf(n),1))}}}function yt(t){return Array.from(t.childNodes)}function W(t,e){e=""+e,t.data!==e&&(t.data=e)}function ie(t,e){t.value=e==null?"":e}function Te(t,e,n,r){n==null?t.style.removeProperty(e):t.style.setProperty(e,n,r?"important":"")}function De(t,e,n){for(let r=0;r<t.options.length;r+=1){const i=t.options[r];if(i.__value===e){i.selected=!0;return}}(!n||e!==void 0)&&(t.selectedIndex=-1)}function He(t){const e=t.querySelector(":checked");return e&&e.__value}function O(t,e,n){t.classList[n?"add":"remove"](e)}function vt(t,e,{bubbles:n=!1,cancelable:r=!1}={}){const i=document.createEvent("CustomEvent");return i.initCustomEvent(t,n,r,e),i}let we;function ve(t){we=t}function Ie(){if(!we)throw new Error("Function called outside component initialization");return we}function Oe(t){Ie().$$.on_mount.push(t)}function wt(t){Ie().$$.on_destroy.push(t)}function xt(){const t=Ie();return(e,n,{cancelable:r=!1}={})=>{const i=t.$$.callbacks[e];if(i){const l=vt(e,n,{cancelable:r});return i.slice().forEach(a=>{a.call(t,l)}),!l.defaultPrevented}return!0}}const be=[],Le=[];let ke=[];const Ae=[],St=Promise.resolve();let $e=!1;function jt(){$e||($e=!0,St.then(gt))}function xe(t){ke.push(t)}const Me=new Set;let he=0;function gt(){if(he!==0)return;const t=we;do{try{for(;he<be.length;){const e=be[he];he++,ve(e),Ct(e.$$)}}catch(e){throw be.length=0,he=0,e}for(ve(null),be.length=0,he=0;Le.length;)Le.pop()();for(let e=0;e<ke.length;e+=1){const n=ke[e];Me.has(n)||(Me.add(n),n())}ke.length=0}while(be.length);for(;Ae.length;)Ae.pop()();$e=!1,Me.clear(),ve(t)}function Ct(t){if(t.fragment!==null){t.update(),ne(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(xe)}}function Tt(t){const e=[],n=[];ke.forEach(r=>t.indexOf(r)===-1?e.push(r):n.push(r)),n.forEach(r=>r()),ke=e}const Ce=new Set;let de;function ue(){de={r:0,c:[],p:de}}function ce(){de.r||ne(de.c),de=de.p}function J(t,e){t&&t.i&&(Ce.delete(t),t.i(e))}function V(t,e,n,r){if(t&&t.o){if(Ce.has(t))return;Ce.add(t),de.c.push(()=>{Ce.delete(t),r&&(n&&t.d(1),r())}),t.o(e)}else r&&r()}function pt(t,e){t.d(1),e.delete(t.key)}function Pe(t,e){V(t,1,1,()=>{e.delete(t.key)})}function Se(t,e,n,r,i,l,a,o,d,s,f,b){let h=t.length,x=l.length,g=h;const k={};for(;g--;)k[t[g].key]=g;const p=[],_=new Map,w=new Map,S=[];for(g=x;g--;){const $=b(i,l,g),L=n($);let B=a.get(L);B?r&&S.push(()=>B.p($,e)):(B=s(L,$),B.c()),_.set(L,p[g]=B),L in k&&w.set(L,Math.abs(g-k[L]))}const y=new Set,v=new Set;function C($){J($,1),$.m(o,f),a.set($.key,$),f=$.first,x--}for(;h&&x;){const $=p[x-1],L=t[h-1],B=$.key,R=L.key;$===L?(f=$.first,h--,x--):_.has(R)?!a.has(B)||y.has(B)?C($):v.has(R)?h--:w.get(B)>w.get(R)?(v.add(B),C($)):(y.add(R),h--):(d(L,a),h--)}for(;h--;){const $=t[h];_.has($.key)||d($,a)}for(;x;)C(p[x-1]);return ne(S),p}function fe(t){t&&t.c()}function oe(t,e,n,r){const{fragment:i,after_update:l}=t.$$;i&&i.m(e,n),r||xe(()=>{const a=t.$$.on_mount.map(ct).filter(ft);t.$$.on_destroy?t.$$.on_destroy.push(...a):ne(a),t.$$.on_mount=[]}),l.forEach(xe)}function se(t,e){const n=t.$$;n.fragment!==null&&(Tt(n.after_update),ne(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function Dt(t,e){t.$$.dirty[0]===-1&&(be.push(t),jt(),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function me(t,e,n,r,i,l,a,o=[-1]){const d=we;ve(t);const s=t.$$={fragment:null,ctx:[],props:l,update:U,not_equal:i,bound:Ne(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(d?d.$$.context:[])),callbacks:Ne(),dirty:o,skip_bound:!1,root:e.target||d.$$.root};a&&a(s.root);let f=!1;if(s.ctx=n?n(t,e.props||{},(b,h,...x)=>{const g=x.length?x[0]:h;return s.ctx&&i(s.ctx[b],s.ctx[b]=g)&&(!s.skip_bound&&s.bound[b]&&s.bound[b](g),f&&Dt(t,b)),h}):[],s.update(),f=!0,ne(s.before_update),s.fragment=r?r(s.ctx):!1,e.target){if(e.hydrate){const b=yt(e.target);s.fragment&&s.fragment.l(b),b.forEach(D)}else s.fragment&&s.fragment.c();e.intro&&J(t.$$.fragment),oe(t,e.target,e.anchor,e.customElement),gt()}ve(d)}class ge{$destroy(){se(this,1),this.$destroy=U}$on(e,n){if(!ft(n))return U;const r=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return r.push(n),()=>{const i=r.indexOf(n);i!==-1&&r.splice(i,1)}}$set(e){this.$$set&&!_t(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}class Mt extends ge{constructor(e){super(),me(this,e,null,null,ae,{})}}const _e=[];function $t(t,e=U){let n;const r=new Set;function i(o){if(ae(t,o)&&(t=o,n)){const d=!_e.length;for(const s of r)s[1](),_e.push(s,t);if(d){for(let s=0;s<_e.length;s+=2)_e[s][0](_e[s+1]);_e.length=0}}}function l(o){i(o(t))}function a(o,d=U){const s=[o,d];return r.add(s),r.size===1&&(n=e(i)||U),o(t),()=>{r.delete(s),r.size===0&&n&&(n(),n=null)}}return{set:i,update:l,subscribe:a}}const te="game-todo-data",It={projects:[],settings:{theme:"light"},uiState:{expandedProjects:{},expandedSections:{}}};function Ot(){const{subscribe:t,set:e,update:n}=$t(It);return{subscribe:t,init:()=>{if(typeof window<"u"){const r=localStorage.getItem(te);if(r)try{const i=JSON.parse(r);i.uiState||(i.uiState={expandedProjects:{},expandedSections:{}}),e(i)}catch(i){console.error("Failed to parse stored todo data:",i)}}},save:r=>{typeof window<"u"&&localStorage.setItem(te,JSON.stringify(r)),e(r)},addProject:r=>{n(i=>{const l={...i,projects:[...i.projects,r]};return typeof window<"u"&&localStorage.setItem(te,JSON.stringify(l)),l})},updateProject:(r,i)=>{n(l=>{const a={...l,projects:l.projects.map(o=>o.id===r?{...o,...i}:o)};return typeof window<"u"&&localStorage.setItem(te,JSON.stringify(a)),a})},deleteProject:r=>{n(i=>{const l={...i,projects:i.projects.filter(a=>a.id!==r)};return typeof window<"u"&&localStorage.setItem(te,JSON.stringify(l)),l})},updateTodoStatus:(r,i,l)=>{n(a=>{const o={...a,projects:a.projects.map(d=>d.id===r?{...d,items:d.items.map(s=>s.id===i?{...s,status:l}:s)}:d)};return typeof window<"u"&&localStorage.setItem(te,JSON.stringify(o)),o})},addTodoItem:(r,i)=>{n(l=>{const a={...l,projects:l.projects.map(o=>o.id===r?{...o,items:[...o.items,i]}:o)};return typeof window<"u"&&localStorage.setItem(te,JSON.stringify(a)),a})},updateSettings:r=>{n(i=>{const l={...i,settings:{...i.settings,...r}};return typeof window<"u"&&localStorage.setItem(te,JSON.stringify(l)),l})},checkResets:()=>{n(r=>{const i=Date.now();let l=!1;const a={...r,projects:r.projects.map(o=>({...o,items:o.items.map(d=>Pt(d.resetTime,d.lastReset,i)?(l=!0,{...d,status:"pending",lastReset:i}):d)}))};return l&&typeof window<"u"&&localStorage.setItem(te,JSON.stringify(a)),a})},toggleProjectExpanded:r=>{n(i=>{const l={...i,uiState:{...i.uiState,expandedProjects:{...i.uiState.expandedProjects,[r]:!i.uiState.expandedProjects[r]}}};return typeof window<"u"&&localStorage.setItem(te,JSON.stringify(l)),l})},toggleSectionExpanded:r=>{n(i=>{const l={...i,uiState:{...i.uiState,expandedSections:{...i.uiState.expandedSections,[r]:!i.uiState.expandedSections[r]}}};return typeof window<"u"&&localStorage.setItem(te,JSON.stringify(l)),l})}}}function Pt(t,e,n){const r=new Date(n);if(t.type==="daily"){const[i,l]=t.time.split(":").map(Number),a=new Date(r);return a.setHours(i,l,0,0),r<a&&a.setDate(a.getDate()-1),e<a.getTime()}else if(t.type==="weekly"){const[i,l]=t.time.split(":").map(Number),a=t.weekday||0,o=new Date(r),d=o.getDay()-a;return o.setDate(o.getDate()-(d>=0?d:d+7)),o.setHours(i,l,0,0),r<o&&o.setDate(o.getDate()-7),e<o.getTime()}return!1}const ee=Ot();function Be(t,e,n){const r=t.slice();return r[11]=e[n],r}function Et(t){let e,n,r,i,l,a=t[0].name+"",o,d,s,f,b=We(t[0].resetTime)+"",h,x,g,k,p,_,w,S=t[0].status==="completed"&&Re(),y=t[0].description&&Je(t);return{c(){e=m("button"),S&&S.c(),n=j(),r=m("div"),i=m("div"),l=m("h4"),o=A(a),d=j(),s=m("div"),f=m("div"),h=A(b),x=j(),g=m("div"),k=A(t[4]),p=j(),y&&y.c(),c(e,"class","flex-shrink-0 w-5 h-5 rounded border-2 border-gray-300 dark:border-gray-600 flex items-center justify-center transition-all duration-200"),O(e,"bg-indigo-600",t[0].status==="completed"),O(e,"border-indigo-600",t[0].status==="completed"),O(e,"dark:border-indigo-500",t[0].status==="completed"),O(e,"dark:bg-indigo-500",t[0].status==="completed"),c(l,"class","font-medium transition-colors"),O(l,"text-gray-900",t[0].status==="pending"),O(l,"dark:text-white",t[0].status==="pending"),O(l,"text-gray-500",t[0].status==="completed"),O(l,"dark:text-gray-400",t[0].status==="completed"),O(l,"line-through",t[0].status==="completed"),c(f,"class","text-xs text-gray-500 dark:text-gray-400"),c(g,"class","text-xs text-indigo-600 dark:text-indigo-400 font-medium"),c(s,"class","text-right ml-2"),c(i,"class","flex items-start justify-between"),c(r,"class","flex-1")},m(v,C){M(v,e,C),S&&S.m(e,null),M(v,n,C),M(v,r,C),u(r,i),u(i,l),u(l,o),u(i,d),u(i,s),u(s,f),u(f,h),u(s,x),u(s,g),u(g,k),u(r,p),y&&y.m(r,null),_||(w=H(e,"click",t[8]),_=!0)},p(v,C){v[0].status==="completed"?S||(S=Re(),S.c(),S.m(e,null)):S&&(S.d(1),S=null),C&1&&O(e,"bg-indigo-600",v[0].status==="completed"),C&1&&O(e,"border-indigo-600",v[0].status==="completed"),C&1&&O(e,"dark:border-indigo-500",v[0].status==="completed"),C&1&&O(e,"dark:bg-indigo-500",v[0].status==="completed"),C&1&&a!==(a=v[0].name+"")&&W(o,a),C&1&&O(l,"text-gray-900",v[0].status==="pending"),C&1&&O(l,"dark:text-white",v[0].status==="pending"),C&1&&O(l,"text-gray-500",v[0].status==="completed"),C&1&&O(l,"dark:text-gray-400",v[0].status==="completed"),C&1&&O(l,"line-through",v[0].status==="completed"),C&1&&b!==(b=We(v[0].resetTime)+"")&&W(h,b),C&16&&W(k,v[4]),v[0].description?y?y.p(v,C):(y=Je(v),y.c(),y.m(r,null)):y&&(y.d(1),y=null)},d(v){v&&D(e),S&&S.d(),v&&D(n),v&&D(r),y&&y.d(),_=!1,w()}}}function Nt(t){let e,n,r,i,l,a,o,d,s,f,b=t[0].name+"",h,x,g,k,p=t[0].description&&ze(t);return{c(){e=m("button"),n=Z("svg"),r=Z("path"),l=j(),a=Z("svg"),o=Z("path"),d=j(),s=m("div"),f=m("h4"),h=A(b),x=j(),p&&p.c(),c(r,"stroke-linecap","round"),c(r,"stroke-linejoin","round"),c(r,"stroke-width","2"),c(r,"d","M9 5l7 7-7 7"),c(n,"class",i="w-4 h-4 text-gray-500 dark:text-gray-400 transform transition-transform "+(t[6]?"rotate-90":"")),c(n,"fill","none"),c(n,"stroke","currentColor"),c(n,"viewBox","0 0 24 24"),c(o,"stroke-linecap","round"),c(o,"stroke-linejoin","round"),c(o,"stroke-width","2"),c(o,"d","M3 7v10a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2H5a2 2 0 00-2-2z"),c(a,"class","w-5 h-5 text-indigo-600 dark:text-indigo-400"),c(a,"fill","none"),c(a,"stroke","currentColor"),c(a,"viewBox","0 0 24 24"),c(f,"class","font-medium text-gray-900 dark:text-white"),c(s,"class","flex-1"),c(e,"class","flex items-center gap-2 flex-1 text-left hover:bg-gray-200 dark:hover:bg-gray-600 rounded p-1 -m-1 transition-colors")},m(_,w){M(_,e,w),u(e,n),u(n,r),u(e,l),u(e,a),u(a,o),u(e,d),u(e,s),u(s,f),u(f,h),u(s,x),p&&p.m(s,null),g||(k=H(e,"click",t[7]),g=!0)},p(_,w){w&64&&i!==(i="w-4 h-4 text-gray-500 dark:text-gray-400 transform transition-transform "+(_[6]?"rotate-90":""))&&c(n,"class",i),w&1&&b!==(b=_[0].name+"")&&W(h,b),_[0].description?p?p.p(_,w):(p=ze(_),p.c(),p.m(s,null)):p&&(p.d(1),p=null)},d(_){_&&D(e),p&&p.d(),g=!1,k()}}}function Re(t){let e,n;return{c(){e=Z("svg"),n=Z("path"),c(n,"stroke-linecap","round"),c(n,"stroke-linejoin","round"),c(n,"stroke-width","3"),c(n,"d","M5 13l4 4L19 7"),c(e,"class","w-3 h-3 text-white"),c(e,"fill","none"),c(e,"stroke","currentColor"),c(e,"viewBox","0 0 24 24")},m(r,i){M(r,e,i),u(e,n)},d(r){r&&D(e)}}}function Je(t){let e,n=t[0].description+"",r;return{c(){e=m("p"),r=A(n),c(e,"class","text-sm mt-1 transition-colors"),O(e,"text-gray-600",t[0].status==="pending"),O(e,"dark:text-gray-300",t[0].status==="pending"),O(e,"text-gray-400",t[0].status==="completed"),O(e,"dark:text-gray-500",t[0].status==="completed")},m(i,l){M(i,e,l),u(e,r)},p(i,l){l&1&&n!==(n=i[0].description+"")&&W(r,n),l&1&&O(e,"text-gray-600",i[0].status==="pending"),l&1&&O(e,"dark:text-gray-300",i[0].status==="pending"),l&1&&O(e,"text-gray-400",i[0].status==="completed"),l&1&&O(e,"dark:text-gray-500",i[0].status==="completed")},d(i){i&&D(e)}}}function ze(t){let e,n=t[0].description+"",r;return{c(){e=m("p"),r=A(n),c(e,"class","text-sm text-gray-600 dark:text-gray-300 mt-1")},m(i,l){M(i,e,l),u(e,r)},p(i,l){l&1&&n!==(n=i[0].description+"")&&W(r,n)},d(i){i&&D(e)}}}function Fe(t){let e=[],n=new Map,r,i,l=t[5];const a=o=>o[11].id;for(let o=0;o<l.length;o+=1){let d=Be(t,l,o),s=a(d);n.set(s,e[o]=Ve(s,d))}return{c(){for(let o=0;o<e.length;o+=1)e[o].c();r=ye()},m(o,d){for(let s=0;s<e.length;s+=1)e[s]&&e[s].m(o,d);M(o,r,d),i=!0},p(o,d){d&46&&(l=o[5],ue(),e=Se(e,d,a,1,o,l,n,r.parentNode,Pe,Ve,r,Be),ce())},i(o){if(!i){for(let d=0;d<l.length;d+=1)J(e[d]);i=!0}},o(o){for(let d=0;d<e.length;d+=1)V(e[d]);i=!1},d(o){for(let d=0;d<e.length;d+=1)e[d].d(o);o&&D(r)}}}function Ve(t,e){let n,r,i;return r=new ht({props:{item:e[11],projectId:e[1],allItems:e[2],depth:e[3]+1}}),{key:t,first:null,c(){n=ye(),fe(r.$$.fragment),this.first=n},m(l,a){M(l,n,a),oe(r,l,a),i=!0},p(l,a){e=l;const o={};a&32&&(o.item=e[11]),a&2&&(o.projectId=e[1]),a&4&&(o.allItems=e[2]),a&8&&(o.depth=e[3]+1),r.$set(o)},i(l){i||(J(r.$$.fragment,l),i=!0)},o(l){V(r.$$.fragment,l),i=!1},d(l){l&&D(n),se(r,l)}}}function Ht(t){let e,n,r,i;function l(s,f){return s[0].isSection?Nt:Et}let a=l(t),o=a(t),d=(!t[0].isSection||t[6])&&Fe(t);return{c(){e=m("div"),n=m("div"),o.c(),r=j(),d&&d.c(),c(n,"class","flex items-center gap-3 p-3 rounded-lg border border-gray-200 dark:border-gray-600 bg-gray-50 dark:bg-gray-700/50 hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors"),O(n,"opacity-60",t[0].status==="completed"&&!t[0].isSection),c(e,"class","space-y-1"),Te(e,"margin-left",t[3]*1.5+"rem")},m(s,f){M(s,e,f),u(e,n),o.m(n,null),u(e,r),d&&d.m(e,null),i=!0},p(s,[f]){a===(a=l(s))&&o?o.p(s,f):(o.d(1),o=a(s),o&&(o.c(),o.m(n,null))),(!i||f&1)&&O(n,"opacity-60",s[0].status==="completed"&&!s[0].isSection),!s[0].isSection||s[6]?d?(d.p(s,f),f&65&&J(d,1)):(d=Fe(s),d.c(),J(d,1),d.m(e,null)):d&&(ue(),V(d,1,1,()=>{d=null}),ce()),(!i||f&8)&&Te(e,"margin-left",s[3]*1.5+"rem")},i(s){i||(J(d),i=!0)},o(s){V(d),i=!1},d(s){s&&D(e),o.d(),d&&d.d()}}}function We(t){return t.type==="daily"?`Daily at ${t.time}`:`Weekly ${["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"][t.weekday||0]} at ${t.time}`}function qe(t){const e=new Date;let n;if(t.type==="daily"){const[a,o]=t.time.split(":").map(Number);n=new Date(e),n.setHours(a,o,0,0),e>=n&&n.setDate(n.getDate()+1)}else{const[a,o]=t.time.split(":").map(Number),d=t.weekday||0;n=new Date(e);const s=e.getDay(),f=(d-s+7)%7;n.setDate(n.getDate()+f),n.setHours(a,o,0,0),f===0&&e>=n&&n.setDate(n.getDate()+7)}const r=n.getTime()-e.getTime();if(r<=0)return"Reset now";const i=Math.floor(r/(1e3*60*60)),l=Math.floor(r%(1e3*60*60)/(1e3*60));if(i>24){const a=Math.floor(i/24),o=i%24;return`${a}d ${o}h remaining`}else return i>0?`${i}h ${l}m remaining`:`${l}m remaining`}function Lt(t,e,n){let r,i,l;mt(t,ee,g=>n(9,l=g));let{item:a}=e,{projectId:o}=e,{allItems:d}=e,{depth:s=0}=e,f="",b;Oe(()=>{a.isSection||(n(4,f=qe(a.resetTime)),b=setInterval(()=>{n(4,f=qe(a.resetTime))},6e4))}),wt(()=>{b&&clearInterval(b)});function h(){a.isSection&&ee.toggleSectionExpanded(a.id)}function x(){if(!a.isSection){const g=a.status==="completed"?"pending":"completed";ee.updateTodoStatus(o,a.id,g)}}return t.$$set=g=>{"item"in g&&n(0,a=g.item),"projectId"in g&&n(1,o=g.projectId),"allItems"in g&&n(2,d=g.allItems),"depth"in g&&n(3,s=g.depth)},t.$$.update=()=>{var g,k,p;t.$$.dirty&513&&n(6,r=a.isSection&&(p=(k=(g=l.uiState)==null?void 0:g.expandedSections)==null?void 0:k[a.id])!=null?p:!0),t.$$.dirty&5&&n(5,i=d.filter(_=>_.parentId===a.id))},[a,o,d,s,f,i,r,h,x,l]}class ht extends ge{constructor(e){super(),me(this,e,Lt,Ht,ae,{item:0,projectId:1,allItems:2,depth:3})}}function Ge(t,e,n){const r=t.slice();return r[9]=e[n],r}function Ke(t){let e,n=t[0].description+"",r;return{c(){e=m("p"),r=A(n),c(e,"class","text-sm text-gray-600 dark:text-gray-300 mb-3")},m(i,l){M(i,e,l),u(e,r)},p(i,l){l&1&&n!==(n=i[0].description+"")&&W(r,n)},d(i){i&&D(e)}}}function Ue(t){let e,n=[],r=new Map,i,l=t[3];const a=o=>o[9].id;for(let o=0;o<l.length;o+=1){let d=Ge(t,l,o),s=a(d);r.set(s,n[o]=Ye(s,d))}return{c(){e=m("div");for(let o=0;o<n.length;o+=1)n[o].c();c(e,"class","border-t border-gray-200 dark:border-gray-700 pt-4 space-y-2")},m(o,d){M(o,e,d);for(let s=0;s<n.length;s+=1)n[s]&&n[s].m(e,null);i=!0},p(o,d){d&9&&(l=o[3],ue(),n=Se(n,d,a,1,o,l,r,e,Pe,Ye,null,Ge),ce())},i(o){if(!i){for(let d=0;d<l.length;d+=1)J(n[d]);i=!0}},o(o){for(let d=0;d<n.length;d+=1)V(n[d]);i=!1},d(o){o&&D(e);for(let d=0;d<n.length;d+=1)n[d].d()}}}function Ye(t,e){let n,r,i;return r=new ht({props:{item:e[9],projectId:e[0].id,allItems:e[0].items,depth:0}}),{key:t,first:null,c(){n=ye(),fe(r.$$.fragment),this.first=n},m(l,a){M(l,n,a),oe(r,l,a),i=!0},p(l,a){e=l;const o={};a&8&&(o.item=e[9]),a&1&&(o.projectId=e[0].id),a&1&&(o.allItems=e[0].items),r.$set(o)},i(l){i||(J(r.$$.fragment,l),i=!0)},o(l){V(r.$$.fragment,l),i=!1},d(l){l&&D(n),se(r,l)}}}function At(t){let e,n,r,i,l,a=t[0].name+"",o,d,s,f,b,h,x,g,k,p,_,w,S,y,v,C,$,L,B,R,F,q,G,Q,P=t[0].description&&Ke(t),E=t[5]&&Ue(t);return{c(){e=m("div"),n=m("div"),r=m("div"),i=m("div"),l=m("h3"),o=A(a),d=j(),P&&P.c(),s=j(),f=m("div"),b=m("div"),h=m("div"),x=j(),g=m("span"),k=A(t[2]),p=A("/"),_=A(t[1]),w=j(),S=m("div"),y=m("button"),v=Z("svg"),C=Z("path"),B=j(),R=m("button"),R.innerHTML='<svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"></path></svg>',F=j(),E&&E.c(),c(l,"class","text-lg font-semibold text-gray-900 dark:text-white mb-2"),c(h,"class","bg-indigo-600 dark:bg-indigo-500 h-2 rounded-full transition-all duration-300"),Te(h,"width",t[4]+"%"),c(b,"class","flex-1 bg-gray-200 dark:bg-gray-700 rounded-full h-2"),c(g,"class","text-sm font-medium text-gray-900 dark:text-white"),c(f,"class","flex items-center gap-3 mb-3"),c(i,"class","flex-1"),c(C,"stroke-linecap","round"),c(C,"stroke-linejoin","round"),c(C,"stroke-width","2"),c(C,"d","M19 9l-7 7-7-7"),c(v,"class",$="w-5 h-5 transform transition-transform "+(t[5]?"rotate-180":"")),c(v,"fill","none"),c(v,"stroke","currentColor"),c(v,"viewBox","0 0 24 24"),c(y,"class","p-2 rounded-lg text-gray-600 dark:text-gray-300 hover:text-gray-900 dark:hover:text-white hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors"),c(y,"title",L=t[5]?"Collapse":"Expand"),c(R,"class","p-2 rounded-lg text-gray-400 hover:text-red-600 hover:bg-red-50 dark:hover:bg-red-900/20 transition-colors"),c(R,"title","Delete project"),c(S,"class","flex items-center gap-2 ml-4"),c(r,"class","flex items-start justify-between mb-4"),c(n,"class","p-6"),c(e,"class","bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700 overflow-hidden")},m(I,z){M(I,e,z),u(e,n),u(n,r),u(r,i),u(i,l),u(l,o),u(i,d),P&&P.m(i,null),u(i,s),u(i,f),u(f,b),u(b,h),u(f,x),u(f,g),u(g,k),u(g,p),u(g,_),u(r,w),u(r,S),u(S,y),u(y,v),u(v,C),u(S,B),u(S,R),u(n,F),E&&E.m(n,null),q=!0,G||(Q=[H(y,"click",t[6]),H(R,"click",t[7])],G=!0)},p(I,[z]){(!q||z&1)&&a!==(a=I[0].name+"")&&W(o,a),I[0].description?P?P.p(I,z):(P=Ke(I),P.c(),P.m(i,s)):P&&(P.d(1),P=null),(!q||z&16)&&Te(h,"width",I[4]+"%"),(!q||z&4)&&W(k,I[2]),(!q||z&2)&&W(_,I[1]),(!q||z&32&&$!==($="w-5 h-5 transform transition-transform "+(I[5]?"rotate-180":"")))&&c(v,"class",$),(!q||z&32&&L!==(L=I[5]?"Collapse":"Expand"))&&c(y,"title",L),I[5]?E?(E.p(I,z),z&32&&J(E,1)):(E=Ue(I),E.c(),J(E,1),E.m(n,null)):E&&(ue(),V(E,1,1,()=>{E=null}),ce())},i(I){q||(J(E),q=!0)},o(I){V(E),q=!1},d(I){I&&D(e),P&&P.d(),E&&E.d(),G=!1,ne(Q)}}}function Bt(t,e,n){let r,i,l,a,o,d;mt(t,ee,h=>n(8,d=h));let{project:s}=e;function f(){ee.toggleProjectExpanded(s.id)}function b(){confirm(`Are you sure you want to delete "${s.name}"?`)&&ee.deleteProject(s.id)}return t.$$set=h=>{"project"in h&&n(0,s=h.project)},t.$$.update=()=>{var h,x,g;t.$$.dirty&257&&n(5,r=(g=(x=(h=d.uiState)==null?void 0:h.expandedProjects)==null?void 0:x[s.id])!=null?g:!1),t.$$.dirty&1&&n(2,i=s.items.filter(k=>!k.isSection&&k.status==="completed").length),t.$$.dirty&1&&n(1,l=s.items.filter(k=>!k.isSection).length),t.$$.dirty&6&&n(4,a=l>0?i/l*100:0),t.$$.dirty&1&&n(3,o=s.items.filter(k=>!k.parentId))},[s,l,i,o,a,r,f,b,d]}class Rt extends ge{constructor(e){super(),me(this,e,Bt,At,ae,{project:0})}}function Qe(t,e,n){const r=t.slice();return r[36]=e[n],r}function Xe(t,e,n){const r=t.slice();return r[33]=e[n],r}function Jt(t){let e,n,r,i,l,a,o,d,s,f,b,h,x,g,k,p,_,w,S,y,v,C,$=[],L=new Map,B,R,F,q,G,Q,P,E,I,z=t[4];const le=T=>T[36].id;for(let T=0;T<z.length;T+=1){let N=Qe(t,z,T),Y=le(N);L.set(Y,$[T]=et(Y,N))}return{c(){e=m("div"),n=m("div"),r=m("button"),r.textContent="\u2190 Back to Presets",i=j(),l=m("div"),a=m("div"),o=m("label"),o.textContent="TODO Name *",d=j(),s=m("input"),f=j(),b=m("div"),h=m("label"),h.textContent="Description (Optional)",x=j(),g=m("textarea"),k=j(),p=m("div"),_=m("div"),w=m("h3"),w.textContent="Tasks & Sections",S=j(),y=m("button"),y.innerHTML=`<svg class="w-4 h-4 mr-1" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6v6m0 0v6m0-6h6m-6 0H6"></path></svg>
                Add Item`,v=j(),C=m("div");for(let T=0;T<$.length;T+=1)$[T].c();B=j(),R=m("div"),F=m("button"),F.textContent="Cancel",q=j(),G=m("button"),Q=A("Create TODO"),c(r,"class","text-sm text-indigo-600 dark:text-indigo-400 hover:text-indigo-700 dark:hover:text-indigo-300 mb-4"),c(o,"class","block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"),c(s,"type","text"),c(s,"class","w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 dark:bg-gray-700 dark:text-white"),c(s,"placeholder","Enter TODO name"),c(h,"class","block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"),c(g,"class","w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 dark:bg-gray-700 dark:text-white"),c(g,"placeholder","Describe your TODO"),c(g,"rows","2"),c(l,"class","space-y-4"),c(w,"class","text-lg font-medium text-gray-900 dark:text-white"),c(y,"class","inline-flex items-center px-3 py-1 text-sm font-medium text-indigo-600 dark:text-indigo-400 hover:text-indigo-700 dark:hover:text-indigo-300"),c(_,"class","flex items-center justify-between mb-4"),c(C,"class","space-y-2 max-h-40 overflow-y-auto"),c(F,"class","flex-1 px-4 py-2 text-gray-700 dark:text-gray-300 border border-gray-300 dark:border-gray-600 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors"),G.disabled=P=!t[2].trim(),c(G,"class","flex-1 px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors"),c(R,"class","flex gap-3 pt-6 border-t border-gray-200 dark:border-gray-600"),c(e,"class","space-y-6")},m(T,N){M(T,e,N),u(e,n),u(n,r),u(n,i),u(n,l),u(l,a),u(a,o),u(a,d),u(a,s),ie(s,t[2]),u(l,f),u(l,b),u(b,h),u(b,x),u(b,g),ie(g,t[3]),u(e,k),u(e,p),u(p,_),u(_,w),u(_,S),u(_,y),u(p,v),u(p,C);for(let Y=0;Y<$.length;Y+=1)$[Y]&&$[Y].m(C,null);u(e,B),u(e,R),u(R,F),u(R,q),u(R,G),u(G,Q),E||(I=[H(r,"click",t[17]),H(s,"input",t[18]),H(g,"input",t[19]),H(y,"click",t[10]),H(F,"click",t[14]),H(G,"click",t[9])],E=!0)},p(T,N){N[0]&4&&s.value!==T[2]&&ie(s,T[2]),N[0]&8&&ie(g,T[3]),N[0]&8208&&(z=T[4],$=Se($,N,le,1,T,z,L,C,pt,et,null,Qe)),N[0]&4&&P!==(P=!T[2].trim())&&(G.disabled=P)},d(T){T&&D(e);for(let N=0;N<$.length;N+=1)$[N].d();E=!1,ne(I)}}}function zt(t){let e,n,r,i,l=[],a=new Map,o,d,s,f,b,h=t[1];const x=g=>g[33].name;for(let g=0;g<h.length;g+=1){let k=Xe(t,h,g),p=x(k);a.set(p,l[g]=nt(p,k))}return{c(){e=m("div"),n=m("div"),n.innerHTML=`<h3 class="text-lg font-medium text-gray-900 dark:text-white mb-2">Choose a Preset</h3> 
            <p class="text-gray-600 dark:text-gray-300">Start with a pre-configured template or create a custom TODO</p>`,r=j(),i=m("div");for(let g=0;g<l.length;g+=1)l[g].c();o=j(),d=m("div"),s=m("button"),s.innerHTML=`<svg class="w-8 h-8 mx-auto text-gray-400 dark:text-gray-500 mb-2" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="1" d="M12 6v6m0 0v6m0-6h6m-6 0H6"></path></svg> 
              <span class="text-sm font-medium text-gray-900 dark:text-white">Create Custom TODO</span>`,c(n,"class","text-center"),c(i,"class","grid gap-4"),c(s,"class","w-full p-4 border-2 border-dashed border-gray-300 dark:border-gray-600 rounded-lg text-center hover:border-indigo-500 hover:bg-indigo-50 dark:hover:bg-indigo-900/20 transition-colors"),c(d,"class","border-t border-gray-200 dark:border-gray-600 pt-6"),c(e,"class","space-y-6")},m(g,k){M(g,e,k),u(e,n),u(e,r),u(e,i);for(let p=0;p<l.length;p+=1)l[p]&&l[p].m(i,null);u(e,o),u(e,d),u(d,s),f||(b=H(s,"click",t[8]),f=!0)},p(g,k){k[0]&130&&(h=g[1],l=Se(l,k,x,1,g,h,a,i,pt,nt,null,Xe))},d(g){g&&D(e);for(let k=0;k<l.length;k+=1)l[k].d();f=!1,b()}}}function Ze(t){let e,n=t[36].description+"",r;return{c(){e=m("p"),r=A(n),c(e,"class","text-sm text-gray-600 dark:text-gray-300")},m(i,l){M(i,e,l),u(e,r)},p(i,l){l[0]&16&&n!==(n=i[36].description+"")&&W(r,n)},d(i){i&&D(e)}}}function et(t,e){let n,r,i,l=e[36].isSection?"\u{1F4C1}":"\u{1F4CB}",a,o,d=e[36].name+"",s,f,b,h,x,g,k,p=e[36].description&&Ze(e);function _(){return e[20](e[36])}return{key:t,first:null,c(){n=m("div"),r=m("div"),i=m("span"),a=A(l),o=j(),s=A(d),f=j(),p&&p.c(),b=j(),h=m("button"),h.innerHTML='<svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"></path></svg>',x=j(),c(i,"class","font-medium text-gray-900 dark:text-white"),c(r,"class","flex-1"),c(h,"class","text-gray-400 hover:text-red-600"),c(n,"class","flex items-center gap-3 p-3 border border-gray-200 dark:border-gray-600 rounded-lg"),this.first=n},m(w,S){M(w,n,S),u(n,r),u(r,i),u(i,a),u(i,o),u(i,s),u(r,f),p&&p.m(r,null),u(n,b),u(n,h),u(n,x),g||(k=H(h,"click",_),g=!0)},p(w,S){e=w,S[0]&16&&l!==(l=e[36].isSection?"\u{1F4C1}":"\u{1F4CB}")&&W(a,l),S[0]&16&&d!==(d=e[36].name+"")&&W(s,d),e[36].description?p?p.p(e,S):(p=Ze(e),p.c(),p.m(r,null)):p&&(p.d(1),p=null)},d(w){w&&D(n),p&&p.d(),g=!1,k()}}}function tt(t){let e,n=t[33].description+"",r;return{c(){e=m("p"),r=A(n),c(e,"class","text-sm text-gray-600 dark:text-gray-300 mb-2")},m(i,l){M(i,e,l),u(e,r)},p(i,l){l[0]&2&&n!==(n=i[33].description+"")&&W(r,n)},d(i){i&&D(e)}}}function nt(t,e){let n,r,i=e[33].name+"",l,a,o,d,s=e[33].items.filter(ot).length+"",f,b,h=e[33].items.filter(st).length+"",x,g,k,p,_,w=e[33].description&&tt(e);function S(){return e[16](e[33])}return{key:t,first:null,c(){n=m("button"),r=m("h4"),l=A(i),a=j(),w&&w.c(),o=j(),d=m("p"),f=A(s),b=A(` tasks, 
                  `),x=A(h),g=A(" sections"),k=j(),c(r,"class","font-medium text-gray-900 dark:text-white mb-1"),c(d,"class","text-xs text-gray-500 dark:text-gray-400"),c(n,"class","p-4 border border-gray-200 dark:border-gray-600 rounded-lg text-left hover:border-indigo-500 hover:bg-indigo-50 dark:hover:bg-indigo-900/20 transition-colors"),this.first=n},m(y,v){M(y,n,v),u(n,r),u(r,l),u(n,a),w&&w.m(n,null),u(n,o),u(n,d),u(d,f),u(d,b),u(d,x),u(d,g),u(n,k),p||(_=H(n,"click",S),p=!0)},p(y,v){e=y,v[0]&2&&i!==(i=e[33].name+"")&&W(l,i),e[33].description?w?w.p(e,v):(w=tt(e),w.c(),w.m(n,o)):w&&(w.d(1),w=null),v[0]&2&&s!==(s=e[33].items.filter(ot).length+"")&&W(f,s),v[0]&2&&h!==(h=e[33].items.filter(st).length+"")&&W(x,h)},d(y){y&&D(n),w&&w.d(),p=!1,_()}}}function rt(t){let e,n,r,i=t[5].isSection?"Add Section":"Add Task",l,a,o,d,s,f,b,h,x,g,k,p,_,w,S,y,v,C,$,L,B,R,F,q,G,Q,P,E,I,z,le=t[5].isSection?"Section":"Task",T,N,Y,pe,Ee,X=!t[5].isSection&&it(t);return Y=kt(t[22][0]),{c(){e=m("div"),n=m("div"),r=m("h3"),l=A(i),a=j(),o=m("div"),d=m("div"),s=m("label"),f=m("input"),b=j(),h=m("span"),h.textContent="Task",x=j(),g=m("label"),k=m("input"),p=j(),_=m("span"),_.textContent="Section",w=j(),S=m("div"),y=m("label"),y.textContent="Name *",v=j(),C=m("input"),$=j(),L=m("div"),B=m("label"),B.textContent="Description",R=j(),F=m("input"),q=j(),X&&X.c(),G=j(),Q=m("div"),P=m("button"),P.textContent="Cancel",E=j(),I=m("button"),z=A("Add "),T=A(le),c(r,"class","text-lg font-medium text-gray-900 dark:text-white mb-4"),c(f,"type","radio"),f.__value=!1,f.value=f.__value,c(f,"class","mr-2"),c(h,"class","text-sm text-gray-700 dark:text-gray-300"),c(s,"class","flex items-center"),c(k,"type","radio"),k.__value=!0,k.value=k.__value,c(k,"class","mr-2"),c(_,"class","text-sm text-gray-700 dark:text-gray-300"),c(g,"class","flex items-center"),c(d,"class","flex gap-4 mb-4"),c(y,"class","block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"),c(C,"type","text"),c(C,"class","w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 dark:bg-gray-700 dark:text-white"),c(B,"class","block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"),c(F,"type","text"),c(F,"class","w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 dark:bg-gray-700 dark:text-white"),c(o,"class","space-y-4"),c(P,"class","flex-1 px-4 py-2 text-gray-700 dark:text-gray-300 border border-gray-300 dark:border-gray-600 rounded hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors"),I.disabled=N=!t[5].name.trim(),c(I,"class","flex-1 px-4 py-2 bg-indigo-600 text-white rounded hover:bg-indigo-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors"),c(Q,"class","flex gap-2 mt-6"),c(n,"class","bg-white dark:bg-gray-800 rounded-lg shadow-xl max-w-md w-full p-6"),c(e,"class","fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center p-4 z-[70]"),Y.p(f,k)},m(K,re){M(K,e,re),u(e,n),u(n,r),u(r,l),u(n,a),u(n,o),u(o,d),u(d,s),u(s,f),f.checked=f.__value===t[5].isSection,u(s,b),u(s,h),u(d,x),u(d,g),u(g,k),k.checked=k.__value===t[5].isSection,u(g,p),u(g,_),u(o,w),u(o,S),u(S,y),u(S,v),u(S,C),ie(C,t[5].name),u(o,$),u(o,L),u(L,B),u(L,R),u(L,F),ie(F,t[5].description),u(o,q),X&&X.m(o,null),u(n,G),u(n,Q),u(Q,P),u(Q,E),u(Q,I),u(I,z),u(I,T),pe||(Ee=[H(f,"change",t[21]),H(k,"change",t[23]),H(C,"input",t[24]),H(F,"input",t[25]),H(P,"click",t[12]),H(I,"click",t[11])],pe=!0)},p(K,re){re[0]&32&&i!==(i=K[5].isSection?"Add Section":"Add Task")&&W(l,i),re[0]&32&&(f.checked=f.__value===K[5].isSection),re[0]&32&&(k.checked=k.__value===K[5].isSection),re[0]&32&&C.value!==K[5].name&&ie(C,K[5].name),re[0]&32&&F.value!==K[5].description&&ie(F,K[5].description),K[5].isSection?X&&(X.d(1),X=null):X?X.p(K,re):(X=it(K),X.c(),X.m(o,null)),re[0]&32&&le!==(le=K[5].isSection?"Section":"Task")&&W(T,le),re[0]&32&&N!==(N=!K[5].name.trim())&&(I.disabled=N)},d(K){K&&D(e),X&&X.d(),Y.r(),pe=!1,ne(Ee)}}}function it(t){let e,n,r,i,l,a,o,d,s,f,b,h,x,g,k,p=t[5].resetTime.type==="weekly"&&lt(t);return{c(){e=m("div"),n=m("label"),n.textContent="Reset Schedule",r=j(),i=m("select"),l=m("option"),l.textContent="Daily",a=m("option"),a.textContent="Weekly",o=j(),d=m("div"),s=m("div"),f=m("label"),f.textContent="Time",b=j(),h=m("input"),x=j(),p&&p.c(),c(n,"class","block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"),l.__value="daily",l.value=l.__value,a.__value="weekly",a.value=a.__value,c(i,"class","w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 dark:bg-gray-700 dark:text-white"),t[5].resetTime.type===void 0&&xe(()=>t[26].call(i)),c(f,"class","block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"),c(h,"type","time"),c(h,"class","w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 dark:bg-gray-700 dark:text-white"),c(s,"class","flex-1"),c(d,"class","flex gap-2")},m(_,w){M(_,e,w),u(e,n),u(e,r),u(e,i),u(i,l),u(i,a),De(i,t[5].resetTime.type,!0),M(_,o,w),M(_,d,w),u(d,s),u(s,f),u(s,b),u(s,h),ie(h,t[5].resetTime.time),u(d,x),p&&p.m(d,null),g||(k=[H(i,"change",t[26]),H(h,"input",t[27])],g=!0)},p(_,w){w[0]&32&&De(i,_[5].resetTime.type),w[0]&32&&ie(h,_[5].resetTime.time),_[5].resetTime.type==="weekly"?p?p.p(_,w):(p=lt(_),p.c(),p.m(d,null)):p&&(p.d(1),p=null)},d(_){_&&D(e),_&&D(o),_&&D(d),p&&p.d(),g=!1,ne(k)}}}function lt(t){let e,n,r,i,l,a,o,d,s,f,b,h,x;return{c(){e=m("div"),n=m("label"),n.textContent="Day",r=j(),i=m("select"),l=m("option"),l.textContent="Sunday",a=m("option"),a.textContent="Monday",o=m("option"),o.textContent="Tuesday",d=m("option"),d.textContent="Wednesday",s=m("option"),s.textContent="Thursday",f=m("option"),f.textContent="Friday",b=m("option"),b.textContent="Saturday",c(n,"class","block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"),l.__value=0,l.value=l.__value,a.__value=1,a.value=a.__value,o.__value=2,o.value=o.__value,d.__value=3,d.value=d.__value,s.__value=4,s.value=s.__value,f.__value=5,f.value=f.__value,b.__value=6,b.value=b.__value,c(i,"class","w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 dark:bg-gray-700 dark:text-white"),t[5].resetTime.weekday===void 0&&xe(()=>t[28].call(i)),c(e,"class","flex-1")},m(g,k){M(g,e,k),u(e,n),u(e,r),u(e,i),u(i,l),u(i,a),u(i,o),u(i,d),u(i,s),u(i,f),u(i,b),De(i,t[5].resetTime.weekday,!0),h||(x=H(i,"change",t[28]),h=!0)},p(g,k){k[0]&32&&De(i,g[5].resetTime.weekday)},d(g){g&&D(e),h=!1,x()}}}function Ft(t){let e,n,r,i,l,a,o,d,s,f,b,h;function x(_,w){return _[0]?zt:Jt}let g=x(t),k=g(t),p=t[6]&&t[5]&&rt(t);return{c(){e=m("div"),n=m("div"),r=m("div"),i=m("div"),l=m("h2"),l.textContent="Create New TODO",a=j(),o=m("button"),o.innerHTML='<svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg>',d=j(),k.c(),s=j(),p&&p.c(),f=ye(),c(l,"class","text-2xl font-bold text-gray-900 dark:text-white"),c(o,"class","text-gray-400 hover:text-gray-600 dark:hover:text-gray-200"),c(i,"class","flex items-center justify-between mb-6"),c(r,"class","p-6"),c(n,"class","bg-white dark:bg-gray-800 rounded-xl shadow-xl max-w-2xl w-full max-h-[90vh] overflow-y-auto"),c(e,"class","fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50")},m(_,w){M(_,e,w),u(e,n),u(n,r),u(r,i),u(i,l),u(i,a),u(i,o),u(r,d),k.m(r,null),M(_,s,w),p&&p.m(_,w),M(_,f,w),b||(h=[H(o,"click",t[14]),H(e,"click",t[15])],b=!0)},p(_,w){g===(g=x(_))&&k?k.p(_,w):(k.d(1),k=g(_),k&&(k.c(),k.m(r,null))),_[6]&&_[5]?p?p.p(_,w):(p=rt(_),p.c(),p.m(f.parentNode,f)):p&&(p.d(1),p=null)},i:U,o:U,d(_){_&&D(e),k.d(),_&&D(s),p&&p.d(_),_&&D(f),b=!1,ne(h)}}}function je(){return Math.random().toString(36).substr(2,9)}const ot=t=>!t.isSection,st=t=>t.isSection;function Vt(t,e,n){const r=xt();let i=!0,l=[],a=null,o="",d="",s=[],f=null,b=!1;Oe(async()=>{await h()});async function h(){try{const T=["mmo-dailies","gacha-game"],N=await Promise.all(T.map(async Y=>{const pe=await fetch(`/todo/presets/${Y}.json`);return pe.ok?await pe.json():null}));n(1,l=N.filter(Y=>Y!==null))}catch(T){console.error("Failed to load presets:",T)}}function x(T){a=T,g()}function g(){if(!a)return;const T={id:je(),name:a.name,description:a.description,items:a.items.map(N=>({...N,id:je(),status:"pending",lastReset:0,parentId:null})),createdAt:Date.now(),isPreset:!0};ee.addProject(T),v()}function k(){n(0,i=!1),a=null}function p(){if(!o.trim())return;const T={id:je(),name:o.trim(),description:d.trim()||void 0,items:s,createdAt:Date.now()};ee.addProject(T),v()}function _(){n(6,b=!0),n(5,f={id:je(),name:"",description:"",status:"pending",resetTime:{type:"daily",time:"20:00"},lastReset:0,parentId:null,isSection:!1})}function w(){if(!(f!=null&&f.name.trim()))return;const T=s.findIndex(N=>N.id===f.id);T>=0?n(4,s[T]={...f},s):n(4,s=[...s,{...f}]),S()}function S(){n(5,f=null),n(6,b=!1)}function y(T){n(4,s=s.filter(N=>N.id!==T))}function v(){r("close")}function C(T){T.target===T.currentTarget&&v()}const $=[[]],L=T=>x(T),B=()=>n(0,i=!0);function R(){o=this.value,n(2,o)}function F(){d=this.value,n(3,d)}const q=T=>y(T.id);function G(){f.isSection=this.__value,n(5,f)}function Q(){f.isSection=this.__value,n(5,f)}function P(){f.name=this.value,n(5,f)}function E(){f.description=this.value,n(5,f)}function I(){f.resetTime.type=He(this),n(5,f)}function z(){f.resetTime.time=this.value,n(5,f)}function le(){f.resetTime.weekday=He(this),n(5,f)}return[i,l,o,d,s,f,b,x,k,p,_,w,S,y,v,C,L,B,R,F,q,G,$,Q,P,E,I,z,le]}class Wt extends ge{constructor(e){super(),me(this,e,Vt,Ft,ae,{},null,[-1,-1])}}function qt(t){let e,n;return{c(){e=Z("svg"),n=Z("path"),c(n,"stroke-linecap","round"),c(n,"stroke-linejoin","round"),c(n,"stroke-width","2"),c(n,"d","M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z"),c(e,"class","w-5 h-5"),c(e,"fill","none"),c(e,"stroke","currentColor"),c(e,"viewBox","0 0 24 24")},m(r,i){M(r,e,i),u(e,n)},d(r){r&&D(e)}}}function Gt(t){let e,n;return{c(){e=Z("svg"),n=Z("path"),c(n,"stroke-linecap","round"),c(n,"stroke-linejoin","round"),c(n,"stroke-width","2"),c(n,"d","M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z"),c(e,"class","w-5 h-5"),c(e,"fill","none"),c(e,"stroke","currentColor"),c(e,"viewBox","0 0 24 24")},m(r,i){M(r,e,i),u(e,n)},d(r){r&&D(e)}}}function Kt(t){let e,n,r,i,l,a,o,d;function s(h,x){return h[0]==="light"?Gt:qt}let f=s(t),b=f(t);return{c(){e=m("header"),n=m("div"),r=m("div"),i=m("div"),i.innerHTML=`<svg class="w-8 h-8 text-indigo-600 dark:text-indigo-400 mr-3" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg> 
        <span class="text-xl font-semibold text-gray-900 dark:text-white">Game TODO</span>`,l=j(),a=m("button"),b.c(),c(i,"class","flex items-center"),c(a,"class","p-2 rounded-lg text-gray-600 dark:text-gray-300 hover:text-gray-900 dark:hover:text-white hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors"),c(a,"title","Toggle theme"),c(r,"class","flex justify-between items-center py-4"),c(n,"class","max-w-7xl mx-auto px-4 sm:px-6 lg:px-8"),c(e,"class","bg-white dark:bg-gray-800 shadow-sm border-b border-gray-200 dark:border-gray-700")},m(h,x){M(h,e,x),u(e,n),u(n,r),u(r,i),u(r,l),u(r,a),b.m(a,null),o||(d=H(a,"click",t[1]),o=!0)},p(h,[x]){f!==(f=s(h))&&(b.d(1),b=f(h),b&&(b.c(),b.m(a,null)))},i:U,o:U,d(h){h&&D(e),b.d(),o=!1,d()}}}function Ut(t,e,n){let r="light";ee.subscribe(l=>{n(0,r=l.settings.theme),typeof document<"u"&&document.documentElement.classList.toggle("dark",r==="dark")});function i(){const l=r==="light"?"dark":"light";ee.updateSettings({theme:l})}return[r,i]}class Yt extends ge{constructor(e){super(),me(this,e,Ut,Kt,ae,{})}}function at(t,e,n){const r=t.slice();return r[4]=e[n],r}function Qt(t){let e,n=[],r=new Map,i,l=t[1];const a=o=>o[4].id;for(let o=0;o<l.length;o+=1){let d=at(t,l,o),s=a(d);r.set(s,n[o]=dt(s,d))}return{c(){e=m("div");for(let o=0;o<n.length;o+=1)n[o].c();c(e,"class","grid gap-6 md:grid-cols-2 lg:grid-cols-3")},m(o,d){M(o,e,d);for(let s=0;s<n.length;s+=1)n[s]&&n[s].m(e,null);i=!0},p(o,d){d&2&&(l=o[1],ue(),n=Se(n,d,a,1,o,l,r,e,Pe,dt,null,at),ce())},i(o){if(!i){for(let d=0;d<l.length;d+=1)J(n[d]);i=!0}},o(o){for(let d=0;d<n.length;d+=1)V(n[d]);i=!1},d(o){o&&D(e);for(let d=0;d<n.length;d+=1)n[d].d()}}}function Xt(t){let e,n,r,i,l,a,o,d,s,f,b;return{c(){e=m("div"),n=Z("svg"),r=Z("path"),i=j(),l=m("h2"),l.textContent="No TODOs yet",a=j(),o=m("p"),o.textContent="Create your first TODO to start tracking game activities",d=j(),s=m("button"),s.innerHTML=`<svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6v6m0 0v6m0-6h6m-6 0H6"></path></svg>
        Create Your First TODO`,c(r,"stroke-linecap","round"),c(r,"stroke-linejoin","round"),c(r,"stroke-width","1"),c(r,"d","M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"),c(n,"class","w-24 h-24 mx-auto text-gray-300 dark:text-gray-600 mb-4"),c(n,"fill","none"),c(n,"stroke","currentColor"),c(n,"viewBox","0 0 24 24"),c(l,"class","text-xl font-semibold text-gray-900 dark:text-white mb-2"),c(o,"class","text-gray-600 dark:text-gray-300 mb-6"),c(s,"class","inline-flex items-center px-6 py-3 border border-transparent rounded-lg shadow-sm text-base font-medium text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 dark:focus:ring-offset-gray-900 transition-colors"),c(e,"class","text-center py-12")},m(h,x){M(h,e,x),u(e,n),u(n,r),u(e,i),u(e,l),u(e,a),u(e,o),u(e,d),u(e,s),f||(b=H(s,"click",t[2]),f=!0)},p:U,i:U,o:U,d(h){h&&D(e),f=!1,b()}}}function dt(t,e){let n,r,i;return r=new Rt({props:{project:e[4]}}),{key:t,first:null,c(){n=ye(),fe(r.$$.fragment),this.first=n},m(l,a){M(l,n,a),oe(r,l,a),i=!0},p(l,a){e=l;const o={};a&2&&(o.project=e[4]),r.$set(o)},i(l){i||(J(r.$$.fragment,l),i=!0)},o(l){V(r.$$.fragment,l),i=!1},d(l){l&&D(n),se(r,l)}}}function ut(t){let e,n;return e=new Wt({}),e.$on("close",t[3]),{c(){fe(e.$$.fragment)},m(r,i){oe(e,r,i),n=!0},p:U,i(r){n||(J(e.$$.fragment,r),n=!0)},o(r){V(e.$$.fragment,r),n=!1},d(r){se(e,r)}}}function Zt(t){let e,n,r,i,l,a,o,d,s,f,b,h,x,g,k;e=new Yt({});const p=[Xt,Qt],_=[];function w(y,v){return y[1].length===0?0:1}s=w(t),f=_[s]=p[s](t);let S=t[0]&&ut(t);return{c(){fe(e.$$.fragment),n=j(),r=m("main"),i=m("div"),l=m("div"),l.innerHTML=`<h1 class="text-3xl font-bold text-gray-900 dark:text-white">Game TODO Tracker</h1> 
      <p class="mt-2 text-gray-600 dark:text-gray-300">Track your daily and weekly game activities</p>`,a=j(),o=m("button"),o.innerHTML=`<svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6v6m0 0v6m0-6h6m-6 0H6"></path></svg>
      Add TODO`,d=j(),f.c(),b=j(),S&&S.c(),h=ye(),c(o,"class","inline-flex items-center px-4 py-2 border border-transparent rounded-lg shadow-sm text-sm font-medium text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 dark:focus:ring-offset-gray-900 transition-colors"),c(i,"class","flex justify-between items-center mb-8"),c(r,"class","max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8")},m(y,v){oe(e,y,v),M(y,n,v),M(y,r,v),u(r,i),u(i,l),u(i,a),u(i,o),u(r,d),_[s].m(r,null),M(y,b,v),S&&S.m(y,v),M(y,h,v),x=!0,g||(k=H(o,"click",t[2]),g=!0)},p(y,[v]){let C=s;s=w(y),s===C?_[s].p(y,v):(ue(),V(_[C],1,1,()=>{_[C]=null}),ce(),f=_[s],f?f.p(y,v):(f=_[s]=p[s](y),f.c()),J(f,1),f.m(r,null)),y[0]?S?(S.p(y,v),v&1&&J(S,1)):(S=ut(y),S.c(),J(S,1),S.m(h.parentNode,h)):S&&(ue(),V(S,1,1,()=>{S=null}),ce())},i(y){x||(J(e.$$.fragment,y),J(f),J(S),x=!0)},o(y){V(e.$$.fragment,y),V(f),V(S),x=!1},d(y){se(e,y),y&&D(n),y&&D(r),_[s].d(),y&&D(b),S&&S.d(y),y&&D(h),g=!1,k()}}}function en(t,e,n){let r=!1,i=[];ee.subscribe(o=>{n(1,i=o.projects)});function l(){n(0,r=!0)}function a(){n(0,r=!1)}return[r,i,l,a]}class tn extends ge{constructor(e){super(),me(this,e,en,Zt,ae,{})}}function nn(t){let e,n,r,i,l;return e=new Mt({}),i=new tn({}),{c(){fe(e.$$.fragment),n=j(),r=m("div"),fe(i.$$.fragment),c(r,"class","min-h-screen bg-gray-50 dark:bg-gray-900 transition-colors")},m(a,o){oe(e,a,o),M(a,n,o),M(a,r,o),oe(i,r,null),l=!0},p:U,i(a){l||(J(e.$$.fragment,a),J(i.$$.fragment,a),l=!0)},o(a){V(e.$$.fragment,a),V(i.$$.fragment,a),l=!1},d(a){se(e,a),a&&D(n),a&&D(r),se(i)}}}function rn(t){return Oe(()=>{ee.init();const e=setInterval(()=>{ee.checkResets()},6e4);return()=>clearInterval(e)}),[]}class ln extends ge{constructor(e){super(),me(this,e,rn,nn,ae,{})}}new ln({target:document.getElementById("app")});
