(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const l of i)if(l.type==="childList")for(const c of l.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&r(c)}).observe(document,{childList:!0,subtree:!0});function t(i){const l={};return i.integrity&&(l.integrity=i.integrity),i.referrerpolicy&&(l.referrerPolicy=i.referrerpolicy),i.crossorigin==="use-credentials"?l.credentials="include":i.crossorigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function r(i){if(i.ep)return;i.ep=!0;const l=t(i);fetch(i.href,l)}})();function ee(){}function kt(n){return n()}function ze(){return Object.create(null)}function ie(n){n.forEach(kt)}function yt(n){return typeof n=="function"}function ge(n,e){return n!=n?e==e:n!==e||n&&typeof n=="object"||typeof n=="function"}function It(n){return Object.keys(n).length===0}function Mt(n,...e){if(n==null)return ee;const t=n.subscribe(...e);return t.unsubscribe?()=>t.unsubscribe():t}function vt(n,e,t){n.$$.on_destroy.push(Mt(e,t))}function s(n,e){n.appendChild(e)}function I(n,e,t){n.insertBefore(e,t||null)}function D(n){n.parentNode&&n.parentNode.removeChild(n)}function g(n){return document.createElement(n)}function re(n){return document.createElementNS("http://www.w3.org/2000/svg",n)}function F(n){return document.createTextNode(n)}function w(){return F(" ")}function je(){return F("")}function R(n,e,t,r){return n.addEventListener(e,t,r),()=>n.removeEventListener(e,t,r)}function u(n,e,t){t==null?n.removeAttribute(e):n.getAttribute(e)!==t&&n.setAttribute(e,t)}function Ot(n){let e;return{p(...t){e=t,e.forEach(r=>n.push(r))},r(){e.forEach(t=>n.splice(n.indexOf(t),1))}}}function Et(n){return Array.from(n.childNodes)}function te(n,e){e=""+e,n.data!==e&&(n.data=e)}function ae(n,e){n.value=e==null?"":e}function Ce(n,e,t,r){t==null?n.style.removeProperty(e):n.style.setProperty(e,t,r?"important":"")}function Pe(n,e,t){for(let r=0;r<n.options.length;r+=1){const i=n.options[r];if(i.__value===e){i.selected=!0;return}}(!t||e!==void 0)&&(n.selectedIndex=-1)}function Fe(n){const e=n.querySelector(":checked");return e&&e.__value}function z(n,e,t){n.classList[t?"add":"remove"](e)}function Pt(n,e,{bubbles:t=!1,cancelable:r=!1}={}){const i=document.createEvent("CustomEvent");return i.initCustomEvent(n,t,r,e),i}let De;function Te(n){De=n}function Le(){if(!De)throw new Error("Function called outside component initialization");return De}function Ae(n){Le().$$.on_mount.push(n)}function Nt(n){Le().$$.on_destroy.push(n)}function $t(){const n=Le();return(e,t,{cancelable:r=!1}={})=>{const i=n.$$.callbacks[e];if(i){const l=Pt(e,t,{cancelable:r});return i.slice().forEach(c=>{c.call(n,l)}),!l.defaultPrevented}return!0}}const xe=[],We=[];let Se=[];const qe=[],Ht=Promise.resolve();let He=!1;function Lt(){He||(He=!0,Ht.then(wt))}function Ie(n){Se.push(n)}const $e=new Set;let ve=0;function wt(){if(ve!==0)return;const n=De;do{try{for(;ve<xe.length;){const e=xe[ve];ve++,Te(e),At(e.$$)}}catch(e){throw xe.length=0,ve=0,e}for(Te(null),xe.length=0,ve=0;We.length;)We.pop()();for(let e=0;e<Se.length;e+=1){const t=Se[e];$e.has(t)||($e.add(t),t())}Se.length=0}while(xe.length);for(;qe.length;)qe.pop()();He=!1,$e.clear(),Te(n)}function At(n){if(n.fragment!==null){n.update(),ie(n.before_update);const e=n.dirty;n.dirty=[-1],n.fragment&&n.fragment.p(n.ctx,e),n.after_update.forEach(Ie)}}function Bt(n){const e=[],t=[];Se.forEach(r=>n.indexOf(r)===-1?e.push(r):t.push(r)),t.forEach(r=>r()),Se=e}const Ee=new Set;let pe;function me(){pe={r:0,c:[],p:pe}}function he(){pe.r||ie(pe.c),pe=pe.p}function W(n,e){n&&n.i&&(Ee.delete(n),n.i(e))}function Q(n,e,t,r){if(n&&n.o){if(Ee.has(n))return;Ee.add(n),pe.c.push(()=>{Ee.delete(n),r&&(t&&n.d(1),r())}),n.o(e)}else r&&r()}function xt(n,e){n.d(1),e.delete(n.key)}function Be(n,e){Q(n,1,1,()=>{e.delete(n.key)})}function Me(n,e,t,r,i,l,c,o,d,a,f,h){let p=n.length,j=l.length,b=p;const _={};for(;b--;)_[n[b].key]=b;const m=[],k=new Map,x=new Map,S=[];for(b=j;b--;){const E=h(i,l,b),C=t(E);let P=c.get(C);P?r&&S.push(()=>P.p(E,e)):(P=a(C,E),P.c()),k.set(C,m[b]=P),C in _&&x.set(C,Math.abs(b-_[C]))}const y=new Set,v=new Set;function T(E){W(E,1),E.m(o,f),c.set(E.key,E),f=E.first,j--}for(;p&&j;){const E=m[j-1],C=n[p-1],P=E.key,V=C.key;E===C?(f=E.first,p--,j--):k.has(V)?!c.has(P)||y.has(P)?T(E):v.has(V)?p--:x.get(P)>x.get(V)?(v.add(P),T(E)):(y.add(V),p--):(d(C,c),p--)}for(;p--;){const E=n[p];k.has(E.key)||d(E,c)}for(;j;)T(m[j-1]);return ie(S),m}function be(n){n&&n.c()}function ce(n,e,t,r){const{fragment:i,after_update:l}=n.$$;i&&i.m(e,t),r||Ie(()=>{const c=n.$$.on_mount.map(kt).filter(yt);n.$$.on_destroy?n.$$.on_destroy.push(...c):ie(c),n.$$.on_mount=[]}),l.forEach(Ie)}function fe(n,e){const t=n.$$;t.fragment!==null&&(Bt(t.after_update),ie(t.on_destroy),t.fragment&&t.fragment.d(e),t.on_destroy=t.fragment=null,t.ctx=[])}function Rt(n,e){n.$$.dirty[0]===-1&&(xe.push(n),Lt(),n.$$.dirty.fill(0)),n.$$.dirty[e/31|0]|=1<<e%31}function _e(n,e,t,r,i,l,c,o=[-1]){const d=De;Te(n);const a=n.$$={fragment:null,ctx:[],props:l,update:ee,not_equal:i,bound:ze(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(d?d.$$.context:[])),callbacks:ze(),dirty:o,skip_bound:!1,root:e.target||d.$$.root};c&&c(a.root);let f=!1;if(a.ctx=t?t(n,e.props||{},(h,p,...j)=>{const b=j.length?j[0]:p;return a.ctx&&i(a.ctx[h],a.ctx[h]=b)&&(!a.skip_bound&&a.bound[h]&&a.bound[h](b),f&&Rt(n,h)),p}):[],a.update(),f=!0,ie(a.before_update),a.fragment=r?r(a.ctx):!1,e.target){if(e.hydrate){const h=Et(e.target);a.fragment&&a.fragment.l(h),h.forEach(D)}else a.fragment&&a.fragment.c();e.intro&&W(n.$$.fragment),ce(n,e.target,e.anchor,e.customElement),wt()}Te(d)}class ke{$destroy(){fe(this,1),this.$destroy=ee}$on(e,t){if(!yt(t))return ee;const r=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return r.push(t),()=>{const i=r.indexOf(t);i!==-1&&r.splice(i,1)}}$set(e){this.$$set&&!It(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}class Jt extends ke{constructor(e){super(),_e(this,e,null,null,ge,{})}}const we=[];function zt(n,e=ee){let t;const r=new Set;function i(o){if(ge(n,o)&&(n=o,t)){const d=!we.length;for(const a of r)a[1](),we.push(a,n);if(d){for(let a=0;a<we.length;a+=2)we[a][0](we[a+1]);we.length=0}}}function l(o){i(o(n))}function c(o,d=ee){const a=[o,d];return r.add(a),r.size===1&&(t=e(i)||ee),o(n),()=>{r.delete(a),r.size===0&&t&&(t(),t=null)}}return{set:i,update:l,subscribe:c}}const le="game-todo-data",Ft={projects:[],settings:{theme:"light"},uiState:{expandedProjects:{},expandedSections:{}}};function Wt(){const{subscribe:n,set:e,update:t}=zt(Ft);return{subscribe:n,init:()=>{if(typeof window<"u"){const r=localStorage.getItem(le);if(r)try{const i=JSON.parse(r);i.uiState||(i.uiState={expandedProjects:{},expandedSections:{}}),e(i)}catch(i){console.error("Failed to parse stored todo data:",i)}}},save:r=>{typeof window<"u"&&localStorage.setItem(le,JSON.stringify(r)),e(r)},addProject:r=>{t(i=>{const l={...i,projects:[...i.projects,r]};return typeof window<"u"&&localStorage.setItem(le,JSON.stringify(l)),l})},updateProject:(r,i)=>{t(l=>{const c={...l,projects:l.projects.map(o=>o.id===r?{...o,...i}:o)};return typeof window<"u"&&localStorage.setItem(le,JSON.stringify(c)),c})},deleteProject:r=>{t(i=>{const l={...i,projects:i.projects.filter(c=>c.id!==r)};return typeof window<"u"&&localStorage.setItem(le,JSON.stringify(l)),l})},updateTodoStatus:(r,i,l)=>{t(c=>{const o={...c,projects:c.projects.map(d=>d.id===r?{...d,items:d.items.map(a=>a.id===i?{...a,status:l}:a)}:d)};return typeof window<"u"&&localStorage.setItem(le,JSON.stringify(o)),o})},addTodoItem:(r,i)=>{t(l=>{const c={...l,projects:l.projects.map(o=>o.id===r?{...o,items:[...o.items,i]}:o)};return typeof window<"u"&&localStorage.setItem(le,JSON.stringify(c)),c})},updateSettings:r=>{t(i=>{const l={...i,settings:{...i.settings,...r}};return typeof window<"u"&&localStorage.setItem(le,JSON.stringify(l)),l})},checkResets:()=>{t(r=>{const i=Date.now();let l=!1;const c={...r,projects:r.projects.map(o=>({...o,items:o.items.map(d=>qt(d.resetTime,d.lastReset,i)?(l=!0,{...d,status:"pending",lastReset:i}):d)}))};return l&&typeof window<"u"&&localStorage.setItem(le,JSON.stringify(c)),c})},toggleProjectExpanded:r=>{t(i=>{const l={...i,uiState:{...i.uiState,expandedProjects:{...i.uiState.expandedProjects,[r]:!i.uiState.expandedProjects[r]}}};return typeof window<"u"&&localStorage.setItem(le,JSON.stringify(l)),l})},toggleSectionExpanded:r=>{t(i=>{const l={...i,uiState:{...i.uiState,expandedSections:{...i.uiState.expandedSections,[r]:!i.uiState.expandedSections[r]}}};return typeof window<"u"&&localStorage.setItem(le,JSON.stringify(l)),l})}}}function qt(n,e,t){const r=new Date(t);if(n.type==="daily"){const[i,l]=n.time.split(":").map(Number),c=new Date(r);return c.setHours(i,l,0,0),r<c&&c.setDate(c.getDate()-1),e<c.getTime()}else if(n.type==="weekly"){const[i,l]=n.time.split(":").map(Number),c=n.weekday||0,o=new Date(r),d=o.getDay()-c;return o.setDate(o.getDate()-(d>=0?d:d+7)),o.setHours(i,l,0,0),r<o&&o.setDate(o.getDate()-7),e<o.getTime()}return!1}const ne=Wt();function Ve(n,e,t){const r=n.slice();return r[13]=e[t],r}function Vt(n){let e,t,r,i,l,c=n[0].name+"",o,d,a,f,h=n[9](n[0].resetTime)+"",p,j,b,_,m,k,x,S=n[0].status==="completed"&&Ge(),y=n[0].description&&Ke(n);return{c(){e=g("button"),S&&S.c(),t=w(),r=g("div"),i=g("div"),l=g("h4"),o=F(c),d=w(),a=g("div"),f=g("div"),p=F(h),j=w(),b=g("div"),_=F(n[4]),m=w(),y&&y.c(),u(e,"class","flex-shrink-0 w-5 h-5 rounded border-2 border-gray-300 dark:border-gray-600 flex items-center justify-center transition-all duration-200 hover:border-indigo-400"),z(e,"bg-indigo-500",n[0].status==="completed"),z(e,"border-indigo-500",n[0].status==="completed"),z(e,"dark:border-indigo-400",n[0].status==="completed"),z(e,"dark:bg-indigo-400",n[0].status==="completed"),u(l,"class","font-medium transition-colors"),z(l,"text-gray-900",n[0].status==="pending"),z(l,"dark:text-white",n[0].status==="pending"),z(l,"text-gray-500",n[0].status==="completed"),z(l,"dark:text-gray-400",n[0].status==="completed"),z(l,"line-through",n[0].status==="completed"),u(f,"class","text-xs text-gray-500 dark:text-gray-400"),u(b,"class","text-xs text-indigo-600 dark:text-indigo-400 font-medium"),u(a,"class","text-right ml-2"),u(i,"class","flex items-start justify-between"),u(r,"class","flex-1")},m(v,T){I(v,e,T),S&&S.m(e,null),I(v,t,T),I(v,r,T),s(r,i),s(i,l),s(l,o),s(i,d),s(i,a),s(a,f),s(f,p),s(a,j),s(a,b),s(b,_),s(r,m),y&&y.m(r,null),k||(x=R(e,"click",n[8]),k=!0)},p(v,T){v[0].status==="completed"?S||(S=Ge(),S.c(),S.m(e,null)):S&&(S.d(1),S=null),T&1&&z(e,"bg-indigo-500",v[0].status==="completed"),T&1&&z(e,"border-indigo-500",v[0].status==="completed"),T&1&&z(e,"dark:border-indigo-400",v[0].status==="completed"),T&1&&z(e,"dark:bg-indigo-400",v[0].status==="completed"),T&1&&c!==(c=v[0].name+"")&&te(o,c),T&1&&z(l,"text-gray-900",v[0].status==="pending"),T&1&&z(l,"dark:text-white",v[0].status==="pending"),T&1&&z(l,"text-gray-500",v[0].status==="completed"),T&1&&z(l,"dark:text-gray-400",v[0].status==="completed"),T&1&&z(l,"line-through",v[0].status==="completed"),T&1&&h!==(h=v[9](v[0].resetTime)+"")&&te(p,h),T&16&&te(_,v[4]),v[0].description?y?y.p(v,T):(y=Ke(v),y.c(),y.m(r,null)):y&&(y.d(1),y=null)},d(v){v&&D(e),S&&S.d(),v&&D(t),v&&D(r),y&&y.d(),k=!1,x()}}}function Gt(n){let e,t,r,i,l,c,o,d,a,f=n[0].name+"",h,p,j,b,_=n[0].description&&Ye(n);return{c(){e=g("button"),t=re("svg"),r=re("path"),l=w(),c=g("div"),o=w(),d=g("div"),a=g("h4"),h=F(f),p=w(),_&&_.c(),u(r,"stroke-linecap","round"),u(r,"stroke-linejoin","round"),u(r,"stroke-width","2"),u(r,"d","M9 5l7 7-7 7"),u(t,"class",i="w-4 h-4 text-gray-400 dark:text-gray-500 transform transition-transform "+(n[5]?"rotate-90":"")),u(t,"fill","none"),u(t,"stroke","currentColor"),u(t,"viewBox","0 0 24 24"),u(c,"class","w-2 h-8 bg-indigo-500 rounded-full flex-shrink-0"),u(a,"class","font-semibold text-gray-900 dark:text-white text-base"),u(d,"class","flex-1"),u(e,"class","flex items-center gap-3 flex-1 text-left hover:bg-gray-100 dark:hover:bg-gray-700 rounded p-2 -m-2 transition-colors")},m(m,k){I(m,e,k),s(e,t),s(t,r),s(e,l),s(e,c),s(e,o),s(e,d),s(d,a),s(a,h),s(d,p),_&&_.m(d,null),j||(b=R(e,"click",n[7]),j=!0)},p(m,k){k&32&&i!==(i="w-4 h-4 text-gray-400 dark:text-gray-500 transform transition-transform "+(m[5]?"rotate-90":""))&&u(t,"class",i),k&1&&f!==(f=m[0].name+"")&&te(h,f),m[0].description?_?_.p(m,k):(_=Ye(m),_.c(),_.m(d,null)):_&&(_.d(1),_=null)},d(m){m&&D(e),_&&_.d(),j=!1,b()}}}function Ge(n){let e,t;return{c(){e=re("svg"),t=re("path"),u(t,"stroke-linecap","round"),u(t,"stroke-linejoin","round"),u(t,"stroke-width","3"),u(t,"d","M5 13l4 4L19 7"),u(e,"class","w-3 h-3 text-white"),u(e,"fill","none"),u(e,"stroke","currentColor"),u(e,"viewBox","0 0 24 24")},m(r,i){I(r,e,i),s(e,t)},d(r){r&&D(e)}}}function Ke(n){let e,t=n[0].description+"",r;return{c(){e=g("p"),r=F(t),u(e,"class","text-sm mt-1 transition-colors"),z(e,"text-gray-600",n[0].status==="pending"),z(e,"dark:text-gray-300",n[0].status==="pending"),z(e,"text-gray-400",n[0].status==="completed"),z(e,"dark:text-gray-500",n[0].status==="completed")},m(i,l){I(i,e,l),s(e,r)},p(i,l){l&1&&t!==(t=i[0].description+"")&&te(r,t),l&1&&z(e,"text-gray-600",i[0].status==="pending"),l&1&&z(e,"dark:text-gray-300",i[0].status==="pending"),l&1&&z(e,"text-gray-400",i[0].status==="completed"),l&1&&z(e,"dark:text-gray-500",i[0].status==="completed")},d(i){i&&D(e)}}}function Ye(n){let e,t=n[0].description+"",r;return{c(){e=g("p"),r=F(t),u(e,"class","text-sm text-gray-600 dark:text-gray-400 mt-1")},m(i,l){I(i,e,l),s(e,r)},p(i,l){l&1&&t!==(t=i[0].description+"")&&te(r,t)},d(i){i&&D(e)}}}function Ue(n){let e=[],t=new Map,r,i,l=n[6];const c=o=>o[13].id;for(let o=0;o<l.length;o+=1){let d=Ve(n,l,o),a=c(d);t.set(a,e[o]=Qe(a,d))}return{c(){for(let o=0;o<e.length;o+=1)e[o].c();r=je()},m(o,d){for(let a=0;a<e.length;a+=1)e[a]&&e[a].m(o,d);I(o,r,d),i=!0},p(o,d){d&78&&(l=o[6],me(),e=Me(e,d,c,1,o,l,t,r.parentNode,Be,Qe,r,Ve),he())},i(o){if(!i){for(let d=0;d<l.length;d+=1)W(e[d]);i=!0}},o(o){for(let d=0;d<e.length;d+=1)Q(e[d]);i=!1},d(o){for(let d=0;d<e.length;d+=1)e[d].d(o);o&&D(r)}}}function Qe(n,e){let t,r,i;return r=new St({props:{item:e[13],projectId:e[1],allItems:e[2],depth:e[3]+1}}),{key:n,first:null,c(){t=je(),be(r.$$.fragment),this.first=t},m(l,c){I(l,t,c),ce(r,l,c),i=!0},p(l,c){e=l;const o={};c&64&&(o.item=e[13]),c&2&&(o.projectId=e[1]),c&4&&(o.allItems=e[2]),c&8&&(o.depth=e[3]+1),r.$set(o)},i(l){i||(W(r.$$.fragment,l),i=!0)},o(l){Q(r.$$.fragment,l),i=!1},d(l){l&&D(t),fe(r,l)}}}function Kt(n){let e,t,r,i,l;function c(f,h){return f[0].isSection?Gt:Vt}let o=c(n),d=o(n),a=(!n[0].isSection||n[5])&&Ue(n);return{c(){e=g("div"),t=g("div"),d.c(),i=w(),a&&a.c(),u(t,"class",r="flex items-center gap-3 p-3 rounded-lg transition-colors "+(n[0].isSection?"bg-white dark:bg-gray-800 border-l-4 border-l-indigo-500 shadow-sm":"bg-gray-50 dark:bg-gray-700/30 border border-gray-200 dark:border-gray-600 hover:bg-gray-100 dark:hover:bg-gray-700")),z(t,"opacity-60",n[0].status==="completed"&&!n[0].isSection),u(e,"class","space-y-1"),Ce(e,"margin-left",n[3]*.75+"rem")},m(f,h){I(f,e,h),s(e,t),d.m(t,null),s(e,i),a&&a.m(e,null),l=!0},p(f,[h]){o===(o=c(f))&&d?d.p(f,h):(d.d(1),d=o(f),d&&(d.c(),d.m(t,null))),(!l||h&1&&r!==(r="flex items-center gap-3 p-3 rounded-lg transition-colors "+(f[0].isSection?"bg-white dark:bg-gray-800 border-l-4 border-l-indigo-500 shadow-sm":"bg-gray-50 dark:bg-gray-700/30 border border-gray-200 dark:border-gray-600 hover:bg-gray-100 dark:hover:bg-gray-700")))&&u(t,"class",r),(!l||h&1)&&z(t,"opacity-60",f[0].status==="completed"&&!f[0].isSection),!f[0].isSection||f[5]?a?(a.p(f,h),h&33&&W(a,1)):(a=Ue(f),a.c(),W(a,1),a.m(e,null)):a&&(me(),Q(a,1,1,()=>{a=null}),he()),(!l||h&8)&&Ce(e,"margin-left",f[3]*.75+"rem")},i(f){l||(W(a),l=!0)},o(f){Q(a),l=!1},d(f){f&&D(e),d.d(),a&&a.d()}}}function Yt(n){return n.split(":").map(Number)}function Ut(n,e,t){const r=new Date(n);return r.setHours(e,t,0,0),n>=r&&r.setDate(r.getDate()+1),r}function Qt(n,e,t,r){const i=new Date(n),l=n.getDay(),c=(r-l+7)%7;return i.setDate(i.getDate()+c),i.setHours(e,t,0,0),c===0&&n>=i&&i.setDate(i.getDate()+7),i}function Xt(n){if(n<=0)return"Reset now";const e=Math.floor(n/(1e3*60*60)),t=Math.floor(n%(1e3*60*60)/(1e3*60));if(e>24){const r=Math.floor(e/24),i=e%24;return`${r}d ${i}h remaining`}else return e>0?`${e}h ${t}m remaining`:`${t}m remaining`}function Xe(n){const e=new Date,[t,r]=Yt(n.time);let i;n.type==="daily"?i=Ut(e,t,r):i=Qt(e,t,r,n.weekday||0);const l=i.getTime()-e.getTime();return Xt(l)}function Zt(n,e,t){let r,i;vt(n,ne,m=>t(10,i=m));let{item:l}=e,{projectId:c}=e,{allItems:o}=e,{depth:d=0}=e,a="",f,h=!0;Ae(()=>{l.isSection||(t(4,a=Xe(l.resetTime)),f=setInterval(()=>{t(4,a=Xe(l.resetTime))},6e4))}),Nt(()=>{f&&clearInterval(f)});function p(){l.isSection&&ne.toggleSectionExpanded(l.id)}function j(){if(!l.isSection){const m=l.status==="completed"?"pending":"completed";ne.updateTodoStatus(c,l.id,m)}}const b=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"];function _(m){return m.type==="daily"?`Daily at ${m.time}`:`Weekly ${b[m.weekday||0]} at ${m.time}`}return n.$$set=m=>{"item"in m&&t(0,l=m.item),"projectId"in m&&t(1,c=m.projectId),"allItems"in m&&t(2,o=m.allItems),"depth"in m&&t(3,d=m.depth)},n.$$.update=()=>{n.$$.dirty&1025&&(l.isSection?i.uiState&&i.uiState.expandedSections?t(5,h=i.uiState.expandedSections[l.id]===!0):t(5,h=!1):t(5,h=!0)),n.$$.dirty&5&&t(6,r=o.filter(m=>m.parentId===l.id))},[l,c,o,d,a,h,r,p,j,_,i]}class St extends ke{constructor(e){super(),_e(this,e,Zt,Kt,ge,{item:0,projectId:1,allItems:2,depth:3})}}function Ze(n,e,t){const r=n.slice();return r[9]=e[t],r}function et(n){let e,t=n[0].description+"",r;return{c(){e=g("p"),r=F(t),u(e,"class","text-sm text-gray-600 dark:text-gray-300 mb-3")},m(i,l){I(i,e,l),s(e,r)},p(i,l){l&1&&t!==(t=i[0].description+"")&&te(r,t)},d(i){i&&D(e)}}}function tt(n){let e,t=[],r=new Map,i,l=n[4];const c=o=>o[9].id;for(let o=0;o<l.length;o+=1){let d=Ze(n,l,o),a=c(d);r.set(a,t[o]=nt(a,d))}return{c(){e=g("div");for(let o=0;o<t.length;o+=1)t[o].c();u(e,"class","border-t border-gray-200 dark:border-gray-700 pt-4 space-y-2")},m(o,d){I(o,e,d);for(let a=0;a<t.length;a+=1)t[a]&&t[a].m(e,null);i=!0},p(o,d){d&17&&(l=o[4],me(),t=Me(t,d,c,1,o,l,r,e,Be,nt,null,Ze),he())},i(o){if(!i){for(let d=0;d<l.length;d+=1)W(t[d]);i=!0}},o(o){for(let d=0;d<t.length;d+=1)Q(t[d]);i=!1},d(o){o&&D(e);for(let d=0;d<t.length;d+=1)t[d].d()}}}function nt(n,e){let t,r,i;return r=new St({props:{item:e[9],projectId:e[0].id,allItems:e[0].items,depth:0}}),{key:n,first:null,c(){t=je(),be(r.$$.fragment),this.first=t},m(l,c){I(l,t,c),ce(r,l,c),i=!0},p(l,c){e=l;const o={};c&16&&(o.item=e[9]),c&1&&(o.projectId=e[0].id),c&1&&(o.allItems=e[0].items),r.$set(o)},i(l){i||(W(r.$$.fragment,l),i=!0)},o(l){Q(r.$$.fragment,l),i=!1},d(l){l&&D(t),fe(r,l)}}}function en(n){let e,t,r,i,l,c=n[0].name+"",o,d,a,f,h,p,j,b,_,m,k,x,S,y,v,T,E,C,P,V,q,K,Z,$,A=n[0].description&&et(n),H=n[3]&&tt(n);return{c(){e=g("div"),t=g("div"),r=g("div"),i=g("div"),l=g("h3"),o=F(c),d=w(),A&&A.c(),a=w(),f=g("div"),h=g("div"),p=g("div"),j=w(),b=g("span"),_=F(n[2]),m=F("/"),k=F(n[1]),x=w(),S=g("div"),y=g("button"),v=re("svg"),T=re("path"),P=w(),V=g("button"),V.innerHTML='<svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"></path></svg>',q=w(),H&&H.c(),u(l,"class","text-lg font-semibold text-gray-900 dark:text-white mb-2"),u(p,"class","bg-indigo-600 dark:bg-indigo-500 h-2 rounded-full transition-all duration-300"),Ce(p,"width",n[5]+"%"),u(h,"class","flex-1 bg-gray-200 dark:bg-gray-700 rounded-full h-2"),u(b,"class","text-sm font-medium text-gray-900 dark:text-white"),u(f,"class","flex items-center gap-3 mb-3"),u(i,"class","flex-1"),u(T,"stroke-linecap","round"),u(T,"stroke-linejoin","round"),u(T,"stroke-width","2"),u(T,"d","M19 9l-7 7-7-7"),u(v,"class",E="w-5 h-5 transform transition-transform "+(n[3]?"rotate-180":"")),u(v,"fill","none"),u(v,"stroke","currentColor"),u(v,"viewBox","0 0 24 24"),u(y,"class","p-2 rounded-lg text-gray-600 dark:text-gray-300 hover:text-gray-900 dark:hover:text-white hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors"),u(y,"title",C=n[3]?"Collapse":"Expand"),u(V,"class","p-2 rounded-lg text-gray-400 hover:text-red-600 hover:bg-red-50 dark:hover:bg-red-900/20 transition-colors"),u(V,"title","Delete project"),u(S,"class","flex items-center gap-2 ml-4"),u(r,"class","flex items-start justify-between mb-4"),u(t,"class","p-6"),u(e,"class","bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700 overflow-hidden")},m(B,G){I(B,e,G),s(e,t),s(t,r),s(r,i),s(i,l),s(l,o),s(i,d),A&&A.m(i,null),s(i,a),s(i,f),s(f,h),s(h,p),s(f,j),s(f,b),s(b,_),s(b,m),s(b,k),s(r,x),s(r,S),s(S,y),s(y,v),s(v,T),s(S,P),s(S,V),s(t,q),H&&H.m(t,null),K=!0,Z||($=[R(y,"click",n[6]),R(V,"click",n[7])],Z=!0)},p(B,[G]){(!K||G&1)&&c!==(c=B[0].name+"")&&te(o,c),B[0].description?A?A.p(B,G):(A=et(B),A.c(),A.m(i,a)):A&&(A.d(1),A=null),(!K||G&32)&&Ce(p,"width",B[5]+"%"),(!K||G&4)&&te(_,B[2]),(!K||G&2)&&te(k,B[1]),(!K||G&8&&E!==(E="w-5 h-5 transform transition-transform "+(B[3]?"rotate-180":"")))&&u(v,"class",E),(!K||G&8&&C!==(C=B[3]?"Collapse":"Expand"))&&u(y,"title",C),B[3]?H?(H.p(B,G),G&8&&W(H,1)):(H=tt(B),H.c(),W(H,1),H.m(t,null)):H&&(me(),Q(H,1,1,()=>{H=null}),he())},i(B){K||(W(H),K=!0)},o(B){Q(H),K=!1},d(B){B&&D(e),A&&A.d(),H&&H.d(),Z=!1,ie($)}}}function tn(n,e,t){let r,i,l,c,o;vt(n,ne,p=>t(8,o=p));let{project:d}=e,a=!1;function f(){ne.toggleProjectExpanded(d.id)}function h(){confirm(`Are you sure you want to delete "${d.name}"?`)&&ne.deleteProject(d.id)}return n.$$set=p=>{"project"in p&&t(0,d=p.project)},n.$$.update=()=>{n.$$.dirty&257&&(o.uiState&&o.uiState.expandedProjects?t(3,a=o.uiState.expandedProjects[d.id]===!0):t(3,a=!1)),n.$$.dirty&1&&t(2,r=d.items.filter(p=>!p.isSection&&p.status==="completed").length),n.$$.dirty&1&&t(1,i=d.items.filter(p=>!p.isSection).length),n.$$.dirty&6&&t(5,l=i>0?r/i*100:0),n.$$.dirty&1&&t(4,c=d.items.filter(p=>!p.parentId))},[d,i,r,a,c,l,f,h,o]}class nn extends ke{constructor(e){super(),_e(this,e,tn,en,ge,{project:0})}}function rt(n,e,t){const r=n.slice();return r[47]=e[t],r}function it(n,e,t){const r=n.slice();return r[44]=e[t],r}function rn(n){let e,t,r,i,l,c,o,d,a,f,h,p,j,b,_,m,k,x,S,y,v,T,E,C,P=[],V=new Map,q,K,Z,$,A,H,B,G,oe,de,Y=n[4].length>0&&lt(),se=n[19]();const ue=O=>O[47].id;for(let O=0;O<se.length;O+=1){let L=rt(n,se,O),U=ue(L);V.set(U,P[O]=st(U,L))}let X=n[4].length===0&&at();return{c(){e=g("div"),t=g("div"),r=g("button"),r.textContent="\u2190 Back to Presets",i=w(),l=g("div"),c=g("div"),o=g("label"),o.textContent="TODO Name *",d=w(),a=g("input"),f=w(),h=g("div"),p=g("label"),p.textContent="Description (Optional)",j=w(),b=g("textarea"),_=w(),m=g("div"),k=g("div"),x=g("div"),S=g("h3"),S.textContent="Tasks & Sections",y=w(),v=g("button"),v.innerHTML=`<svg class="w-4 h-4 mr-1" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6v6m0 0v6m0-6h6m-6 0H6"></path></svg>
                  Add Item`,T=w(),Y&&Y.c(),E=w(),C=g("div");for(let O=0;O<P.length;O+=1)P[O].c();q=w(),X&&X.c(),K=w(),Z=g("div"),$=g("button"),$.textContent="Cancel",A=w(),H=g("button"),B=F("Create TODO"),u(r,"class","text-sm text-indigo-600 dark:text-indigo-400 hover:text-indigo-700 dark:hover:text-indigo-300 mb-4"),u(o,"class","block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"),u(a,"type","text"),u(a,"class","w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 dark:bg-gray-700 dark:text-white"),u(a,"placeholder","Enter TODO name"),u(p,"class","block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"),u(b,"class","w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 dark:bg-gray-700 dark:text-white"),u(b,"placeholder","Describe your TODO"),u(b,"rows","2"),u(l,"class","space-y-4"),u(S,"class","text-lg font-medium text-gray-900 dark:text-white"),u(v,"class","inline-flex items-center px-3 py-1 text-sm font-medium text-indigo-600 dark:text-indigo-400 hover:text-indigo-700 dark:hover:text-indigo-300"),u(x,"class","flex items-center justify-between mb-2"),u(k,"class","mb-4"),u(C,"class","space-y-2 max-h-40 overflow-y-auto"),u($,"class","flex-1 px-4 py-2 text-gray-700 dark:text-gray-300 border border-gray-300 dark:border-gray-600 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors"),H.disabled=G=!n[2].trim(),u(H,"class","flex-1 px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors"),u(Z,"class","flex gap-3 pt-6 border-t border-gray-200 dark:border-gray-600"),u(e,"class","space-y-6")},m(O,L){I(O,e,L),s(e,t),s(t,r),s(t,i),s(t,l),s(l,c),s(c,o),s(c,d),s(c,a),ae(a,n[2]),s(l,f),s(l,h),s(h,p),s(h,j),s(h,b),ae(b,n[3]),s(e,_),s(e,m),s(m,k),s(k,x),s(x,S),s(x,y),s(x,v),s(k,T),Y&&Y.m(k,null),s(m,E),s(m,C);for(let U=0;U<P.length;U+=1)P[U]&&P[U].m(C,null);s(C,q),X&&X.m(C,null),s(e,K),s(e,Z),s(Z,$),s(Z,A),s(Z,H),s(H,B),oe||(de=[R(r,"click",n[24]),R(a,"input",n[25]),R(b,"input",n[26]),R(v,"click",n[11]),R($,"click",n[20]),R(H,"click",n[10])],oe=!0)},p(O,L){L[0]&4&&a.value!==O[2]&&ae(a,O[2]),L[0]&8&&ae(b,O[3]),O[4].length>0?Y||(Y=lt(),Y.c(),Y.m(k,null)):Y&&(Y.d(1),Y=null),L[0]&1032336&&(se=O[19](),P=Me(P,L,ue,1,O,se,V,C,xt,st,q,rt)),O[4].length===0?X||(X=at(),X.c(),X.m(C,null)):X&&(X.d(1),X=null),L[0]&4&&G!==(G=!O[2].trim())&&(H.disabled=G)},d(O){O&&D(e),Y&&Y.d();for(let L=0;L<P.length;L+=1)P[L].d();X&&X.d(),oe=!1,ie(de)}}}function ln(n){let e,t,r,i,l=[],c=new Map,o,d,a,f,h,p=n[1];const j=b=>b[44].name;for(let b=0;b<p.length;b+=1){let _=it(n,p,b),m=j(_);c.set(m,l[b]=ut(m,_))}return{c(){e=g("div"),t=g("div"),t.innerHTML=`<h3 class="text-lg font-medium text-gray-900 dark:text-white mb-2">Choose a Preset</h3> 
            <p class="text-gray-600 dark:text-gray-300">Start with a pre-configured template or create a custom TODO</p>`,r=w(),i=g("div");for(let b=0;b<l.length;b+=1)l[b].c();o=w(),d=g("div"),a=g("button"),a.innerHTML=`<svg class="w-8 h-8 mx-auto text-gray-400 dark:text-gray-500 mb-2" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="1" d="M12 6v6m0 0v6m0-6h6m-6 0H6"></path></svg> 
              <span class="text-sm font-medium text-gray-900 dark:text-white">Create Custom TODO</span>`,u(t,"class","text-center"),u(i,"class","grid gap-4"),u(a,"class","w-full p-4 border-2 border-dashed border-gray-300 dark:border-gray-600 rounded-lg text-center hover:border-indigo-500 hover:bg-indigo-50 dark:hover:bg-indigo-900/20 transition-colors"),u(d,"class","border-t border-gray-200 dark:border-gray-600 pt-6"),u(e,"class","space-y-6")},m(b,_){I(b,e,_),s(e,t),s(e,r),s(e,i);for(let m=0;m<l.length;m+=1)l[m]&&l[m].m(i,null);s(e,o),s(e,d),s(d,a),f||(h=R(a,"click",n[9]),f=!0)},p(b,_){_[0]&258&&(p=b[1],l=Me(l,_,j,1,b,p,c,i,xt,ut,null,it))},d(b){b&&D(e);for(let _=0;_<l.length;_+=1)l[_].d();f=!1,h()}}}function lt(n){let e;return{c(){e=g("p"),e.textContent="\u{1F4A1} Drag tasks onto sections to organize them, or drag them to other positions to reorder",u(e,"class","text-xs text-gray-500 dark:text-gray-400")},m(t,r){I(t,e,r)},d(t){t&&D(e)}}}function on(n){let e;return{c(){e=g("span"),e.textContent="\u2514\u2500",u(e,"class","text-gray-400 dark:text-gray-500")},m(t,r){I(t,e,r)},d(t){t&&D(e)}}}function ot(n){let e,t=n[4].filter(l).length+"",r,i;function l(...c){return n[27](n[47],...c)}return{c(){e=g("span"),r=F(t),i=F(" items"),u(e,"class","text-xs text-blue-600 dark:text-blue-400 bg-blue-100 dark:bg-blue-900 px-2 py-1 rounded")},m(c,o){I(c,e,o),s(e,r),s(e,i)},p(c,o){n=c,o[0]&16&&t!==(t=n[4].filter(l).length+"")&&te(r,t)},d(c){c&&D(e)}}}function sn(n){let e,t=n[47].description+"",r;return{c(){e=g("p"),r=F(t),u(e,"class","text-sm text-gray-600 dark:text-gray-300 flex-1")},m(i,l){I(i,e,l),s(e,r)},p:ee,d(i){i&&D(e)}}}function st(n,e){let t,r,i,l,c=e[47].isSection?"\u{1F4C1}":"\u{1F4CB}",o,d,a=e[47].name+"",f,h,p=e[47].isSection&&e[4].filter(T).length>0,j,b,_,m,k,x,S,y,v;function T(...$){return e[22](e[47],...$)}let E=e[47].level>0&&on(),C=p&&ot(e),P=e[47].description&&sn(e);function V(){return e[28](e[47])}function q(...$){return e[29](e[47],...$)}function K(...$){return e[30](e[47],...$)}function Z(...$){return e[31](e[47],...$)}return{key:n,first:null,c(){var $;t=g("div"),r=g("div"),E&&E.c(),i=w(),l=g("span"),o=F(c),d=w(),f=F(a),h=w(),C&&C.c(),j=w(),P&&P.c(),b=w(),_=g("div"),m=g("span"),m.textContent="\u22EE\u22EE",k=w(),x=g("button"),x.innerHTML='<svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"></path></svg>',u(l,"class","font-medium text-gray-900 dark:text-white"),u(r,"class","flex items-center gap-2 flex-1"),u(m,"class","text-xs text-gray-400 cursor-grab"),u(x,"class","text-gray-400 hover:text-red-600"),u(_,"class","flex items-center gap-2"),u(t,"class",S="flex items-center gap-3 p-3 border border-gray-200 dark:border-gray-600 rounded-lg cursor-move transition-all duration-200 "+((($=e[7])==null?void 0:$.id)===e[47].id?"opacity-50 scale-95":"")+" "+(e[47].isSection?"bg-blue-50 dark:bg-blue-900/20 border-blue-200 dark:border-blue-700":"")+" "+(e[7]&&e[7].id!==e[47].id&&e[47].isSection&&!e[7].isSection?"ring-2 ring-blue-300 dark:ring-blue-600":"")),Ce(t,"margin-left",e[47].level*20+"px"),u(t,"draggable","true"),this.first=t},m($,A){I($,t,A),s(t,r),E&&E.m(r,null),s(r,i),s(r,l),s(l,o),s(l,d),s(l,f),s(r,h),C&&C.m(r,null),s(t,j),P&&P.m(t,null),s(t,b),s(t,_),s(_,m),s(_,k),s(_,x),y||(v=[R(x,"click",V),R(t,"dragstart",q),R(t,"dragover",K),R(t,"drop",Z),R(t,"dragend",e[18])],y=!0)},p($,A){var H;e=$,A[0]&16&&(p=e[47].isSection&&e[4].filter(T).length>0),p?C?C.p(e,A):(C=ot(e),C.c(),C.m(r,null)):C&&(C.d(1),C=null),e[47].description&&P.p(e,A),A[0]&128&&S!==(S="flex items-center gap-3 p-3 border border-gray-200 dark:border-gray-600 rounded-lg cursor-move transition-all duration-200 "+(((H=e[7])==null?void 0:H.id)===e[47].id?"opacity-50 scale-95":"")+" "+(e[47].isSection?"bg-blue-50 dark:bg-blue-900/20 border-blue-200 dark:border-blue-700":"")+" "+(e[7]&&e[7].id!==e[47].id&&e[47].isSection&&!e[7].isSection?"ring-2 ring-blue-300 dark:ring-blue-600":""))&&u(t,"class",S)},d($){$&&D(t),E&&E.d(),C&&C.d(),P&&P.d(),y=!1,ie(v)}}}function at(n){let e;return{c(){e=g("div"),e.innerHTML=`<svg class="w-12 h-12 mx-auto mb-3 opacity-50" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="1" d="M9 5H7a2 2 0 00-2 2v10a2 2 0 002 2h8a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"></path></svg> 
                  <p class="text-sm">No tasks or sections yet</p> 
                  <p class="text-xs">Click &quot;Add Item&quot; to get started</p>`,u(e,"class","text-center py-8 text-gray-500 dark:text-gray-400")},m(t,r){I(t,e,r)},d(t){t&&D(e)}}}function dt(n){let e,t=n[44].description+"",r;return{c(){e=g("p"),r=F(t),u(e,"class","text-sm text-gray-600 dark:text-gray-300 mb-2")},m(i,l){I(i,e,l),s(e,r)},p(i,l){l[0]&2&&t!==(t=i[44].description+"")&&te(r,t)},d(i){i&&D(e)}}}function ut(n,e){let t,r,i=e[44].name+"",l,c,o,d,a=e[44].items.filter(pt).length+"",f,h,p=e[44].items.filter(mt).length+"",j,b,_,m,k,x=e[44].description&&dt(e);function S(){return e[23](e[44])}return{key:n,first:null,c(){t=g("button"),r=g("h4"),l=F(i),c=w(),x&&x.c(),o=w(),d=g("p"),f=F(a),h=F(` tasks, 
                  `),j=F(p),b=F(" sections"),_=w(),u(r,"class","font-medium text-gray-900 dark:text-white mb-1"),u(d,"class","text-xs text-gray-500 dark:text-gray-400"),u(t,"class","p-4 border border-gray-200 dark:border-gray-600 rounded-lg text-left hover:border-indigo-500 hover:bg-indigo-50 dark:hover:bg-indigo-900/20 transition-colors"),this.first=t},m(y,v){I(y,t,v),s(t,r),s(r,l),s(t,c),x&&x.m(t,null),s(t,o),s(t,d),s(d,f),s(d,h),s(d,j),s(d,b),s(t,_),m||(k=R(t,"click",S),m=!0)},p(y,v){e=y,v[0]&2&&i!==(i=e[44].name+"")&&te(l,i),e[44].description?x?x.p(e,v):(x=dt(e),x.c(),x.m(t,o)):x&&(x.d(1),x=null),v[0]&2&&a!==(a=e[44].items.filter(pt).length+"")&&te(f,a),v[0]&2&&p!==(p=e[44].items.filter(mt).length+"")&&te(j,p)},d(y){y&&D(t),x&&x.d(),m=!1,k()}}}function ct(n){let e,t,r,i=n[5].isSection?"Add Section":"Add Task",l,c,o,d,a,f,h,p,j,b,_,m,k,x,S,y,v,T,E,C,P,V,q,K,Z,$,A,H,B,G,oe=n[5].isSection?"Section":"Task",de,Y,se,ue,X,O=!n[5].isSection&&ft(n);return se=Ot(n[33][0]),{c(){e=g("div"),t=g("div"),r=g("h3"),l=F(i),c=w(),o=g("div"),d=g("div"),a=g("label"),f=g("input"),h=w(),p=g("span"),p.textContent="Task",j=w(),b=g("label"),_=g("input"),m=w(),k=g("span"),k.textContent="Section",x=w(),S=g("div"),y=g("label"),y.textContent="Name *",v=w(),T=g("input"),E=w(),C=g("div"),P=g("label"),P.textContent="Description",V=w(),q=g("input"),K=w(),O&&O.c(),Z=w(),$=g("div"),A=g("button"),A.textContent="Cancel",H=w(),B=g("button"),G=F("Add "),de=F(oe),u(r,"class","text-lg font-medium text-gray-900 dark:text-white mb-4"),u(f,"type","radio"),f.__value=!1,f.value=f.__value,u(f,"class","mr-2"),u(p,"class","text-sm text-gray-700 dark:text-gray-300"),u(a,"class","flex items-center"),u(_,"type","radio"),_.__value=!0,_.value=_.__value,u(_,"class","mr-2"),u(k,"class","text-sm text-gray-700 dark:text-gray-300"),u(b,"class","flex items-center"),u(d,"class","flex gap-4 mb-4"),u(y,"class","block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"),u(T,"type","text"),u(T,"class","w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 dark:bg-gray-700 dark:text-white"),u(P,"class","block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"),u(q,"type","text"),u(q,"class","w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 dark:bg-gray-700 dark:text-white"),u(o,"class","space-y-4"),u(A,"class","flex-1 px-4 py-2 text-gray-700 dark:text-gray-300 border border-gray-300 dark:border-gray-600 rounded hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors"),B.disabled=Y=!n[5].name.trim(),u(B,"class","flex-1 px-4 py-2 bg-indigo-600 text-white rounded hover:bg-indigo-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors"),u($,"class","flex gap-2 mt-6"),u(t,"class","bg-white dark:bg-gray-800 rounded-lg shadow-xl max-w-md w-full p-6"),u(e,"class","fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center p-4 z-[70]"),se.p(f,_)},m(L,U){I(L,e,U),s(e,t),s(t,r),s(r,l),s(t,c),s(t,o),s(o,d),s(d,a),s(a,f),f.checked=f.__value===n[5].isSection,s(a,h),s(a,p),s(d,j),s(d,b),s(b,_),_.checked=_.__value===n[5].isSection,s(b,m),s(b,k),s(o,x),s(o,S),s(S,y),s(S,v),s(S,T),ae(T,n[5].name),s(o,E),s(o,C),s(C,P),s(C,V),s(C,q),ae(q,n[5].description),s(o,K),O&&O.m(o,null),s(t,Z),s(t,$),s($,A),s($,H),s($,B),s(B,G),s(B,de),ue||(X=[R(f,"change",n[32]),R(_,"change",n[34]),R(T,"input",n[35]),R(q,"input",n[36]),R(A,"click",n[13]),R(B,"click",n[12])],ue=!0)},p(L,U){U[0]&32&&i!==(i=L[5].isSection?"Add Section":"Add Task")&&te(l,i),U[0]&32&&(f.checked=f.__value===L[5].isSection),U[0]&32&&(_.checked=_.__value===L[5].isSection),U[0]&32&&T.value!==L[5].name&&ae(T,L[5].name),U[0]&32&&q.value!==L[5].description&&ae(q,L[5].description),L[5].isSection?O&&(O.d(1),O=null):O?O.p(L,U):(O=ft(L),O.c(),O.m(o,null)),U[0]&32&&oe!==(oe=L[5].isSection?"Section":"Task")&&te(de,oe),U[0]&32&&Y!==(Y=!L[5].name.trim())&&(B.disabled=Y)},d(L){L&&D(e),O&&O.d(),se.r(),ue=!1,ie(X)}}}function ft(n){let e,t,r,i,l,c,o,d,a,f,h,p,j,b,_,m=n[5].resetTime.type==="weekly"&&gt(n);return{c(){e=g("div"),t=g("label"),t.textContent="Reset Schedule",r=w(),i=g("select"),l=g("option"),l.textContent="Daily",c=g("option"),c.textContent="Weekly",o=w(),d=g("div"),a=g("div"),f=g("label"),f.textContent="Time",h=w(),p=g("input"),j=w(),m&&m.c(),u(t,"class","block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"),l.__value="daily",l.value=l.__value,c.__value="weekly",c.value=c.__value,u(i,"class","w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 dark:bg-gray-700 dark:text-white"),n[5].resetTime.type===void 0&&Ie(()=>n[37].call(i)),u(f,"class","block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"),u(p,"type","time"),u(p,"class","w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 dark:bg-gray-700 dark:text-white"),u(a,"class","flex-1"),u(d,"class","flex gap-2")},m(k,x){I(k,e,x),s(e,t),s(e,r),s(e,i),s(i,l),s(i,c),Pe(i,n[5].resetTime.type,!0),I(k,o,x),I(k,d,x),s(d,a),s(a,f),s(a,h),s(a,p),ae(p,n[5].resetTime.time),s(d,j),m&&m.m(d,null),b||(_=[R(i,"change",n[37]),R(p,"input",n[38])],b=!0)},p(k,x){x[0]&32&&Pe(i,k[5].resetTime.type),x[0]&32&&ae(p,k[5].resetTime.time),k[5].resetTime.type==="weekly"?m?m.p(k,x):(m=gt(k),m.c(),m.m(d,null)):m&&(m.d(1),m=null)},d(k){k&&D(e),k&&D(o),k&&D(d),m&&m.d(),b=!1,ie(_)}}}function gt(n){let e,t,r,i,l,c,o,d,a,f,h,p,j;return{c(){e=g("div"),t=g("label"),t.textContent="Day",r=w(),i=g("select"),l=g("option"),l.textContent="Sunday",c=g("option"),c.textContent="Monday",o=g("option"),o.textContent="Tuesday",d=g("option"),d.textContent="Wednesday",a=g("option"),a.textContent="Thursday",f=g("option"),f.textContent="Friday",h=g("option"),h.textContent="Saturday",u(t,"class","block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"),l.__value=0,l.value=l.__value,c.__value=1,c.value=c.__value,o.__value=2,o.value=o.__value,d.__value=3,d.value=d.__value,a.__value=4,a.value=a.__value,f.__value=5,f.value=f.__value,h.__value=6,h.value=h.__value,u(i,"class","w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 dark:bg-gray-700 dark:text-white"),n[5].resetTime.weekday===void 0&&Ie(()=>n[39].call(i)),u(e,"class","flex-1")},m(b,_){I(b,e,_),s(e,t),s(e,r),s(e,i),s(i,l),s(i,c),s(i,o),s(i,d),s(i,a),s(i,f),s(i,h),Pe(i,n[5].resetTime.weekday,!0),p||(j=R(i,"change",n[39]),p=!0)},p(b,_){_[0]&32&&Pe(i,b[5].resetTime.weekday)},d(b){b&&D(e),p=!1,j()}}}function an(n){let e,t,r,i,l,c,o,d,a,f,h,p;function j(k,x){return k[0]?ln:rn}let b=j(n),_=b(n),m=n[6]&&n[5]&&ct(n);return{c(){e=g("div"),t=g("div"),r=g("div"),i=g("div"),l=g("h2"),l.textContent="Create New TODO",c=w(),o=g("button"),o.innerHTML='<svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg>',d=w(),_.c(),a=w(),m&&m.c(),f=je(),u(l,"class","text-2xl font-bold text-gray-900 dark:text-white"),u(o,"class","text-gray-400 hover:text-gray-600 dark:hover:text-gray-200"),u(i,"class","flex items-center justify-between mb-6"),u(r,"class","p-6"),u(t,"class","bg-white dark:bg-gray-800 rounded-xl shadow-xl max-w-2xl w-full max-h-[90vh] overflow-y-auto"),u(e,"class","fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50")},m(k,x){I(k,e,x),s(e,t),s(t,r),s(r,i),s(i,l),s(i,c),s(i,o),s(r,d),_.m(r,null),I(k,a,x),m&&m.m(k,x),I(k,f,x),h||(p=[R(o,"click",n[20]),R(e,"click",n[21])],h=!0)},p(k,x){b===(b=j(k))&&_?_.p(k,x):(_.d(1),_=b(k),_&&(_.c(),_.m(r,null))),k[6]&&k[5]?m?m.p(k,x):(m=ct(k),m.c(),m.m(f.parentNode,f)):m&&(m.d(1),m=null)},i:ee,o:ee,d(k){k&&D(e),_.d(),k&&D(a),m&&m.d(k),k&&D(f),h=!1,ie(p)}}}function Oe(){return Math.random().toString(36).substr(2,9)}const pt=n=>!n.isSection,mt=n=>n.isSection;function dn(n,e,t){const r=$t();let i=!0,l=[],c=null,o="",d="",a=[],f=null,h=!1,p=null;Ae(async()=>{await j()});async function j(){try{const M=["mmo-dailies","gacha-game"],N=await Promise.all(M.map(async J=>{const ye=await fetch(`/todo/presets/${J}.json`);return ye.ok?await ye.json():null}));t(1,l=N.filter(J=>J!==null))}catch(M){console.error("Failed to load presets:",M)}}function b(M){c=M,_()}function _(){if(!c)return;const M={id:Oe(),name:c.name,description:c.description,items:c.items.map(N=>({...N,id:Oe(),status:"pending",lastReset:0,parentId:null})),createdAt:Date.now(),isPreset:!0};ne.addProject(M),q()}function m(){t(0,i=!1),c=null}function k(){if(!o.trim())return;const M={id:Oe(),name:o.trim(),description:d.trim()||void 0,items:a,createdAt:Date.now()};ne.addProject(M),q()}function x(){t(6,h=!0),t(5,f={id:Oe(),name:"",description:"",status:"pending",resetTime:{type:"daily",time:"20:00"},lastReset:0,parentId:void 0,isSection:!1})}function S(){if(!(f!=null&&f.name.trim()))return;const M=a.findIndex(N=>N.id===f.id);M>=0?t(4,a[M]={...f},a):t(4,a=[...a,{...f}]),y()}function y(){t(5,f=null),t(6,h=!1)}function v(M){const N=a.find(J=>J.id===M);N!=null&&N.isSection?t(4,a=a.map(J=>J.parentId===M?{...J,parentId:void 0}:J).filter(J=>J.id!==M)):t(4,a=a.filter(J=>J.id!==M))}function T(M,N){t(7,p=N),M.dataTransfer.effectAllowed="move"}function E(M,N){M.preventDefault(),p&&p.id!==N.id&&(M.dataTransfer.dropEffect="move")}function C(M,N){M.preventDefault(),p&&p.id!==N.id&&(N.isSection&&!p.isSection?t(4,a=a.map(J=>J.id===p.id?{...J,parentId:N.id}:J)):!N.isSection&&!p.isSection&&N.parentId?t(4,a=a.map(J=>J.id===p.id?{...J,parentId:N.parentId}:J)):!N.parentId&&!N.isSection&&t(4,a=a.map(J=>J.id===p.id?{...J,parentId:void 0}:J))),t(7,p=null)}function P(){t(7,p=null)}function V(){const M=a.filter(ye=>!ye.parentId),N=[];function J(ye,Re){ye.forEach(Ne=>{if(N.push({...Ne,level:Re}),Ne.isSection){const Je=a.filter(Dt=>Dt.parentId===Ne.id);Je.length>0&&J(Je,Re+1)}})}return J(M,0),N}function q(){r("close")}function K(M){M.target===M.currentTarget&&q()}const Z=[[]],$=(M,N)=>N.parentId===M.id,A=M=>b(M),H=()=>t(0,i=!0);function B(){o=this.value,t(2,o)}function G(){d=this.value,t(3,d)}const oe=(M,N)=>N.parentId===M.id,de=M=>v(M.id),Y=(M,N)=>T(N,M),se=(M,N)=>E(N,M),ue=(M,N)=>C(N,M);function X(){f.isSection=this.__value,t(5,f)}function O(){f.isSection=this.__value,t(5,f)}function L(){f.name=this.value,t(5,f)}function U(){f.description=this.value,t(5,f)}function jt(){f.resetTime.type=Fe(this),t(5,f)}function Tt(){f.resetTime.time=this.value,t(5,f)}function Ct(){f.resetTime.weekday=Fe(this),t(5,f)}return[i,l,o,d,a,f,h,p,b,m,k,x,S,y,v,T,E,C,P,V,q,K,$,A,H,B,G,oe,de,Y,se,ue,X,Z,O,L,U,jt,Tt,Ct]}class un extends ke{constructor(e){super(),_e(this,e,dn,an,ge,{},null,[-1,-1])}}function cn(n){let e,t;return{c(){e=re("svg"),t=re("path"),u(t,"stroke-linecap","round"),u(t,"stroke-linejoin","round"),u(t,"stroke-width","2"),u(t,"d","M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z"),u(e,"class","w-5 h-5"),u(e,"fill","none"),u(e,"stroke","currentColor"),u(e,"viewBox","0 0 24 24")},m(r,i){I(r,e,i),s(e,t)},d(r){r&&D(e)}}}function fn(n){let e,t;return{c(){e=re("svg"),t=re("path"),u(t,"stroke-linecap","round"),u(t,"stroke-linejoin","round"),u(t,"stroke-width","2"),u(t,"d","M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z"),u(e,"class","w-5 h-5"),u(e,"fill","none"),u(e,"stroke","currentColor"),u(e,"viewBox","0 0 24 24")},m(r,i){I(r,e,i),s(e,t)},d(r){r&&D(e)}}}function gn(n){let e,t,r,i,l,c,o,d;function a(p,j){return p[0]==="light"?fn:cn}let f=a(n),h=f(n);return{c(){e=g("header"),t=g("div"),r=g("div"),i=g("div"),i.innerHTML=`<svg class="w-8 h-8 text-indigo-600 dark:text-indigo-400 mr-3" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg> 
        <span class="text-xl font-semibold text-gray-900 dark:text-white">Game TODO</span>`,l=w(),c=g("button"),h.c(),u(i,"class","flex items-center"),u(c,"class","p-2 rounded-lg text-gray-600 dark:text-gray-300 hover:text-gray-900 dark:hover:text-white hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors"),u(c,"title","Toggle theme"),u(r,"class","flex justify-between items-center py-4"),u(t,"class","max-w-7xl mx-auto px-4 sm:px-6 lg:px-8"),u(e,"class","bg-white dark:bg-gray-800 shadow-sm border-b border-gray-200 dark:border-gray-700")},m(p,j){I(p,e,j),s(e,t),s(t,r),s(r,i),s(r,l),s(r,c),h.m(c,null),o||(d=R(c,"click",n[1]),o=!0)},p(p,[j]){f!==(f=a(p))&&(h.d(1),h=f(p),h&&(h.c(),h.m(c,null)))},i:ee,o:ee,d(p){p&&D(e),h.d(),o=!1,d()}}}function pn(n,e,t){let r="light";ne.subscribe(l=>{t(0,r=l.settings.theme),typeof document<"u"&&document.documentElement.classList.toggle("dark",r==="dark")});function i(){const l=r==="light"?"dark":"light";ne.updateSettings({theme:l})}return[r,i]}class mn extends ke{constructor(e){super(),_e(this,e,pn,gn,ge,{})}}function ht(n,e,t){const r=n.slice();return r[4]=e[t],r}function hn(n){let e,t=[],r=new Map,i,l=n[1];const c=o=>o[4].id;for(let o=0;o<l.length;o+=1){let d=ht(n,l,o),a=c(d);r.set(a,t[o]=bt(a,d))}return{c(){e=g("div");for(let o=0;o<t.length;o+=1)t[o].c();u(e,"class","grid gap-6 md:grid-cols-2 lg:grid-cols-3")},m(o,d){I(o,e,d);for(let a=0;a<t.length;a+=1)t[a]&&t[a].m(e,null);i=!0},p(o,d){d&2&&(l=o[1],me(),t=Me(t,d,c,1,o,l,r,e,Be,bt,null,ht),he())},i(o){if(!i){for(let d=0;d<l.length;d+=1)W(t[d]);i=!0}},o(o){for(let d=0;d<t.length;d+=1)Q(t[d]);i=!1},d(o){o&&D(e);for(let d=0;d<t.length;d+=1)t[d].d()}}}function bn(n){let e,t,r,i,l,c,o,d,a,f,h;return{c(){e=g("div"),t=re("svg"),r=re("path"),i=w(),l=g("h2"),l.textContent="No TODOs yet",c=w(),o=g("p"),o.textContent="Create your first TODO to start tracking game activities",d=w(),a=g("button"),a.innerHTML=`<svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6v6m0 0v6m0-6h6m-6 0H6"></path></svg>
        Create Your First TODO`,u(r,"stroke-linecap","round"),u(r,"stroke-linejoin","round"),u(r,"stroke-width","1"),u(r,"d","M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"),u(t,"class","w-24 h-24 mx-auto text-gray-300 dark:text-gray-600 mb-4"),u(t,"fill","none"),u(t,"stroke","currentColor"),u(t,"viewBox","0 0 24 24"),u(l,"class","text-xl font-semibold text-gray-900 dark:text-white mb-2"),u(o,"class","text-gray-600 dark:text-gray-300 mb-6"),u(a,"class","inline-flex items-center px-6 py-3 border border-transparent rounded-lg shadow-sm text-base font-medium text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 dark:focus:ring-offset-gray-900 transition-colors"),u(e,"class","text-center py-12")},m(p,j){I(p,e,j),s(e,t),s(t,r),s(e,i),s(e,l),s(e,c),s(e,o),s(e,d),s(e,a),f||(h=R(a,"click",n[2]),f=!0)},p:ee,i:ee,o:ee,d(p){p&&D(e),f=!1,h()}}}function bt(n,e){let t,r,i;return r=new nn({props:{project:e[4]}}),{key:n,first:null,c(){t=je(),be(r.$$.fragment),this.first=t},m(l,c){I(l,t,c),ce(r,l,c),i=!0},p(l,c){e=l;const o={};c&2&&(o.project=e[4]),r.$set(o)},i(l){i||(W(r.$$.fragment,l),i=!0)},o(l){Q(r.$$.fragment,l),i=!1},d(l){l&&D(t),fe(r,l)}}}function _t(n){let e,t;return e=new un({}),e.$on("close",n[3]),{c(){be(e.$$.fragment)},m(r,i){ce(e,r,i),t=!0},p:ee,i(r){t||(W(e.$$.fragment,r),t=!0)},o(r){Q(e.$$.fragment,r),t=!1},d(r){fe(e,r)}}}function _n(n){let e,t,r,i,l,c,o,d,a,f,h,p,j,b,_;e=new mn({});const m=[bn,hn],k=[];function x(y,v){return y[1].length===0?0:1}a=x(n),f=k[a]=m[a](n);let S=n[0]&&_t(n);return{c(){be(e.$$.fragment),t=w(),r=g("main"),i=g("div"),l=g("div"),l.innerHTML=`<h1 class="text-3xl font-bold text-gray-900 dark:text-white">Game TODO Tracker</h1> 
      <p class="mt-2 text-gray-600 dark:text-gray-300">Track your daily and weekly game activities</p>`,c=w(),o=g("button"),o.innerHTML=`<svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6v6m0 0v6m0-6h6m-6 0H6"></path></svg>
      Add TODO`,d=w(),f.c(),h=w(),S&&S.c(),p=je(),u(o,"class","inline-flex items-center px-4 py-2 border border-transparent rounded-lg shadow-sm text-sm font-medium text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 dark:focus:ring-offset-gray-900 transition-colors"),u(i,"class","flex justify-between items-center mb-8"),u(r,"class","max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8")},m(y,v){ce(e,y,v),I(y,t,v),I(y,r,v),s(r,i),s(i,l),s(i,c),s(i,o),s(r,d),k[a].m(r,null),I(y,h,v),S&&S.m(y,v),I(y,p,v),j=!0,b||(_=R(o,"click",n[2]),b=!0)},p(y,[v]){let T=a;a=x(y),a===T?k[a].p(y,v):(me(),Q(k[T],1,1,()=>{k[T]=null}),he(),f=k[a],f?f.p(y,v):(f=k[a]=m[a](y),f.c()),W(f,1),f.m(r,null)),y[0]?S?(S.p(y,v),v&1&&W(S,1)):(S=_t(y),S.c(),W(S,1),S.m(p.parentNode,p)):S&&(me(),Q(S,1,1,()=>{S=null}),he())},i(y){j||(W(e.$$.fragment,y),W(f),W(S),j=!0)},o(y){Q(e.$$.fragment,y),Q(f),Q(S),j=!1},d(y){fe(e,y),y&&D(t),y&&D(r),k[a].d(),y&&D(h),S&&S.d(y),y&&D(p),b=!1,_()}}}function kn(n,e,t){let r=!1,i=[];ne.subscribe(o=>{t(1,i=o.projects)});function l(){t(0,r=!0)}function c(){t(0,r=!1)}return[r,i,l,c]}class yn extends ke{constructor(e){super(),_e(this,e,kn,_n,ge,{})}}function vn(n){let e,t,r,i,l;return e=new Jt({}),i=new yn({}),{c(){be(e.$$.fragment),t=w(),r=g("div"),be(i.$$.fragment),u(r,"class","min-h-screen bg-gray-50 dark:bg-gray-900 transition-colors")},m(c,o){ce(e,c,o),I(c,t,o),I(c,r,o),ce(i,r,null),l=!0},p:ee,i(c){l||(W(e.$$.fragment,c),W(i.$$.fragment,c),l=!0)},o(c){Q(e.$$.fragment,c),Q(i.$$.fragment,c),l=!1},d(c){fe(e,c),c&&D(t),c&&D(r),fe(i)}}}function wn(n){return Ae(()=>{ne.init();const e=setInterval(()=>{ne.checkResets()},6e4);return()=>clearInterval(e)}),[]}class xn extends ke{constructor(e){super(),_e(this,e,wn,vn,ge,{})}}new xn({target:document.getElementById("app")});
