(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))r(l);new MutationObserver(l=>{for(const i of l)if(i.type==="childList")for(const u of i.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&r(u)}).observe(document,{childList:!0,subtree:!0});function n(l){const i={};return l.integrity&&(i.integrity=l.integrity),l.referrerpolicy&&(i.referrerPolicy=l.referrerpolicy),l.crossorigin==="use-credentials"?i.credentials="include":l.crossorigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(l){if(l.ep)return;l.ep=!0;const i=n(l);fetch(l.href,i)}})();function Y(){}function ct(t){return t()}function Pe(){return Object.create(null)}function ee(t){t.forEach(ct)}function ft(t){return typeof t=="function"}function ae(t,e){return t!=t?e==e:t!==e||t&&typeof t=="object"||typeof t=="function"}function ht(t){return Object.keys(t).length===0}function d(t,e){t.appendChild(e)}function $(t,e,n){t.insertBefore(e,n||null)}function D(t){t.parentNode&&t.parentNode.removeChild(t)}function m(t){return document.createElement(t)}function Z(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}function A(t){return document.createTextNode(t)}function j(){return A(" ")}function ye(){return A("")}function H(t,e,n,r){return t.addEventListener(e,n,r),()=>t.removeEventListener(e,n,r)}function c(t,e,n){n==null?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function _t(t){let e;return{p(...n){e=n,e.forEach(r=>t.push(r))},r(){e.forEach(n=>t.splice(t.indexOf(n),1))}}}function bt(t){return Array.from(t.childNodes)}function W(t,e){e=""+e,t.data!==e&&(t.data=e)}function ne(t,e){t.value=e==null?"":e}function Te(t,e,n,r){n==null?t.style.removeProperty(e):t.style.setProperty(e,n,r?"important":"")}function De(t,e,n){for(let r=0;r<t.options.length;r+=1){const l=t.options[r];if(l.__value===e){l.selected=!0;return}}(!n||e!==void 0)&&(t.selectedIndex=-1)}function He(t){const e=t.querySelector(":checked");return e&&e.__value}function O(t,e,n){t.classList[n?"add":"remove"](e)}function kt(t,e,{bubbles:n=!1,cancelable:r=!1}={}){const l=document.createEvent("CustomEvent");return l.initCustomEvent(t,n,r,e),l}let we;function ve(t){we=t}function Ie(){if(!we)throw new Error("Function called outside component initialization");return we}function Oe(t){Ie().$$.on_mount.push(t)}function yt(t){Ie().$$.on_destroy.push(t)}function vt(){const t=Ie();return(e,n,{cancelable:r=!1}={})=>{const l=t.$$.callbacks[e];if(l){const i=kt(e,n,{cancelable:r});return l.slice().forEach(u=>{u.call(t,i)}),!i.defaultPrevented}return!0}}const be=[],Le=[];let ke=[];const Ae=[],wt=Promise.resolve();let Me=!1;function xt(){Me||(Me=!0,wt.then(mt))}function xe(t){ke.push(t)}const $e=new Set;let he=0;function mt(){if(he!==0)return;const t=we;do{try{for(;he<be.length;){const e=be[he];he++,ve(e),St(e.$$)}}catch(e){throw be.length=0,he=0,e}for(ve(null),be.length=0,he=0;Le.length;)Le.pop()();for(let e=0;e<ke.length;e+=1){const n=ke[e];$e.has(n)||($e.add(n),n())}ke.length=0}while(be.length);for(;Ae.length;)Ae.pop()();Me=!1,$e.clear(),ve(t)}function St(t){if(t.fragment!==null){t.update(),ee(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(xe)}}function jt(t){const e=[],n=[];ke.forEach(r=>t.indexOf(r)===-1?e.push(r):n.push(r)),n.forEach(r=>r()),ke=e}const Ce=new Set;let de;function ue(){de={r:0,c:[],p:de}}function ce(){de.r||ee(de.c),de=de.p}function z(t,e){t&&t.i&&(Ce.delete(t),t.i(e))}function V(t,e,n,r){if(t&&t.o){if(Ce.has(t))return;Ce.add(t),de.c.push(()=>{Ce.delete(t),r&&(n&&t.d(1),r())}),t.o(e)}else r&&r()}function gt(t,e){t.d(1),e.delete(t.key)}function Ne(t,e){V(t,1,1,()=>{e.delete(t.key)})}function Se(t,e,n,r,l,i,u,o,s,a,f,h){let p=t.length,v=i.length,_=p;const y={};for(;_--;)y[t[_].key]=_;const g=[],b=new Map,x=new Map,S=[];for(_=v;_--;){const M=h(l,i,_),L=n(M);let B=u.get(L);B?r&&S.push(()=>B.p(M,e)):(B=a(L,M),B.c()),b.set(L,g[_]=B),L in y&&x.set(L,Math.abs(_-y[L]))}const k=new Set,w=new Set;function C(M){z(M,1),M.m(o,f),u.set(M.key,M),f=M.first,v--}for(;p&&v;){const M=g[v-1],L=t[p-1],B=M.key,R=L.key;M===L?(f=M.first,p--,v--):b.has(R)?!u.has(B)||k.has(B)?C(M):w.has(R)?p--:x.get(B)>x.get(R)?(w.add(B),C(M)):(k.add(R),p--):(s(L,u),p--)}for(;p--;){const M=t[p];b.has(M.key)||s(M,u)}for(;v;)C(g[v-1]);return ee(S),g}function fe(t){t&&t.c()}function oe(t,e,n,r){const{fragment:l,after_update:i}=t.$$;l&&l.m(e,n),r||xe(()=>{const u=t.$$.on_mount.map(ct).filter(ft);t.$$.on_destroy?t.$$.on_destroy.push(...u):ee(u),t.$$.on_mount=[]}),i.forEach(xe)}function se(t,e){const n=t.$$;n.fragment!==null&&(jt(n.after_update),ee(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function Ct(t,e){t.$$.dirty[0]===-1&&(be.push(t),xt(),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function me(t,e,n,r,l,i,u,o=[-1]){const s=we;ve(t);const a=t.$$={fragment:null,ctx:[],props:i,update:Y,not_equal:l,bound:Pe(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(s?s.$$.context:[])),callbacks:Pe(),dirty:o,skip_bound:!1,root:e.target||s.$$.root};u&&u(a.root);let f=!1;if(a.ctx=n?n(t,e.props||{},(h,p,...v)=>{const _=v.length?v[0]:p;return a.ctx&&l(a.ctx[h],a.ctx[h]=_)&&(!a.skip_bound&&a.bound[h]&&a.bound[h](_),f&&Ct(t,h)),p}):[],a.update(),f=!0,ee(a.before_update),a.fragment=r?r(a.ctx):!1,e.target){if(e.hydrate){const h=bt(e.target);a.fragment&&a.fragment.l(h),h.forEach(D)}else a.fragment&&a.fragment.c();e.intro&&z(t.$$.fragment),oe(t,e.target,e.anchor,e.customElement),mt()}ve(s)}class ge{$destroy(){se(this,1),this.$destroy=Y}$on(e,n){if(!ft(n))return Y;const r=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return r.push(n),()=>{const l=r.indexOf(n);l!==-1&&r.splice(l,1)}}$set(e){this.$$set&&!ht(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}class Tt extends ge{constructor(e){super(),me(this,e,null,null,ae,{})}}const _e=[];function Dt(t,e=Y){let n;const r=new Set;function l(o){if(ae(t,o)&&(t=o,n)){const s=!_e.length;for(const a of r)a[1](),_e.push(a,t);if(s){for(let a=0;a<_e.length;a+=2)_e[a][0](_e[a+1]);_e.length=0}}}function i(o){l(o(t))}function u(o,s=Y){const a=[o,s];return r.add(a),r.size===1&&(n=e(l)||Y),o(t),()=>{r.delete(a),r.size===0&&n&&(n(),n=null)}}return{set:l,update:i,subscribe:u}}const le="game-todo-data",$t={projects:[],settings:{theme:"light"}};function Mt(){const{subscribe:t,set:e,update:n}=Dt($t);return{subscribe:t,init:()=>{if(typeof window<"u"){const r=localStorage.getItem(le);if(r)try{const l=JSON.parse(r);e(l)}catch(l){console.error("Failed to parse stored todo data:",l)}}},save:r=>{typeof window<"u"&&localStorage.setItem(le,JSON.stringify(r)),e(r)},addProject:r=>{n(l=>{const i={...l,projects:[...l.projects,r]};return typeof window<"u"&&localStorage.setItem(le,JSON.stringify(i)),i})},updateProject:(r,l)=>{n(i=>{const u={...i,projects:i.projects.map(o=>o.id===r?{...o,...l}:o)};return typeof window<"u"&&localStorage.setItem(le,JSON.stringify(u)),u})},deleteProject:r=>{n(l=>{const i={...l,projects:l.projects.filter(u=>u.id!==r)};return typeof window<"u"&&localStorage.setItem(le,JSON.stringify(i)),i})},updateTodoStatus:(r,l,i)=>{n(u=>{const o={...u,projects:u.projects.map(s=>s.id===r?{...s,items:s.items.map(a=>a.id===l?{...a,status:i}:a)}:s)};return typeof window<"u"&&localStorage.setItem(le,JSON.stringify(o)),o})},addTodoItem:(r,l)=>{n(i=>{const u={...i,projects:i.projects.map(o=>o.id===r?{...o,items:[...o.items,l]}:o)};return typeof window<"u"&&localStorage.setItem(le,JSON.stringify(u)),u})},updateSettings:r=>{n(l=>{const i={...l,settings:{...l.settings,...r}};return typeof window<"u"&&localStorage.setItem(le,JSON.stringify(i)),i})},checkResets:()=>{n(r=>{const l=Date.now();let i=!1;const u={...r,projects:r.projects.map(o=>({...o,items:o.items.map(s=>It(s.resetTime,s.lastReset,l)?(i=!0,{...s,status:"pending",lastReset:l}):s)}))};return i&&typeof window<"u"&&localStorage.setItem(le,JSON.stringify(u)),u})}}}function It(t,e,n){const r=new Date(n);if(t.type==="daily"){const[l,i]=t.time.split(":").map(Number),u=new Date(r);return u.setHours(l,i,0,0),r<u&&u.setDate(u.getDate()-1),e<u.getTime()}else if(t.type==="weekly"){const[l,i]=t.time.split(":").map(Number),u=t.weekday||0,o=new Date(r),s=o.getDay()-u;return o.setDate(o.getDate()-(s>=0?s:s+7)),o.setHours(l,i,0,0),r<o&&o.setDate(o.getDate()-7),e<o.getTime()}return!1}const ie=Mt();function Be(t,e,n){const r=t.slice();return r[11]=e[n],r}function Ot(t){let e,n,r,l,i,u=t[0].name+"",o,s,a,f,h=We(t[0].resetTime)+"",p,v,_,y,g,b,x,S=t[0].status==="completed"&&Re(),k=t[0].description&&ze(t);return{c(){e=m("button"),S&&S.c(),n=j(),r=m("div"),l=m("div"),i=m("h4"),o=A(u),s=j(),a=m("div"),f=m("div"),p=A(h),v=j(),_=m("div"),y=A(t[5]),g=j(),k&&k.c(),c(e,"class","flex-shrink-0 w-5 h-5 rounded border-2 border-gray-300 dark:border-gray-600 flex items-center justify-center transition-all duration-200"),O(e,"bg-indigo-600",t[0].status==="completed"),O(e,"border-indigo-600",t[0].status==="completed"),O(e,"dark:border-indigo-500",t[0].status==="completed"),O(e,"dark:bg-indigo-500",t[0].status==="completed"),c(i,"class","font-medium transition-colors"),O(i,"text-gray-900",t[0].status==="pending"),O(i,"dark:text-white",t[0].status==="pending"),O(i,"text-gray-500",t[0].status==="completed"),O(i,"dark:text-gray-400",t[0].status==="completed"),O(i,"line-through",t[0].status==="completed"),c(f,"class","text-xs text-gray-500 dark:text-gray-400"),c(_,"class","text-xs text-indigo-600 dark:text-indigo-400 font-medium"),c(a,"class","text-right ml-2"),c(l,"class","flex items-start justify-between"),c(r,"class","flex-1")},m(w,C){$(w,e,C),S&&S.m(e,null),$(w,n,C),$(w,r,C),d(r,l),d(l,i),d(i,o),d(l,s),d(l,a),d(a,f),d(f,p),d(a,v),d(a,_),d(_,y),d(r,g),k&&k.m(r,null),b||(x=H(e,"click",t[8]),b=!0)},p(w,C){w[0].status==="completed"?S||(S=Re(),S.c(),S.m(e,null)):S&&(S.d(1),S=null),C&1&&O(e,"bg-indigo-600",w[0].status==="completed"),C&1&&O(e,"border-indigo-600",w[0].status==="completed"),C&1&&O(e,"dark:border-indigo-500",w[0].status==="completed"),C&1&&O(e,"dark:bg-indigo-500",w[0].status==="completed"),C&1&&u!==(u=w[0].name+"")&&W(o,u),C&1&&O(i,"text-gray-900",w[0].status==="pending"),C&1&&O(i,"dark:text-white",w[0].status==="pending"),C&1&&O(i,"text-gray-500",w[0].status==="completed"),C&1&&O(i,"dark:text-gray-400",w[0].status==="completed"),C&1&&O(i,"line-through",w[0].status==="completed"),C&1&&h!==(h=We(w[0].resetTime)+"")&&W(p,h),C&32&&W(y,w[5]),w[0].description?k?k.p(w,C):(k=ze(w),k.c(),k.m(r,null)):k&&(k.d(1),k=null)},d(w){w&&D(e),S&&S.d(),w&&D(n),w&&D(r),k&&k.d(),b=!1,x()}}}function Nt(t){let e,n,r,l,i,u,o,s,a,f,h=t[0].name+"",p,v,_,y,g=t[0].description&&Fe(t);return{c(){e=m("button"),n=Z("svg"),r=Z("path"),i=j(),u=Z("svg"),o=Z("path"),s=j(),a=m("div"),f=m("h4"),p=A(h),v=j(),g&&g.c(),c(r,"stroke-linecap","round"),c(r,"stroke-linejoin","round"),c(r,"stroke-width","2"),c(r,"d","M9 5l7 7-7 7"),c(n,"class",l="w-4 h-4 text-gray-500 dark:text-gray-400 transform transition-transform "+(t[4]?"rotate-90":"")),c(n,"fill","none"),c(n,"stroke","currentColor"),c(n,"viewBox","0 0 24 24"),c(o,"stroke-linecap","round"),c(o,"stroke-linejoin","round"),c(o,"stroke-width","2"),c(o,"d","M3 7v10a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2H5a2 2 0 00-2-2z"),c(u,"class","w-5 h-5 text-indigo-600 dark:text-indigo-400"),c(u,"fill","none"),c(u,"stroke","currentColor"),c(u,"viewBox","0 0 24 24"),c(f,"class","font-medium text-gray-900 dark:text-white"),c(a,"class","flex-1"),c(e,"class","flex items-center gap-2 flex-1 text-left hover:bg-gray-200 dark:hover:bg-gray-600 rounded p-1 -m-1 transition-colors")},m(b,x){$(b,e,x),d(e,n),d(n,r),d(e,i),d(e,u),d(u,o),d(e,s),d(e,a),d(a,f),d(f,p),d(a,v),g&&g.m(a,null),_||(y=H(e,"click",t[7]),_=!0)},p(b,x){x&16&&l!==(l="w-4 h-4 text-gray-500 dark:text-gray-400 transform transition-transform "+(b[4]?"rotate-90":""))&&c(n,"class",l),x&1&&h!==(h=b[0].name+"")&&W(p,h),b[0].description?g?g.p(b,x):(g=Fe(b),g.c(),g.m(a,null)):g&&(g.d(1),g=null)},d(b){b&&D(e),g&&g.d(),_=!1,y()}}}function Re(t){let e,n;return{c(){e=Z("svg"),n=Z("path"),c(n,"stroke-linecap","round"),c(n,"stroke-linejoin","round"),c(n,"stroke-width","3"),c(n,"d","M5 13l4 4L19 7"),c(e,"class","w-3 h-3 text-white"),c(e,"fill","none"),c(e,"stroke","currentColor"),c(e,"viewBox","0 0 24 24")},m(r,l){$(r,e,l),d(e,n)},d(r){r&&D(e)}}}function ze(t){let e,n=t[0].description+"",r;return{c(){e=m("p"),r=A(n),c(e,"class","text-sm mt-1 transition-colors"),O(e,"text-gray-600",t[0].status==="pending"),O(e,"dark:text-gray-300",t[0].status==="pending"),O(e,"text-gray-400",t[0].status==="completed"),O(e,"dark:text-gray-500",t[0].status==="completed")},m(l,i){$(l,e,i),d(e,r)},p(l,i){i&1&&n!==(n=l[0].description+"")&&W(r,n),i&1&&O(e,"text-gray-600",l[0].status==="pending"),i&1&&O(e,"dark:text-gray-300",l[0].status==="pending"),i&1&&O(e,"text-gray-400",l[0].status==="completed"),i&1&&O(e,"dark:text-gray-500",l[0].status==="completed")},d(l){l&&D(e)}}}function Fe(t){let e,n=t[0].description+"",r;return{c(){e=m("p"),r=A(n),c(e,"class","text-sm text-gray-600 dark:text-gray-300 mt-1")},m(l,i){$(l,e,i),d(e,r)},p(l,i){i&1&&n!==(n=l[0].description+"")&&W(r,n)},d(l){l&&D(e)}}}function Je(t){let e=[],n=new Map,r,l,i=t[6];const u=o=>o[11].id;for(let o=0;o<i.length;o+=1){let s=Be(t,i,o),a=u(s);n.set(a,e[o]=Ve(a,s))}return{c(){for(let o=0;o<e.length;o+=1)e[o].c();r=ye()},m(o,s){for(let a=0;a<e.length;a+=1)e[a]&&e[a].m(o,s);$(o,r,s),l=!0},p(o,s){s&78&&(i=o[6],ue(),e=Se(e,s,u,1,o,i,n,r.parentNode,Ne,Ve,r,Be),ce())},i(o){if(!l){for(let s=0;s<i.length;s+=1)z(e[s]);l=!0}},o(o){for(let s=0;s<e.length;s+=1)V(e[s]);l=!1},d(o){for(let s=0;s<e.length;s+=1)e[s].d(o);o&&D(r)}}}function Ve(t,e){let n,r,l;return r=new pt({props:{item:e[11],projectId:e[1],allItems:e[2],depth:e[3]+1}}),{key:t,first:null,c(){n=ye(),fe(r.$$.fragment),this.first=n},m(i,u){$(i,n,u),oe(r,i,u),l=!0},p(i,u){e=i;const o={};u&64&&(o.item=e[11]),u&2&&(o.projectId=e[1]),u&4&&(o.allItems=e[2]),u&8&&(o.depth=e[3]+1),r.$set(o)},i(i){l||(z(r.$$.fragment,i),l=!0)},o(i){V(r.$$.fragment,i),l=!1},d(i){i&&D(n),se(r,i)}}}function Et(t){let e,n,r,l;function i(a,f){return a[0].isSection?Nt:Ot}let u=i(t),o=u(t),s=(!t[0].isSection||t[4])&&Je(t);return{c(){e=m("div"),n=m("div"),o.c(),r=j(),s&&s.c(),c(n,"class","flex items-center gap-3 p-3 rounded-lg border border-gray-200 dark:border-gray-600 bg-gray-50 dark:bg-gray-700/50 hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors"),O(n,"opacity-60",t[0].status==="completed"&&!t[0].isSection),c(e,"class","space-y-1"),Te(e,"margin-left",t[3]*1.5+"rem")},m(a,f){$(a,e,f),d(e,n),o.m(n,null),d(e,r),s&&s.m(e,null),l=!0},p(a,[f]){u===(u=i(a))&&o?o.p(a,f):(o.d(1),o=u(a),o&&(o.c(),o.m(n,null))),(!l||f&1)&&O(n,"opacity-60",a[0].status==="completed"&&!a[0].isSection),!a[0].isSection||a[4]?s?(s.p(a,f),f&17&&z(s,1)):(s=Je(a),s.c(),z(s,1),s.m(e,null)):s&&(ue(),V(s,1,1,()=>{s=null}),ce()),(!l||f&8)&&Te(e,"margin-left",a[3]*1.5+"rem")},i(a){l||(z(s),l=!0)},o(a){V(s),l=!1},d(a){a&&D(e),o.d(),s&&s.d()}}}function We(t){return t.type==="daily"?`Daily at ${t.time}`:`Weekly ${["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"][t.weekday||0]} at ${t.time}`}function qe(t){const e=new Date;let n;if(t.type==="daily"){const[u,o]=t.time.split(":").map(Number);n=new Date(e),n.setHours(u,o,0,0),e>=n&&n.setDate(n.getDate()+1)}else{const[u,o]=t.time.split(":").map(Number),s=t.weekday||0;n=new Date(e);const a=e.getDay(),f=(s-a+7)%7;n.setDate(n.getDate()+f),n.setHours(u,o,0,0),f===0&&e>=n&&n.setDate(n.getDate()+7)}const r=n.getTime()-e.getTime();if(r<=0)return"Reset now";const l=Math.floor(r/(1e3*60*60)),i=Math.floor(r%(1e3*60*60)/(1e3*60));if(l>24){const u=Math.floor(l/24),o=l%24;return`${u}d ${o}h remaining`}else return l>0?`${l}h ${i}m remaining`:`${i}m remaining`}function Pt(t,e,n){let r,{item:l}=e,{projectId:i}=e,{allItems:u}=e,{depth:o=0}=e,s=!0,a="",f;Oe(()=>{l.isSection||(n(5,a=qe(l.resetTime)),f=setInterval(()=>{n(5,a=qe(l.resetTime))},6e4))}),yt(()=>{f&&clearInterval(f)});function h(){n(4,s=!s)}function p(){if(!l.isSection){const v=l.status==="completed"?"pending":"completed";ie.updateTodoStatus(i,l.id,v)}}return t.$$set=v=>{"item"in v&&n(0,l=v.item),"projectId"in v&&n(1,i=v.projectId),"allItems"in v&&n(2,u=v.allItems),"depth"in v&&n(3,o=v.depth)},t.$$.update=()=>{t.$$.dirty&5&&n(6,r=u.filter(v=>v.parentId===l.id)),t.$$.dirty&8},[l,i,u,o,s,a,r,h,p]}class pt extends ge{constructor(e){super(),me(this,e,Pt,Et,ae,{item:0,projectId:1,allItems:2,depth:3})}}function Ge(t,e,n){const r=t.slice();return r[9]=e[n],r}function Ke(t){let e,n=t[0].description+"",r;return{c(){e=m("p"),r=A(n),c(e,"class","text-sm text-gray-600 dark:text-gray-300 mb-3")},m(l,i){$(l,e,i),d(e,r)},p(l,i){i&1&&n!==(n=l[0].description+"")&&W(r,n)},d(l){l&&D(e)}}}function Ue(t){let e,n=[],r=new Map,l,i=t[4];const u=o=>o[9].id;for(let o=0;o<i.length;o+=1){let s=Ge(t,i,o),a=u(s);r.set(a,n[o]=Ye(a,s))}return{c(){e=m("div");for(let o=0;o<n.length;o+=1)n[o].c();c(e,"class","border-t border-gray-200 dark:border-gray-700 pt-4 space-y-2")},m(o,s){$(o,e,s);for(let a=0;a<n.length;a+=1)n[a]&&n[a].m(e,null);l=!0},p(o,s){s&17&&(i=o[4],ue(),n=Se(n,s,u,1,o,i,r,e,Ne,Ye,null,Ge),ce())},i(o){if(!l){for(let s=0;s<i.length;s+=1)z(n[s]);l=!0}},o(o){for(let s=0;s<n.length;s+=1)V(n[s]);l=!1},d(o){o&&D(e);for(let s=0;s<n.length;s+=1)n[s].d()}}}function Ye(t,e){let n,r,l;return r=new pt({props:{item:e[9],projectId:e[0].id,allItems:e[0].items,depth:0}}),{key:t,first:null,c(){n=ye(),fe(r.$$.fragment),this.first=n},m(i,u){$(i,n,u),oe(r,i,u),l=!0},p(i,u){e=i;const o={};u&16&&(o.item=e[9]),u&1&&(o.projectId=e[0].id),u&1&&(o.allItems=e[0].items),r.$set(o)},i(i){l||(z(r.$$.fragment,i),l=!0)},o(i){V(r.$$.fragment,i),l=!1},d(i){i&&D(n),se(r,i)}}}function Ht(t){let e,n,r,l,i,u=t[0].name+"",o,s,a,f,h,p,v,_,y,g,b,x,S,k,w,C,M,L,B,R,J,q,G,Q,N=t[0].description&&Ke(t),E=t[3]&&Ue(t);return{c(){e=m("div"),n=m("div"),r=m("div"),l=m("div"),i=m("h3"),o=A(u),s=j(),N&&N.c(),a=j(),f=m("div"),h=m("div"),p=m("div"),v=j(),_=m("span"),y=A(t[2]),g=A("/"),b=A(t[1]),x=j(),S=m("div"),k=m("button"),w=Z("svg"),C=Z("path"),B=j(),R=m("button"),R.innerHTML='<svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"></path></svg>',J=j(),E&&E.c(),c(i,"class","text-lg font-semibold text-gray-900 dark:text-white mb-2"),c(p,"class","bg-indigo-600 dark:bg-indigo-500 h-2 rounded-full transition-all duration-300"),Te(p,"width",t[5]+"%"),c(h,"class","flex-1 bg-gray-200 dark:bg-gray-700 rounded-full h-2"),c(_,"class","text-sm font-medium text-gray-900 dark:text-white"),c(f,"class","flex items-center gap-3 mb-3"),c(l,"class","flex-1"),c(C,"stroke-linecap","round"),c(C,"stroke-linejoin","round"),c(C,"stroke-width","2"),c(C,"d","M19 9l-7 7-7-7"),c(w,"class",M="w-5 h-5 transform transition-transform "+(t[3]?"rotate-180":"")),c(w,"fill","none"),c(w,"stroke","currentColor"),c(w,"viewBox","0 0 24 24"),c(k,"class","p-2 rounded-lg text-gray-600 dark:text-gray-300 hover:text-gray-900 dark:hover:text-white hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors"),c(k,"title",L=t[3]?"Collapse":"Expand"),c(R,"class","p-2 rounded-lg text-gray-400 hover:text-red-600 hover:bg-red-50 dark:hover:bg-red-900/20 transition-colors"),c(R,"title","Delete project"),c(S,"class","flex items-center gap-2 ml-4"),c(r,"class","flex items-start justify-between mb-4"),c(n,"class","p-6"),c(e,"class","bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700 overflow-hidden")},m(I,F){$(I,e,F),d(e,n),d(n,r),d(r,l),d(l,i),d(i,o),d(l,s),N&&N.m(l,null),d(l,a),d(l,f),d(f,h),d(h,p),d(f,v),d(f,_),d(_,y),d(_,g),d(_,b),d(r,x),d(r,S),d(S,k),d(k,w),d(w,C),d(S,B),d(S,R),d(n,J),E&&E.m(n,null),q=!0,G||(Q=[H(k,"click",t[6]),H(R,"click",t[7])],G=!0)},p(I,[F]){(!q||F&1)&&u!==(u=I[0].name+"")&&W(o,u),I[0].description?N?N.p(I,F):(N=Ke(I),N.c(),N.m(l,a)):N&&(N.d(1),N=null),(!q||F&32)&&Te(p,"width",I[5]+"%"),(!q||F&4)&&W(y,I[2]),(!q||F&2)&&W(b,I[1]),(!q||F&8&&M!==(M="w-5 h-5 transform transition-transform "+(I[3]?"rotate-180":"")))&&c(w,"class",M),(!q||F&8&&L!==(L=I[3]?"Collapse":"Expand"))&&c(k,"title",L),I[3]?E?(E.p(I,F),F&8&&z(E,1)):(E=Ue(I),E.c(),z(E,1),E.m(n,null)):E&&(ue(),V(E,1,1,()=>{E=null}),ce())},i(I){q||(z(E),q=!0)},o(I){V(E),q=!1},d(I){I&&D(e),N&&N.d(),E&&E.d(),G=!1,ee(Q)}}}function Lt(t,e,n){let r,l,i,u,{project:o}=e,s=!1;function a(){n(3,s=!s)}function f(){confirm(`Are you sure you want to delete "${o.name}"?`)&&ie.deleteProject(o.id)}return t.$$set=h=>{"project"in h&&n(0,o=h.project)},t.$$.update=()=>{t.$$.dirty&1&&n(2,r=o.items.filter(h=>!h.isSection&&h.status==="completed").length),t.$$.dirty&1&&n(1,l=o.items.filter(h=>!h.isSection).length),t.$$.dirty&6&&n(5,i=l>0?r/l*100:0),t.$$.dirty&1&&n(4,u=o.items.filter(h=>!h.parentId))},[o,l,r,s,u,i,a,f]}class At extends ge{constructor(e){super(),me(this,e,Lt,Ht,ae,{project:0})}}function Qe(t,e,n){const r=t.slice();return r[36]=e[n],r}function Xe(t,e,n){const r=t.slice();return r[33]=e[n],r}function Bt(t){let e,n,r,l,i,u,o,s,a,f,h,p,v,_,y,g,b,x,S,k,w,C,M=[],L=new Map,B,R,J,q,G,Q,N,E,I,F=t[4];const re=T=>T[36].id;for(let T=0;T<F.length;T+=1){let P=Qe(t,F,T),U=re(P);L.set(U,M[T]=et(U,P))}return{c(){e=m("div"),n=m("div"),r=m("button"),r.textContent="\u2190 Back to Presets",l=j(),i=m("div"),u=m("div"),o=m("label"),o.textContent="TODO Name *",s=j(),a=m("input"),f=j(),h=m("div"),p=m("label"),p.textContent="Description (Optional)",v=j(),_=m("textarea"),y=j(),g=m("div"),b=m("div"),x=m("h3"),x.textContent="Tasks & Sections",S=j(),k=m("button"),k.innerHTML=`<svg class="w-4 h-4 mr-1" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6v6m0 0v6m0-6h6m-6 0H6"></path></svg>
                Add Item`,w=j(),C=m("div");for(let T=0;T<M.length;T+=1)M[T].c();B=j(),R=m("div"),J=m("button"),J.textContent="Cancel",q=j(),G=m("button"),Q=A("Create TODO"),c(r,"class","text-sm text-indigo-600 dark:text-indigo-400 hover:text-indigo-700 dark:hover:text-indigo-300 mb-4"),c(o,"class","block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"),c(a,"type","text"),c(a,"class","w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 dark:bg-gray-700 dark:text-white"),c(a,"placeholder","Enter TODO name"),c(p,"class","block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"),c(_,"class","w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 dark:bg-gray-700 dark:text-white"),c(_,"placeholder","Describe your TODO"),c(_,"rows","2"),c(i,"class","space-y-4"),c(x,"class","text-lg font-medium text-gray-900 dark:text-white"),c(k,"class","inline-flex items-center px-3 py-1 text-sm font-medium text-indigo-600 dark:text-indigo-400 hover:text-indigo-700 dark:hover:text-indigo-300"),c(b,"class","flex items-center justify-between mb-4"),c(C,"class","space-y-2 max-h-40 overflow-y-auto"),c(J,"class","flex-1 px-4 py-2 text-gray-700 dark:text-gray-300 border border-gray-300 dark:border-gray-600 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors"),G.disabled=N=!t[2].trim(),c(G,"class","flex-1 px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors"),c(R,"class","flex gap-3 pt-6 border-t border-gray-200 dark:border-gray-600"),c(e,"class","space-y-6")},m(T,P){$(T,e,P),d(e,n),d(n,r),d(n,l),d(n,i),d(i,u),d(u,o),d(u,s),d(u,a),ne(a,t[2]),d(i,f),d(i,h),d(h,p),d(h,v),d(h,_),ne(_,t[3]),d(e,y),d(e,g),d(g,b),d(b,x),d(b,S),d(b,k),d(g,w),d(g,C);for(let U=0;U<M.length;U+=1)M[U]&&M[U].m(C,null);d(e,B),d(e,R),d(R,J),d(R,q),d(R,G),d(G,Q),E||(I=[H(r,"click",t[17]),H(a,"input",t[18]),H(_,"input",t[19]),H(k,"click",t[10]),H(J,"click",t[14]),H(G,"click",t[9])],E=!0)},p(T,P){P[0]&4&&a.value!==T[2]&&ne(a,T[2]),P[0]&8&&ne(_,T[3]),P[0]&8208&&(F=T[4],M=Se(M,P,re,1,T,F,L,C,gt,et,null,Qe)),P[0]&4&&N!==(N=!T[2].trim())&&(G.disabled=N)},d(T){T&&D(e);for(let P=0;P<M.length;P+=1)M[P].d();E=!1,ee(I)}}}function Rt(t){let e,n,r,l,i=[],u=new Map,o,s,a,f,h,p=t[1];const v=_=>_[33].name;for(let _=0;_<p.length;_+=1){let y=Xe(t,p,_),g=v(y);u.set(g,i[_]=nt(g,y))}return{c(){e=m("div"),n=m("div"),n.innerHTML=`<h3 class="text-lg font-medium text-gray-900 dark:text-white mb-2">Choose a Preset</h3> 
            <p class="text-gray-600 dark:text-gray-300">Start with a pre-configured template or create a custom TODO</p>`,r=j(),l=m("div");for(let _=0;_<i.length;_+=1)i[_].c();o=j(),s=m("div"),a=m("button"),a.innerHTML=`<svg class="w-8 h-8 mx-auto text-gray-400 dark:text-gray-500 mb-2" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="1" d="M12 6v6m0 0v6m0-6h6m-6 0H6"></path></svg> 
              <span class="text-sm font-medium text-gray-900 dark:text-white">Create Custom TODO</span>`,c(n,"class","text-center"),c(l,"class","grid gap-4"),c(a,"class","w-full p-4 border-2 border-dashed border-gray-300 dark:border-gray-600 rounded-lg text-center hover:border-indigo-500 hover:bg-indigo-50 dark:hover:bg-indigo-900/20 transition-colors"),c(s,"class","border-t border-gray-200 dark:border-gray-600 pt-6"),c(e,"class","space-y-6")},m(_,y){$(_,e,y),d(e,n),d(e,r),d(e,l);for(let g=0;g<i.length;g+=1)i[g]&&i[g].m(l,null);d(e,o),d(e,s),d(s,a),f||(h=H(a,"click",t[8]),f=!0)},p(_,y){y[0]&130&&(p=_[1],i=Se(i,y,v,1,_,p,u,l,gt,nt,null,Xe))},d(_){_&&D(e);for(let y=0;y<i.length;y+=1)i[y].d();f=!1,h()}}}function Ze(t){let e,n=t[36].description+"",r;return{c(){e=m("p"),r=A(n),c(e,"class","text-sm text-gray-600 dark:text-gray-300")},m(l,i){$(l,e,i),d(e,r)},p(l,i){i[0]&16&&n!==(n=l[36].description+"")&&W(r,n)},d(l){l&&D(e)}}}function et(t,e){let n,r,l,i=e[36].isSection?"\u{1F4C1}":"\u{1F4CB}",u,o,s=e[36].name+"",a,f,h,p,v,_,y,g=e[36].description&&Ze(e);function b(){return e[20](e[36])}return{key:t,first:null,c(){n=m("div"),r=m("div"),l=m("span"),u=A(i),o=j(),a=A(s),f=j(),g&&g.c(),h=j(),p=m("button"),p.innerHTML='<svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"></path></svg>',v=j(),c(l,"class","font-medium text-gray-900 dark:text-white"),c(r,"class","flex-1"),c(p,"class","text-gray-400 hover:text-red-600"),c(n,"class","flex items-center gap-3 p-3 border border-gray-200 dark:border-gray-600 rounded-lg"),this.first=n},m(x,S){$(x,n,S),d(n,r),d(r,l),d(l,u),d(l,o),d(l,a),d(r,f),g&&g.m(r,null),d(n,h),d(n,p),d(n,v),_||(y=H(p,"click",b),_=!0)},p(x,S){e=x,S[0]&16&&i!==(i=e[36].isSection?"\u{1F4C1}":"\u{1F4CB}")&&W(u,i),S[0]&16&&s!==(s=e[36].name+"")&&W(a,s),e[36].description?g?g.p(e,S):(g=Ze(e),g.c(),g.m(r,null)):g&&(g.d(1),g=null)},d(x){x&&D(n),g&&g.d(),_=!1,y()}}}function tt(t){let e,n=t[33].description+"",r;return{c(){e=m("p"),r=A(n),c(e,"class","text-sm text-gray-600 dark:text-gray-300 mb-2")},m(l,i){$(l,e,i),d(e,r)},p(l,i){i[0]&2&&n!==(n=l[33].description+"")&&W(r,n)},d(l){l&&D(e)}}}function nt(t,e){let n,r,l=e[33].name+"",i,u,o,s,a=e[33].items.filter(ot).length+"",f,h,p=e[33].items.filter(st).length+"",v,_,y,g,b,x=e[33].description&&tt(e);function S(){return e[16](e[33])}return{key:t,first:null,c(){n=m("button"),r=m("h4"),i=A(l),u=j(),x&&x.c(),o=j(),s=m("p"),f=A(a),h=A(` tasks, 
                  `),v=A(p),_=A(" sections"),y=j(),c(r,"class","font-medium text-gray-900 dark:text-white mb-1"),c(s,"class","text-xs text-gray-500 dark:text-gray-400"),c(n,"class","p-4 border border-gray-200 dark:border-gray-600 rounded-lg text-left hover:border-indigo-500 hover:bg-indigo-50 dark:hover:bg-indigo-900/20 transition-colors"),this.first=n},m(k,w){$(k,n,w),d(n,r),d(r,i),d(n,u),x&&x.m(n,null),d(n,o),d(n,s),d(s,f),d(s,h),d(s,v),d(s,_),d(n,y),g||(b=H(n,"click",S),g=!0)},p(k,w){e=k,w[0]&2&&l!==(l=e[33].name+"")&&W(i,l),e[33].description?x?x.p(e,w):(x=tt(e),x.c(),x.m(n,o)):x&&(x.d(1),x=null),w[0]&2&&a!==(a=e[33].items.filter(ot).length+"")&&W(f,a),w[0]&2&&p!==(p=e[33].items.filter(st).length+"")&&W(v,p)},d(k){k&&D(n),x&&x.d(),g=!1,b()}}}function rt(t){let e,n,r,l=t[5].isSection?"Add Section":"Add Task",i,u,o,s,a,f,h,p,v,_,y,g,b,x,S,k,w,C,M,L,B,R,J,q,G,Q,N,E,I,F,re=t[5].isSection?"Section":"Task",T,P,U,pe,Ee,X=!t[5].isSection&&lt(t);return U=_t(t[22][0]),{c(){e=m("div"),n=m("div"),r=m("h3"),i=A(l),u=j(),o=m("div"),s=m("div"),a=m("label"),f=m("input"),h=j(),p=m("span"),p.textContent="Task",v=j(),_=m("label"),y=m("input"),g=j(),b=m("span"),b.textContent="Section",x=j(),S=m("div"),k=m("label"),k.textContent="Name *",w=j(),C=m("input"),M=j(),L=m("div"),B=m("label"),B.textContent="Description",R=j(),J=m("input"),q=j(),X&&X.c(),G=j(),Q=m("div"),N=m("button"),N.textContent="Cancel",E=j(),I=m("button"),F=A("Add "),T=A(re),c(r,"class","text-lg font-medium text-gray-900 dark:text-white mb-4"),c(f,"type","radio"),f.__value=!1,f.value=f.__value,c(f,"class","mr-2"),c(p,"class","text-sm text-gray-700 dark:text-gray-300"),c(a,"class","flex items-center"),c(y,"type","radio"),y.__value=!0,y.value=y.__value,c(y,"class","mr-2"),c(b,"class","text-sm text-gray-700 dark:text-gray-300"),c(_,"class","flex items-center"),c(s,"class","flex gap-4 mb-4"),c(k,"class","block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"),c(C,"type","text"),c(C,"class","w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 dark:bg-gray-700 dark:text-white"),c(B,"class","block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"),c(J,"type","text"),c(J,"class","w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 dark:bg-gray-700 dark:text-white"),c(o,"class","space-y-4"),c(N,"class","flex-1 px-4 py-2 text-gray-700 dark:text-gray-300 border border-gray-300 dark:border-gray-600 rounded hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors"),I.disabled=P=!t[5].name.trim(),c(I,"class","flex-1 px-4 py-2 bg-indigo-600 text-white rounded hover:bg-indigo-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors"),c(Q,"class","flex gap-2 mt-6"),c(n,"class","bg-white dark:bg-gray-800 rounded-lg shadow-xl max-w-md w-full p-6"),c(e,"class","fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center p-4 z-[70]"),U.p(f,y)},m(K,te){$(K,e,te),d(e,n),d(n,r),d(r,i),d(n,u),d(n,o),d(o,s),d(s,a),d(a,f),f.checked=f.__value===t[5].isSection,d(a,h),d(a,p),d(s,v),d(s,_),d(_,y),y.checked=y.__value===t[5].isSection,d(_,g),d(_,b),d(o,x),d(o,S),d(S,k),d(S,w),d(S,C),ne(C,t[5].name),d(o,M),d(o,L),d(L,B),d(L,R),d(L,J),ne(J,t[5].description),d(o,q),X&&X.m(o,null),d(n,G),d(n,Q),d(Q,N),d(Q,E),d(Q,I),d(I,F),d(I,T),pe||(Ee=[H(f,"change",t[21]),H(y,"change",t[23]),H(C,"input",t[24]),H(J,"input",t[25]),H(N,"click",t[12]),H(I,"click",t[11])],pe=!0)},p(K,te){te[0]&32&&l!==(l=K[5].isSection?"Add Section":"Add Task")&&W(i,l),te[0]&32&&(f.checked=f.__value===K[5].isSection),te[0]&32&&(y.checked=y.__value===K[5].isSection),te[0]&32&&C.value!==K[5].name&&ne(C,K[5].name),te[0]&32&&J.value!==K[5].description&&ne(J,K[5].description),K[5].isSection?X&&(X.d(1),X=null):X?X.p(K,te):(X=lt(K),X.c(),X.m(o,null)),te[0]&32&&re!==(re=K[5].isSection?"Section":"Task")&&W(T,re),te[0]&32&&P!==(P=!K[5].name.trim())&&(I.disabled=P)},d(K){K&&D(e),X&&X.d(),U.r(),pe=!1,ee(Ee)}}}function lt(t){let e,n,r,l,i,u,o,s,a,f,h,p,v,_,y,g=t[5].resetTime.type==="weekly"&&it(t);return{c(){e=m("div"),n=m("label"),n.textContent="Reset Schedule",r=j(),l=m("select"),i=m("option"),i.textContent="Daily",u=m("option"),u.textContent="Weekly",o=j(),s=m("div"),a=m("div"),f=m("label"),f.textContent="Time",h=j(),p=m("input"),v=j(),g&&g.c(),c(n,"class","block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"),i.__value="daily",i.value=i.__value,u.__value="weekly",u.value=u.__value,c(l,"class","w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 dark:bg-gray-700 dark:text-white"),t[5].resetTime.type===void 0&&xe(()=>t[26].call(l)),c(f,"class","block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"),c(p,"type","time"),c(p,"class","w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 dark:bg-gray-700 dark:text-white"),c(a,"class","flex-1"),c(s,"class","flex gap-2")},m(b,x){$(b,e,x),d(e,n),d(e,r),d(e,l),d(l,i),d(l,u),De(l,t[5].resetTime.type,!0),$(b,o,x),$(b,s,x),d(s,a),d(a,f),d(a,h),d(a,p),ne(p,t[5].resetTime.time),d(s,v),g&&g.m(s,null),_||(y=[H(l,"change",t[26]),H(p,"input",t[27])],_=!0)},p(b,x){x[0]&32&&De(l,b[5].resetTime.type),x[0]&32&&ne(p,b[5].resetTime.time),b[5].resetTime.type==="weekly"?g?g.p(b,x):(g=it(b),g.c(),g.m(s,null)):g&&(g.d(1),g=null)},d(b){b&&D(e),b&&D(o),b&&D(s),g&&g.d(),_=!1,ee(y)}}}function it(t){let e,n,r,l,i,u,o,s,a,f,h,p,v;return{c(){e=m("div"),n=m("label"),n.textContent="Day",r=j(),l=m("select"),i=m("option"),i.textContent="Sunday",u=m("option"),u.textContent="Monday",o=m("option"),o.textContent="Tuesday",s=m("option"),s.textContent="Wednesday",a=m("option"),a.textContent="Thursday",f=m("option"),f.textContent="Friday",h=m("option"),h.textContent="Saturday",c(n,"class","block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"),i.__value=0,i.value=i.__value,u.__value=1,u.value=u.__value,o.__value=2,o.value=o.__value,s.__value=3,s.value=s.__value,a.__value=4,a.value=a.__value,f.__value=5,f.value=f.__value,h.__value=6,h.value=h.__value,c(l,"class","w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 dark:bg-gray-700 dark:text-white"),t[5].resetTime.weekday===void 0&&xe(()=>t[28].call(l)),c(e,"class","flex-1")},m(_,y){$(_,e,y),d(e,n),d(e,r),d(e,l),d(l,i),d(l,u),d(l,o),d(l,s),d(l,a),d(l,f),d(l,h),De(l,t[5].resetTime.weekday,!0),p||(v=H(l,"change",t[28]),p=!0)},p(_,y){y[0]&32&&De(l,_[5].resetTime.weekday)},d(_){_&&D(e),p=!1,v()}}}function zt(t){let e,n,r,l,i,u,o,s,a,f,h,p;function v(b,x){return b[0]?Rt:Bt}let _=v(t),y=_(t),g=t[6]&&t[5]&&rt(t);return{c(){e=m("div"),n=m("div"),r=m("div"),l=m("div"),i=m("h2"),i.textContent="Create New TODO",u=j(),o=m("button"),o.innerHTML='<svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg>',s=j(),y.c(),a=j(),g&&g.c(),f=ye(),c(i,"class","text-2xl font-bold text-gray-900 dark:text-white"),c(o,"class","text-gray-400 hover:text-gray-600 dark:hover:text-gray-200"),c(l,"class","flex items-center justify-between mb-6"),c(r,"class","p-6"),c(n,"class","bg-white dark:bg-gray-800 rounded-xl shadow-xl max-w-2xl w-full max-h-[90vh] overflow-y-auto"),c(e,"class","fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50")},m(b,x){$(b,e,x),d(e,n),d(n,r),d(r,l),d(l,i),d(l,u),d(l,o),d(r,s),y.m(r,null),$(b,a,x),g&&g.m(b,x),$(b,f,x),h||(p=[H(o,"click",t[14]),H(e,"click",t[15])],h=!0)},p(b,x){_===(_=v(b))&&y?y.p(b,x):(y.d(1),y=_(b),y&&(y.c(),y.m(r,null))),b[6]&&b[5]?g?g.p(b,x):(g=rt(b),g.c(),g.m(f.parentNode,f)):g&&(g.d(1),g=null)},i:Y,o:Y,d(b){b&&D(e),y.d(),b&&D(a),g&&g.d(b),b&&D(f),h=!1,ee(p)}}}function je(){return Math.random().toString(36).substr(2,9)}const ot=t=>!t.isSection,st=t=>t.isSection;function Ft(t,e,n){const r=vt();let l=!0,i=[],u=null,o="",s="",a=[],f=null,h=!1;Oe(async()=>{await p()});async function p(){try{const T=["mmo-dailies","gacha-game"],P=await Promise.all(T.map(async U=>{const pe=await fetch(`/todo/presets/${U}.json`);return pe.ok?await pe.json():null}));n(1,i=P.filter(U=>U!==null))}catch(T){console.error("Failed to load presets:",T)}}function v(T){u=T,_()}function _(){if(!u)return;const T={id:je(),name:u.name,description:u.description,items:u.items.map(P=>({...P,id:je(),status:"pending",lastReset:0,parentId:null})),createdAt:Date.now(),isPreset:!0};ie.addProject(T),w()}function y(){n(0,l=!1),u=null}function g(){if(!o.trim())return;const T={id:je(),name:o.trim(),description:s.trim()||void 0,items:a,createdAt:Date.now()};ie.addProject(T),w()}function b(){n(6,h=!0),n(5,f={id:je(),name:"",description:"",status:"pending",resetTime:{type:"daily",time:"20:00"},lastReset:0,parentId:null,isSection:!1})}function x(){if(!(f!=null&&f.name.trim()))return;const T=a.findIndex(P=>P.id===f.id);T>=0?n(4,a[T]={...f},a):n(4,a=[...a,{...f}]),S()}function S(){n(5,f=null),n(6,h=!1)}function k(T){n(4,a=a.filter(P=>P.id!==T))}function w(){r("close")}function C(T){T.target===T.currentTarget&&w()}const M=[[]],L=T=>v(T),B=()=>n(0,l=!0);function R(){o=this.value,n(2,o)}function J(){s=this.value,n(3,s)}const q=T=>k(T.id);function G(){f.isSection=this.__value,n(5,f)}function Q(){f.isSection=this.__value,n(5,f)}function N(){f.name=this.value,n(5,f)}function E(){f.description=this.value,n(5,f)}function I(){f.resetTime.type=He(this),n(5,f)}function F(){f.resetTime.time=this.value,n(5,f)}function re(){f.resetTime.weekday=He(this),n(5,f)}return[l,i,o,s,a,f,h,v,y,g,b,x,S,k,w,C,L,B,R,J,q,G,M,Q,N,E,I,F,re]}class Jt extends ge{constructor(e){super(),me(this,e,Ft,zt,ae,{},null,[-1,-1])}}function Vt(t){let e,n;return{c(){e=Z("svg"),n=Z("path"),c(n,"stroke-linecap","round"),c(n,"stroke-linejoin","round"),c(n,"stroke-width","2"),c(n,"d","M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z"),c(e,"class","w-5 h-5"),c(e,"fill","none"),c(e,"stroke","currentColor"),c(e,"viewBox","0 0 24 24")},m(r,l){$(r,e,l),d(e,n)},d(r){r&&D(e)}}}function Wt(t){let e,n;return{c(){e=Z("svg"),n=Z("path"),c(n,"stroke-linecap","round"),c(n,"stroke-linejoin","round"),c(n,"stroke-width","2"),c(n,"d","M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z"),c(e,"class","w-5 h-5"),c(e,"fill","none"),c(e,"stroke","currentColor"),c(e,"viewBox","0 0 24 24")},m(r,l){$(r,e,l),d(e,n)},d(r){r&&D(e)}}}function qt(t){let e,n,r,l,i,u,o,s;function a(p,v){return p[0]==="light"?Wt:Vt}let f=a(t),h=f(t);return{c(){e=m("header"),n=m("div"),r=m("div"),l=m("div"),l.innerHTML=`<svg class="w-8 h-8 text-indigo-600 dark:text-indigo-400 mr-3" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg> 
        <span class="text-xl font-semibold text-gray-900 dark:text-white">Game TODO</span>`,i=j(),u=m("button"),h.c(),c(l,"class","flex items-center"),c(u,"class","p-2 rounded-lg text-gray-600 dark:text-gray-300 hover:text-gray-900 dark:hover:text-white hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors"),c(u,"title","Toggle theme"),c(r,"class","flex justify-between items-center py-4"),c(n,"class","max-w-7xl mx-auto px-4 sm:px-6 lg:px-8"),c(e,"class","bg-white dark:bg-gray-800 shadow-sm border-b border-gray-200 dark:border-gray-700")},m(p,v){$(p,e,v),d(e,n),d(n,r),d(r,l),d(r,i),d(r,u),h.m(u,null),o||(s=H(u,"click",t[1]),o=!0)},p(p,[v]){f!==(f=a(p))&&(h.d(1),h=f(p),h&&(h.c(),h.m(u,null)))},i:Y,o:Y,d(p){p&&D(e),h.d(),o=!1,s()}}}function Gt(t,e,n){let r="light";ie.subscribe(i=>{n(0,r=i.settings.theme),typeof document<"u"&&document.documentElement.classList.toggle("dark",r==="dark")});function l(){const i=r==="light"?"dark":"light";ie.updateSettings({theme:i})}return[r,l]}class Kt extends ge{constructor(e){super(),me(this,e,Gt,qt,ae,{})}}function at(t,e,n){const r=t.slice();return r[4]=e[n],r}function Ut(t){let e,n=[],r=new Map,l,i=t[1];const u=o=>o[4].id;for(let o=0;o<i.length;o+=1){let s=at(t,i,o),a=u(s);r.set(a,n[o]=dt(a,s))}return{c(){e=m("div");for(let o=0;o<n.length;o+=1)n[o].c();c(e,"class","grid gap-6 md:grid-cols-2 lg:grid-cols-3")},m(o,s){$(o,e,s);for(let a=0;a<n.length;a+=1)n[a]&&n[a].m(e,null);l=!0},p(o,s){s&2&&(i=o[1],ue(),n=Se(n,s,u,1,o,i,r,e,Ne,dt,null,at),ce())},i(o){if(!l){for(let s=0;s<i.length;s+=1)z(n[s]);l=!0}},o(o){for(let s=0;s<n.length;s+=1)V(n[s]);l=!1},d(o){o&&D(e);for(let s=0;s<n.length;s+=1)n[s].d()}}}function Yt(t){let e,n,r,l,i,u,o,s,a,f,h;return{c(){e=m("div"),n=Z("svg"),r=Z("path"),l=j(),i=m("h2"),i.textContent="No TODOs yet",u=j(),o=m("p"),o.textContent="Create your first TODO to start tracking game activities",s=j(),a=m("button"),a.innerHTML=`<svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6v6m0 0v6m0-6h6m-6 0H6"></path></svg>
        Create Your First TODO`,c(r,"stroke-linecap","round"),c(r,"stroke-linejoin","round"),c(r,"stroke-width","1"),c(r,"d","M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"),c(n,"class","w-24 h-24 mx-auto text-gray-300 dark:text-gray-600 mb-4"),c(n,"fill","none"),c(n,"stroke","currentColor"),c(n,"viewBox","0 0 24 24"),c(i,"class","text-xl font-semibold text-gray-900 dark:text-white mb-2"),c(o,"class","text-gray-600 dark:text-gray-300 mb-6"),c(a,"class","inline-flex items-center px-6 py-3 border border-transparent rounded-lg shadow-sm text-base font-medium text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 dark:focus:ring-offset-gray-900 transition-colors"),c(e,"class","text-center py-12")},m(p,v){$(p,e,v),d(e,n),d(n,r),d(e,l),d(e,i),d(e,u),d(e,o),d(e,s),d(e,a),f||(h=H(a,"click",t[2]),f=!0)},p:Y,i:Y,o:Y,d(p){p&&D(e),f=!1,h()}}}function dt(t,e){let n,r,l;return r=new At({props:{project:e[4]}}),{key:t,first:null,c(){n=ye(),fe(r.$$.fragment),this.first=n},m(i,u){$(i,n,u),oe(r,i,u),l=!0},p(i,u){e=i;const o={};u&2&&(o.project=e[4]),r.$set(o)},i(i){l||(z(r.$$.fragment,i),l=!0)},o(i){V(r.$$.fragment,i),l=!1},d(i){i&&D(n),se(r,i)}}}function ut(t){let e,n;return e=new Jt({}),e.$on("close",t[3]),{c(){fe(e.$$.fragment)},m(r,l){oe(e,r,l),n=!0},p:Y,i(r){n||(z(e.$$.fragment,r),n=!0)},o(r){V(e.$$.fragment,r),n=!1},d(r){se(e,r)}}}function Qt(t){let e,n,r,l,i,u,o,s,a,f,h,p,v,_,y;e=new Kt({});const g=[Yt,Ut],b=[];function x(k,w){return k[1].length===0?0:1}a=x(t),f=b[a]=g[a](t);let S=t[0]&&ut(t);return{c(){fe(e.$$.fragment),n=j(),r=m("main"),l=m("div"),i=m("div"),i.innerHTML=`<h1 class="text-3xl font-bold text-gray-900 dark:text-white">Game TODO Tracker</h1> 
      <p class="mt-2 text-gray-600 dark:text-gray-300">Track your daily and weekly game activities</p>`,u=j(),o=m("button"),o.innerHTML=`<svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6v6m0 0v6m0-6h6m-6 0H6"></path></svg>
      Add TODO`,s=j(),f.c(),h=j(),S&&S.c(),p=ye(),c(o,"class","inline-flex items-center px-4 py-2 border border-transparent rounded-lg shadow-sm text-sm font-medium text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 dark:focus:ring-offset-gray-900 transition-colors"),c(l,"class","flex justify-between items-center mb-8"),c(r,"class","max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8")},m(k,w){oe(e,k,w),$(k,n,w),$(k,r,w),d(r,l),d(l,i),d(l,u),d(l,o),d(r,s),b[a].m(r,null),$(k,h,w),S&&S.m(k,w),$(k,p,w),v=!0,_||(y=H(o,"click",t[2]),_=!0)},p(k,[w]){let C=a;a=x(k),a===C?b[a].p(k,w):(ue(),V(b[C],1,1,()=>{b[C]=null}),ce(),f=b[a],f?f.p(k,w):(f=b[a]=g[a](k),f.c()),z(f,1),f.m(r,null)),k[0]?S?(S.p(k,w),w&1&&z(S,1)):(S=ut(k),S.c(),z(S,1),S.m(p.parentNode,p)):S&&(ue(),V(S,1,1,()=>{S=null}),ce())},i(k){v||(z(e.$$.fragment,k),z(f),z(S),v=!0)},o(k){V(e.$$.fragment,k),V(f),V(S),v=!1},d(k){se(e,k),k&&D(n),k&&D(r),b[a].d(),k&&D(h),S&&S.d(k),k&&D(p),_=!1,y()}}}function Xt(t,e,n){let r=!1,l=[];ie.subscribe(o=>{n(1,l=o.projects)});function i(){n(0,r=!0)}function u(){n(0,r=!1)}return[r,l,i,u]}class Zt extends ge{constructor(e){super(),me(this,e,Xt,Qt,ae,{})}}function en(t){let e,n,r,l,i;return e=new Tt({}),l=new Zt({}),{c(){fe(e.$$.fragment),n=j(),r=m("div"),fe(l.$$.fragment),c(r,"class","min-h-screen bg-gray-50 dark:bg-gray-900 transition-colors")},m(u,o){oe(e,u,o),$(u,n,o),$(u,r,o),oe(l,r,null),i=!0},p:Y,i(u){i||(z(e.$$.fragment,u),z(l.$$.fragment,u),i=!0)},o(u){V(e.$$.fragment,u),V(l.$$.fragment,u),i=!1},d(u){se(e,u),u&&D(n),u&&D(r),se(l)}}}function tn(t){return Oe(()=>{ie.init();const e=setInterval(()=>{ie.checkResets()},6e4);return()=>clearInterval(e)}),[]}class nn extends ge{constructor(e){super(),me(this,e,tn,en,ae,{})}}new nn({target:document.getElementById("app")});
